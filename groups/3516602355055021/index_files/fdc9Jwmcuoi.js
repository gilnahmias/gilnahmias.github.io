if (self.CavalryLogger) { CavalryLogger.start_js(["7CW4O"]); }

__d("EmployeeLinkMatcher",["CurrentUser","ItemsUtil","gkx"],function(a,b,c,d,e,f){"use strict";a=b("ItemsUtil").FBPN_REGEX;var g=new RegExp("^[\\s.,:]"),h=new RegExp("(?:\\b)(([ABDFTPSXJQWL]|(S2P)|(S2P )|(PR )|(PR)|(PO )|(PO)|(INV)|(INB)|(OUT)|(SET)|(NDA)|(CONTRACT)|(CONTRACT )|(CMS)|(SRT)|(Z)|(NT)|(DAP)|(FBJE)|(RE)|(IE)|(PD)|(M)|(SHUB)|(BID)|(DSQ)|(NWT)|(OA)|(RID))\\d{4,})(?:\\b)","im"),i=new RegExp("(?:\\b)((L)\\d{4,}[a-zA-Z]{1,5}\\d{0,2})(?:\\b)","im"),j=new RegExp("(?:\\b)(((C#)|(CASE))\\d{3,})(?:\\b)","im"),k=new RegExp("(?:\\b)(designpack://.+)(?:\\b)","im"),l=new RegExp(a,"im"),m=new RegExp("(?:\\b)(fb/[^\\s]+)(?:\\b)","im"),n=new RegExp("\\bT([0-9]{7,})\\b","im"),o=new RegExp("\\bD([0-9]{7,})\\b","im"),p=new RegExp("(?:\\b)([Nn](\\d{4,10}))(?:\\b)","im"),q="https://our.intern.facebook.com/intern/tasks/?t=",r="https://our.intern.facebook.com/intern/diff/D";c=function(a){if(!b("CurrentUser").isEmployee())return null;a=h.exec(a)||k.exec(a)||m.exec(a)||i.exec(a)||j.exec(a)||l.exec(a)||p.exec(a);return a===null?null:{lnk:a[1],idx:a.index+(g.exec(a[0])?1:0)}};d=function(a){if(!b("CurrentUser").isEmployee())return null;a=n.exec(a);return a===null?null:q+a[1]};f=function(a){if(!b("CurrentUser").isEmployee())return null;a=o.exec(a);return a===null?null:r+a[1]};a=function(a){a=b("CurrentUser").isEmployee()&&(h.exec(a)!==null||k.exec(a)!==null||m.exec(a)!==null||i.exec(a)!==null||j.exec(a)!==null||p.exec(a)!==null||b("gkx")("1074417")&&l.exec(a)!==null);return a};c={match:c,isMatch:a,matchTaskNumber:d,matchDiffNumber:f};e.exports=c},null);
__d("EmployeeLinkRanges",["EmployeeLinkMatcher","ItemsUtil","UnicodeUtils"],function(a,b,c,d,e,f){"use strict";var g;a=b("ItemsUtil").FBPN_REGEX;var h=new RegExp(a,"im"),i={DIFF_PREFIX:"https://our.intern.facebook.com/intern/diff/",PASTE_PREFIX:"https://our.intern.facebook.com/intern/paste/",TASKS_PREFIX:"https://our.intern.facebook.com/intern/tasks/?t=",BUSINESS_PREFIX:"https://our.intern.facebook.com/intern/business/?q=",SEV_PREFIX:"https://our.intern.facebook.com/intern/sevmanager/view/s/",CHRONOS_PREFIX:"https://our.intern.facebook.com/intern/chronos/lucky/?query=",ADS_PROJECT_PREFIX:"https://our.intern.facebook.com/intern/aip/project/",SRT_JOB_PREFIX:"https://our.intern.facebook.com/intern/bunny/?srt+",ANALYTICS_NOTEBOOKS_PREFIX:"https://our.intern.facebook.com/intern/anp/view/?id=",FBLEARNER_RUN_PREFIX:"https://our.intern.facebook.com/intern/fblearner/details/",PURCHASE_REQUEST_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=pr+",PURCHASE_ORDER_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=po+",CONTRACT_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=contract+",INVOICE_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=invoice+",WORKORDER_PREFIX:"https://our.intern.facebook.com/intern/workorder/",CMS_PREFIX:"https://our.internmc.facebook.com/intern/support/cms/editor/",FBURL_PREFIX:"https://www.fburl.com/",QA_PREFIX:"https://our.intern.facebook.com/intern/qa/",ZONCOLAN_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=z+",NTFIDDLE_PREFIX:"https://our.internmc.facebook.com/intern/nt/fiddle/",DAPPER_PREFIX:"https://our.internmc.facebook.com/intern/dapper/maintenance/",FBJE_PREFIX:"https://our.internmc.facebook.com/intern/fbje/",RESORT_PREFIX:"https://our.internmc.facebook.com/intern/resort/?ticket_num=",INTERN_EVENT_PREFIX:"https://our.internmc.facebook.com/intern/event/?num=",PRIVACY_DECISION_PREFIX:"https://our.internmc.facebook.com/intern/bunny/?q=",SECURITY_HUB_PREFIX:"https://our.internmc.facebook.com/intern/bunny/?q=",DIRECT_SUPPORT_PREFIX:"https://our.internmc.facebook.com/intern/bunny?q=dsq+",LAUNCH_MANAGER_PROJECT_PREFIX:"https://our.internmc.facebook.com/intern/bunny/?q=",CASES_PREFIX:"https://our.internmc.facebook.com/intern/bunny/?q=CASE",SOURCE_TO_PAY_PREFIX:"https://our.intern.facebook.com/intern/bunny/?s2p+",FBPN_PREFIX:"https://our.intern.facebook.com/intern/items?source=work_chat&fbpn=",NETWORK_TICKETING_PREFIX:"https://our.internmc.facebook.com/intern/resort/?ticket_num=",OUTAGE_AUTOMATION_PREFIX:"https://our.internmc.facebook.com/intern/network/outage/event/",REPAIR_ID_PREFIX:"https://our.internmc.facebook.com/intern/bunny/?q=rid+",get:function(a,c){c===void 0&&(c=0);var d=a.substr(c),e=b("EmployeeLinkMatcher").match(d);if(!e)return[];var f=e.lnk;e=e.idx;d=(g||(g=b("UnicodeUtils"))).strlen(d.substr(0,e));e=c+d;c="";if(f.substr(0,3).toLowerCase()==="srt")c=i.SRT_JOB_PREFIX+f.substr(3);else if(f.substr(0,3).toLowerCase()==="s2p")c=i.SOURCE_TO_PAY_PREFIX+f.substr(3);else if(f.substr(0,4).toLowerCase()==="s2p ")c=i.SOURCE_TO_PAY_PREFIX+f.substr(4);else if(f.substr(0,3).toLowerCase()==="pr ")c=i.PURCHASE_REQUEST_PREFIX+f.substr(3);else if(f.substr(0,2).toLowerCase()==="pr")c=i.PURCHASE_REQUEST_PREFIX+f.substr(2);else if(f.substr(0,3).toLowerCase()==="po ")c=i.PURCHASE_ORDER_PREFIX+f.substr(3);else if(f.substr(0,2).toLowerCase()==="po")c=i.PURCHASE_ORDER_PREFIX+f.substr(2);else if(f.substr(0,3).toLowerCase()==="cms")c=i.CMS_PREFIX+f.substr(3);else if(f.substr(0,2).toLowerCase()==="nt")c=i.NTFIDDLE_PREFIX+f.substr(2);else if(f.substr(0,3).toLowerCase()==="dap")c=i.DAPPER_PREFIX+f.substr(3);else if(f.substr(0,4).toLowerCase()==="fbje")c=i.FBJE_PREFIX+f.substr(4);else if(f.substr(0,2).toLowerCase()==="re")c=i.RESORT_PREFIX+f.substr(2);else if(f.substr(0,2).toLowerCase()==="ie")c=i.INTERN_EVENT_PREFIX+f.substr(2);else if(f.substr(0,2).toLowerCase()==="pd")c=i.PRIVACY_DECISION_PREFIX+f;else if(f.substr(0,4).toLowerCase()==="shub")c=i.SECURITY_HUB_PREFIX+f;else if(f.substr(0,3).toLowerCase()==="bid")c=i.BUSINESS_PREFIX+f.substr(3);else if(f.substr(0,3).toLowerCase()==="dsq")c=i.DIRECT_SUPPORT_PREFIX+f.substr(3);else if(f.substr(0,3).toLowerCase()==="inb")c=i.CONTRACT_PREFIX+f.substr(0);else if(f.substr(0,3).toLowerCase()==="out")c=i.CONTRACT_PREFIX+f.substr(0);else if(f.substr(0,3).toLowerCase()==="set")c=i.CONTRACT_PREFIX+f.substr(0);else if(f.substr(0,3).toLowerCase()==="ter")c=i.CONTRACT_PREFIX+f.substr(0);else if(f.substr(0,3).toLowerCase()==="nda")c=i.CONTRACT_PREFIX+f.substr(0);else if(f.substr(0,8).toLowerCase()==="contract")c=i.CONTRACT_PREFIX+f.substr(8);else if(f.substr(0,9).toLowerCase()==="contract ")c=i.CONTRACT_PREFIX+f.substr(9);else if(f.substr(0,3).toLowerCase()==="inv")c=i.INVOICE_PREFIX+f.substr(3);else if(f.substr(0,4).toLowerCase()==="inv ")c=i.INVOICE_PREFIX+f.substr(4);else if(f.substr(0,1).toLowerCase()==="l")c=i.LAUNCH_MANAGER_PROJECT_PREFIX+f;else if(f.substr(0,2).toLowerCase()==="c#")c=i.CASES_PREFIX+f.substr(2);else if(f.substr(0,4).toLowerCase()==="case")c=i.CASES_PREFIX+f.substr(4);else if(h.exec(f)!==null)c=i.FBPN_PREFIX+f;else if(f.substr(0,3).toLowerCase()==="nwt")c=i.NETWORK_TICKETING_PREFIX+f.substr(3);else if(f.substr(0,2).toLowerCase()==="oa")c=i.OUTAGE_AUTOMATION_PREFIX+f.substr(2);else if(f.substr(0,3).toLowerCase()==="rid")c=i.REPAIR_ID_PREFIX+f.substr(3);else switch(f[0].toLowerCase()){case"a":c=i.ADS_PROJECT_PREFIX+f.substr(1);break;case"d":f.indexOf("designpack://")===0?c=f:c=i.DIFF_PREFIX+f.toUpperCase();break;case"m":c=i.PRIVACY_DECISION_PREFIX+f;break;case"p":c=i.PASTE_PREFIX+f.toUpperCase();break;case"t":c=i.TASKS_PREFIX+f.substr(1);break;case"s":c=i.SEV_PREFIX+f.substr(1);break;case"x":c=i.CHRONOS_PREFIX+f.substr(1);break;case"j":c=i.SRT_JOB_PREFIX+f.substr(1);break;case"n":c=i.ANALYTICS_NOTEBOOKS_PREFIX+f.substr(1);break;case"q":c=i.QA_PREFIX+f.substr(1);break;case"f":f.substr(0,3).toLowerCase()==="fb/"?c="https://www.fburl.com/"+f.substr(3):c=i.FBLEARNER_RUN_PREFIX+f.substr(1);break;case"w":c=i.WORKORDER_PREFIX+f.substr(1);break;case"z":c=i.ZONCOLAN_PREFIX+f.substr(1);break;default:return[]}d=f.length;f=[{offset:e,length:d,entity:{url:c}}];return f.concat(i.get(a,e+d))},hasMatch:b("EmployeeLinkMatcher").isMatch};e.exports=i},null);
__d("MessengerThreadSharedMediaHelper",["AsyncRequest","LogHistory","MessageSharedMediaIDStore.bs","MessengerThreadSharedMediaAfterWebGraphQLQuery","MessengerThreadSharedMediaBeforeWebGraphQLQuery","MessengerThreadSharedMediaFindWebGraphQLQuery","performanceAbsoluteNow","promiseDone"],function(a,b,c,d,e,f){"use strict";var g,h=b("LogHistory").getInstance("shared_media_helper"),i=0;a={search:function(a,c,d){var e=b("MessageSharedMediaIDStore.bs").getMessageIDForAttachmentID(c),f=i++,j=(g||(g=b("performanceAbsoluteNow")))(),k=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaFindWebGraphQLQuery").getLegacyURI({id:a,photoID:c,messageID:e}));h.debug("search request "+f,JSON.stringify({id:a,photoID:c,messageID:e,timestamp:j}));b("promiseDone")(k.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(i){var k=(g||(g=b("performanceAbsoluteNow")))();h.debug("search response "+f,JSON.stringify({id:a,photoID:c,messageID:e,timestamp:k,duration:k-j}));d(i)});return k},loadMorePrevious:function(a,c,d,e){a=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaAfterWebGraphQLQuery").getLegacyURI({id:a,after:c,first:d}));b("promiseDone")(a.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){return e(a)});return a},loadMoreLatest:function(a,c,d,e){a=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaBeforeWebGraphQLQuery").getLegacyURI({id:a,before:c,last:d}));b("promiseDone")(a.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){return e(a)});return a}};e.exports=a},null);