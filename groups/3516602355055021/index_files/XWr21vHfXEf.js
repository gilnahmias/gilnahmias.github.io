if (self.CavalryLogger) { CavalryLogger.start_js(["8y66w"]); }

__d("XCometWorkChatControllerRouteBuilder",["cometRouteBuilder"],function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/chat/t/{?thread_key}/",Object.freeze({}),void 0);e.exports=a},null);
__d("MercuryVanityIDMap.re",["bs_curry","MercuryVanityIDMap.bs"],function(a,b,c,d,e,f){c=(a=b("MercuryVanityIDMap.bs")).vanityToID;f.vanityToID=c;d=a.idToVanity;f.idToVanity=d;e=a.getID;f.getID=e;c=a.getVanity;f.getVanity=c;d=a.hasID;f.hasID=d;e=a.hasVanity;f.hasVanity=e;c=function(a,c){a=b("bs_curry")._2(b("MercuryVanityIDMap.bs").set,a,c);return a};f.set=c},null);
__d("MessengerThreadlistMessageRequestsRowReact.re",["MessengerThreadlistMessageRequestsRowReact.bs"],function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerThreadlistMessageRequestsRowReact.bs").make;f.make=a},null);
__d("MessengerURIUtils.re",["MessengerURIUtils.bs"],function(a,b,c,d,e,f){a=b("MessengerURIUtils.bs").getURIForThreadID;f.getURIForThreadID=a;c=b("MessengerURIUtils.bs").getURIForUserID;f.getURIForUserID=c;d=b("MessengerURIUtils.bs").getURIForMessage;f.getURIForMessage=d},null);
__d("WorkChatSearchFunnelState",[],function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1,this.$2=!1}var b=a.prototype;b.setInstanceID=function(a){this.$1=a};b.getInstanceID=function(){return this.$1};b.setIsClicked=function(a){this.$2=a};b.getIsClicked=function(){return this.$2};return a}();e.exports=a},null);
__d("WorkChatSearchFunnelLoggerConstants",[],function(a,b,c,d,e,f){"use strict";a={CLICK:"click",ABANDON:"abandon"};b={END:"end",CLICKS:"clicks",IMPRESSIONS:"impressions",START:"start"};c={WWW:"www"};d={BOOTSTRAP:"bootstrap",BACKEND:"backend"};e.exports={NAME:"WORK_CHAT_SEARCH_FUNNEL",END_STATE:a,EVENTS:b,SURFACES:c,SOURCES:d}},null);
__d("WorkGalahadMasterView.react",["requireCond","ComponentWithOptionalMessengerState.react","FluxHooks","MercuryAPIArgsSource","MercuryFilters.re","MercuryIDs","MessagingTag","MessengerActions","cr:1151587","cr:1153520","MessengerView","MNPlatformTagsDataManager","React","WorkGalahadChannelContext.react","cr:1268943","WorkGalahadTabContext.react","cr:1151588","WorkplaceSearchTypeaheadConfigs","WorkTeamworkSearchStore","cr:1327226","cr:1290389","cr:1290390","cr:1290391","cr:1290392","gkx","unrecoverableViolation"],function(a,b,c,d,e,f){"use strict";var g=b("FluxHooks").useFluxStore,h=b("React");c=b("React");var i=c.useContext,j=c.useState;function k(a){if(a==null)return;if(!b("gkx")("1217157")){b("MessengerActions").selectThread(a.thread_id);a=b("MercuryIDs").getUserIDFromThreadID(a.thread_id);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread("source:messenger:web_search",a)}}function l(){return b("WorkTeamworkSearchStore")!=null?b("WorkTeamworkSearchStore").getQuery():null}function a(a){var c=a.activeThreadID,d=a.blockedIds,e=a.detailView,f=a.filter,m=a.folder,n=a.hideThreadListHeader,o=n===void 0?!1:n;n=a.isDenseMode;var p=n===void 0?!1:n,q=a.pendingFolderUnseenCount,r=a.readReceipts,s=a.view,t=a.viewer,u=a.workChatSearchFunnelState;n=i(b("WorkGalahadTabContext.react"));a=n.show_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n=i(b("WorkGalahadChannelContext.react"));n=n.contentHeight;var v=j(""),w=v[0],x=v[1];v=j(!1);var y=v[0],z=v[1],A=e===b("MessengerView").DETAIL.COMPOSE;v=g(b("WorkTeamworkSearchStore"),l);if(b("cr:1327226")!=null&&v!=null)return h.jsx(b("cr:1327226"),{show:!0});else if(b("cr:1151588")&&b("cr:1268943"))switch(s){case b("MessengerView").MASTER.PAYMENT:case b("MessengerView").MASTER.RECENT:return h.jsx(b("ComponentWithOptionalMessengerState.react"),{fbid:t,useState:!0,children:function(a){return!a?null:h.jsx(b("cr:1151588"),{pendingFolderUnseenCount:q||0,activeThreadID:c,filter:f,folder:m,hideSearchBox:!1,hideThreadListHeader:o,isComposing:A,isDenseMode:p,readReceipts:r,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:t,messengerState:a,queryString:w,setQueryString:x,isSearchFocused:y,setIsSearchFocused:z,handleSelect:k,useMessageSearch:!0,shouldRegisterShortcuts:!0,workChatSearchFunnelState:u})}});case b("MessengerView").MASTER.SEARCH:return h.jsx(b("cr:1268943"),{activeThreadID:c,filter:f,folder:m,hideThreadListHeader:o,isComposing:A,isDenseMode:p,pendingFolderUnseenCount:q||0,viewer:t,queryString:w,setQueryString:x,isSearchFocused:y,setIsSearchFocused:z,showHeader:!0,useMessageSearch:!0,shouldRegisterShortcuts:!0});default:throw new Error("Unknown master view: "+s)}else if(b("cr:1290391")!=null&&b("cr:1290390")!=null&&b("cr:1290389")!=null&&b("cr:1290392")!=null)return h.jsx(b("ComponentWithOptionalMessengerState.react"),{fbid:t,useState:!0,children:function(a){var d;if(!a)return null;switch(s){case b("MessengerView").MASTER.RECENT:return h.jsx(b("cr:1290391"),{activeThreadID:c,handleSelect:k,folder:m,isComposing:A,messengerState:a,pendingFolderUnseenCount:(d=q)!=null?d:0,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:t});case b("MessengerView").MASTER.SEE_ALL_GROUPS:return h.jsx(b("cr:1290390"),{activeThreadID:c,folder:m,handleSelect:k,messengerState:a,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:t});case b("MessengerView").MASTER.SEE_ALL_PEOPLE:return h.jsx(b("cr:1290389"),{activeThreadID:c,folder:m,handleSelect:k,messengerState:a,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:t});case b("MessengerView").MASTER.SEE_ALL_UNREAD:return h.jsx(b("cr:1290392"),{activeThreadID:c,folder:m,handleSelect:k,messengerState:a,source:b("MercuryAPIArgsSource").WEBMESSENGER,viewer:t})}}});else if(b("cr:1151587")&&b("cr:1153520")){if(!a)return null;switch(s){case b("MessengerView").MASTER.PAYMENT:case b("MessengerView").MASTER.RECENT:return h.jsx(b("cr:1151587"),{activeThreadID:c,blockedIds:d,filter:f,folder:m,maxHeight:n,isNewMessageActive:A,pendingFolderUnseenCount:q,readReceipts:r,viewer:t,hideThreadListHeader:o,isDenseMode:p,hideSearchBox:b("gkx")("1291926")||b("WorkplaceSearchTypeaheadConfigs").unifySearchBox});case b("MessengerView").MASTER.SEARCH:return h.jsx(b("cr:1153520"),{activeThreadID:c,blockedIds:d,filter:f,folder:m,isNewMessageActive:A,maxHeight:n,readReceipts:r,viewer:t,hideThreadListHeader:o,isDenseMode:p});default:throw new Error("Unknown master view: "+s)}}throw b("unrecoverableViolation")("[WP WWW][Chat] This should not happen but flow cannot catch it","work_comet_core")}e.exports=a},null);
__d("useWorkChatNavigationState",["requireCond","cr:1273375"],function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1273375")},null);
__d("WorkGalahadChatChannel.react",["Bootloader","CurrentUser","FluxHooks","MercuryFilters.bs","MessagingTag","MessengerBrowserAlerts","MessengerState.bs","React","WorkChatSearchFunnelState","WorkGalahadChatChannelStore","WorkGalahadMasterView.react","WorkGalahadTabContext.react","WorkGalahadVariantState.react","stylex","testID","useWorkChatNavigationState"],function(a,b,c,d,e,f){"use strict";var g=b("FluxHooks").useFluxStore,h=b("React");c=b("React");var i=c.useContext,j=c.useEffect,k=b("WorkGalahadVariantState.react").useWorkGalahadVariant;function l(){return{folder:b("WorkGalahadChatChannelStore").getFolder(),filter:b("WorkGalahadChatChannelStore").getFilter()}}var m=new(b("WorkChatSearchFunnelState"))();function a(a){a=a.messengerState;var c=i(b("WorkGalahadTabContext.react")),d=c.show_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;c=b("useWorkChatNavigationState")();var e=g(b("WorkGalahadChatChannelStore"),l),f=e.filter;e=e.folder;var n=k();n=n.hasDenseThreadlist;j(function(){b("Bootloader").loadModules(["OrderedFriendsList"],function(a){},"WorkGalahadChatChannel.react")},[]);j(function(){if(!d)return;b("MessengerState.bs").markAsSeen(b("CurrentUser").getID());b("MessengerBrowserAlerts").enableMarkAllAsSeenWhenActive();return function(){return b("MessengerBrowserAlerts").disableMarkAllAsSeenWhenActive()}},[d]);return h.jsx("div",babelHelpers["extends"]({className:"tv52aht6 mu99tzkh cfk3jyev",style:{display:d?void 0:"none"}},b("testID")("galahad-chat-tab"),{children:h.jsx(b("WorkGalahadMasterView.react"),{activeThreadID:c.activeThreadID,blockedIds:b("MessengerState.bs").blockedIds(a),detailView:c.detailView,folder:(e=e)!=null?e:b("MessagingTag").INBOX,filter:(e=f)!=null?e:b("MercuryFilters.bs").all,isDenseMode:n,readReceipts:b("MessengerState.bs").readReceiptsPerThread(a),view:c.view,viewer:b("CurrentUser").getID(),workChatSearchFunnelState:m})}))}e.exports=a},null);
__d("WorkGalahadChatChannelItem.react",["ix","fbt","MercuryThreadTimestampReact.re","MercuryTimestamp","MessengerSurfaceQuickChat.re","React","WIGIcon.react","WIGText.react","WIGTextPairing.react","WorkGalahadChannelReadToggle.react","WorkGalahadUIChannelItem.react","WorkGalahadUIStatusBadge.react","fbicon","stylex","useCometUniqueID"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("MercuryThreadTimestampReact.re").make,j=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,k=b("React");c=b("React");var l=c.useMemo;function a(a){var c=a.href,d=a.image,e=a.isActive,f=a.isCompact,m=a.isMuted,n=a.isPinned,o=a.isTeamworkPrototype,p=a.isUnread,q=a.isEditingPinnedThreads,r=a.onPress,s=a.overflowMenu,t=a.unpinAction,u=a.snippet,v=a.timestamp,w=a.title;a=a.toggleReadStatus;var x=j();t=k.jsx("div",{className:"oqpzs85e t36ehdhz gyidwt2h mu99tzkh",children:q===!0?t!=null&&k.jsx("div",{className:"piex8o3r lhmcu1i6 mu99tzkh",children:t}):k.jsxs(k.Fragment,{children:[!o&&n&&k.jsx("div",{className:"piex8o3r lhmcu1i6 mu99tzkh",children:k.jsx(b("WIGIcon.react"),{icon:b("fbicon")._(g("511754"),12),color:"secondary"})}),m&&k.jsx("div",{className:"piex8o3r lhmcu1i6 mu99tzkh",children:k.jsx(b("WIGIcon.react"),{icon:b("fbicon")._(g("564395"),12),color:"secondary"})}),s!=null&&k.jsx("div",{className:"piex8o3r lhmcu1i6 mu99tzkh",children:s}),!o&&f&&p?k.jsx("div",{className:"piex8o3r lhmcu1i6 mu99tzkh",children:k.jsx(b("WorkGalahadUIStatusBadge.react"),{})}):null]})});n=p?k.jsx(b("WIGText.react"),{color:"primary",type:"bodyLink4",children:u}):k.jsx(b("WIGText.react"),{color:"secondary",type:"body4",children:u});m=b("useCometUniqueID")();s=b("useCometUniqueID")();u=b("useCometUniqueID")();var y=l(function(){return x?void 0:{url:c}},[c,x]);a=o?p&&k.jsx(b("WorkGalahadUIStatusBadge.react"),{}):f?null:k.jsx(b("WorkGalahadChannelReadToggle.react"),{onPress:a,unread:p});return k.jsx(b("WorkGalahadUIChannelItem.react"),{selected:e,"aria-current":e&&!x?"page":void 0,"aria-owns":x?void 0:m+" "+u+" "+s,testid:void 0,linkProps:y,onPress:r,indentationLevel:o||!f?2:1,addOnSecondary:q===!0?k.jsx(b("WIGIcon.react"),{color:"tertiary",icon:b("fbicon")._(g("606966"),16)}):a,addOnPrimary:d,headline:k.jsxs("div",{className:"oecdyzpx qbbcxcfp ib0kwflm",id:m,children:[p&&k.jsx("div",{className:"i8ovu4tj fmx0ssg5 fchkd3bi",children:h._("Unread")}),w]}),emphasized:p,body:f?null:k.jsx("div",{className:"oecdyzpx qbbcxcfp ib0kwflm",id:s,children:n}),bodyColor:p?"primary":"secondary",addOnTertiary:f||q===!0?t:k.jsx("div",{className:"igocvxxm",children:k.jsx(b("WIGTextPairing.react"),{level:4,headline:k.jsx("div",{id:u,children:k.jsx(b("WIGText.react"),{numberOfLines:1,color:p?"highlight":"secondary",type:"meta4",children:k.jsx(i,{time:v,title:(e=b("MercuryTimestamp").getAbsoluteTimestamp(v))!=null?e:void 0,text:b("MercuryTimestamp").getRelativeTimestamp(v)})})}),body:t})})})}e.exports=a},null);
__d("WorkGalahadChatChannelItemOverflowMenu.react",["ix","fbt","requireDeferred","React","WIGDeferredPopoverTrigger.react","WIGIcon.react","WIGInteractiveElementContext.react","WIGPressable.react","WorkGalahadChannelFocusableTable.react","fbicon","stylex","useHoverAndFocusState"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("React");var j=c.useContext,k=c.useState,l=b("WorkGalahadChannelFocusableTable.react").WorkGalahadChannelFocusableTableCell,m=b("requireDeferred")("WorkGalahadChatChannelOverflowMenu.react"),n={actions:{opacity:"fchkd3bi",position:"i8ovu4tj",start:"akkqc5af",overflowX:"ib0kwflm",overflowY:"qbbcxcfp",display:"mu99tzkh",alignItems:"t36ehdhz"},actionsVisible:{opacity:"pt8wzkwh",position:"hal92y33",start:"sywbe9g9"}};function a(a){a=a.thread;var c=j(b("WIGInteractiveElementContext.react")),d=c.focused,e=c.hovered;c=b("useHoverAndFocusState")();var f=c.focused,o=c.hovered,p=c.onFocusIn,q=c.onFocusOut,r=c.onHoverIn,s=c.onHoverOut;c=k(!1);var t=c[0],u=c[1],v=h._("Button to open the chat overflow menu");c=h._("Chat overflow menu");return i.jsx(b("WIGDeferredPopoverTrigger.react"),{align:"start",fallback:null,popoverProps:{thread:a,menuLabel:c},popoverResource:m,popoverType:"menu",onVisibilityChange:function(a){u(a)},children:function(a,c){return i.jsx(l,{children:i.jsx("div",{role:"gridcell",children:i.jsx(b("WIGPressable.react"),{"aria-expanded":t,"aria-haspopup":"menu","aria-label":v,display:"block",onFocusIn:p,onFocusOut:q,onHoverIn:r,onHoverOut:s,onPress:c,overlayDisabled:!0,ref:a,xstyle:[n.actions,(e||d||o||f||t)&&n.actionsVisible],children:i.jsx(b("WIGIcon.react"),{icon:b("fbicon")._(g("484386"),16),color:o?"primary":"secondary"})})})})}})}e.exports=a},null);
__d("WorkGalahadChatChannelItemUnpinAction.react",["ix","fbt","React","WIGCircleButton.react","WIGTooltip.react","WorkGalahadChannelFocusableTable.react","fbicon","useHoverAndFocusState"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("WorkGalahadChannelFocusableTable.react").WorkGalahadChannelFocusableTableCell;function a(a){var c=a.thread,d=a.onUnpin;a=b("useHoverAndFocusState")();var e=a.onFocusIn,f=a.onFocusOut,k=a.onHoverIn;a=a.onHoverOut;var l=h._("Remove {group_name} from pinned threads",[h._param("group_name",c.name)]);return i.jsx(j,{children:i.jsx("div",{role:"gridcell",children:i.jsx(b("WIGTooltip.react"),{tooltip:l,children:i.jsx(b("WIGCircleButton.react"),{icon:b("fbicon")._(g("478231"),12),label:l,size:24,onFocusIn:e,onFocusOut:f,onHoverIn:k,onHoverOut:a,onPress:function(){return d&&d(c.thread_id)}})})})})}e.exports=a},null);
__d("WorkGalahadChatPresenceBadge.react",["React","WorkGalahadActiveBadge.react","WorkGalahadDNDBadge.react"],function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.isDoNotDisturb,d=a.isPresenceForWork,e=a.size;a=a.xstyle;if(c)return g.jsx(b("WorkGalahadDNDBadge.react"),{xstyle:a,size:e});else if(d)return g.jsx(b("WorkGalahadActiveBadge.react"),{xstyle:a,size:e});return null}e.exports=a},null);
__d("WorkGalahadChatChannelItemContainer.react",["Arbiter","AvailableListConstants","Bootloader","CurrentUser","FBEmojiUtils","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MessengerParticipants.re","MessengerSurfaceQuickChat.re","MessengerThreadImageReact.re","MessengerURIUtils.re","PresenceStatus","React","TextWithEmoticons.react","URI","WorkGalahadChatChannelItem.react","WorkGalahadChatChannelItemOverflowMenu.react","WorkGalahadChatChannelItemUnpinAction.react","WorkGalahadChatPresenceBadge.react","WorkGalahadGroupEmojiConsts","gkx","guid","immutable","isClickWithModifierKey","stylex"],function(a,b,c,d,e,f){"use strict";var g,h,i=b("FBEmojiUtils").codepointsToString,j=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,k=b("MessengerThreadImageReact.re").jsComponent,l=b("React");c=b("React");var m=c.useCallback,n=c.useEffect,o=c.useMemo,p=c.useRef,q=c.useState,r=b("WorkGalahadGroupEmojiConsts").DEFAULT_EMOJI_CODEPOINT,s=function(a){return!b("CurrentUser").isWorkUser()?!1:b("immutable").Seq(a).some(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a.toString());return a!==b("CurrentUser").getID()&&b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE})};function t(a){var c;c=(c=(c=a.work_associated_group)==null?void 0:(c=c.group_icon)==null?void 0:c.emoji_codepoints)!=null?c:[];var d="";b("gkx")("1100710")&&(c.length>0?d=i([].concat(c)):a.work_associated_group!=null&&(d=i([r])));return d}var u={imageContainer:{position:"hal92y33",marginTop:"prqhm3cj",marginBottom:"pc5scjqj"},badge:{position:"i8ovu4tj",bottom:"ffz91f1d",end:"r763lkm8",borderTopStartRadius:"ca7wv602",borderTopEndRadius:"h0kdcpyw",borderBottomEndRadius:"n8hpqju9",borderBottomStartRadius:"sxrq2e8f",marginTop:"prqhm3cj",marginEnd:"od72kdex",marginBottom:"pc5scjqj",marginStart:"piex8o3r",backgroundColor:"gp5lzjy8"},emojiBadge:{bottom:"ffz91f1d",end:"kx8kk89m"}};function a(a){var c=a.handleSelect,d=a.isActive,e=a.isCompact,f=a.isEditingPinnedThreads,i=a.onUnpinThread,r=a.thread,v=a.viewer;a=j();var w=p(null),x=q(b("immutable").Map()),y=x[0],z=x[1];x=q(!1);var A=x[0],B=x[1];x=q(function(){return s(r.participants)});var C=x[0],D=x[1],E=r.is_canonical_user?r.other_user_fbid:null,F=o(function(){return{guid:b("guid")()}},[]);n(function(){if(E==null)return;var a;b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(b){b.fetchUsersIfNeeded([E]),b.subscribeUser(E,F),B(b.getIsDoNotDisturb(E)),a=b.addListener(function(){var a=r.is_canonical_user?r.other_user_fbid:null;a!=null&&B(b.getIsDoNotDisturb(a))})},"WorkGalahadChatChannelItemContainer.react");return function(){return a&&a.remove()}},[F,E,r.is_canonical_user,r.other_user_fbid]);n(function(){var a=b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(){D(s(y))});return b("Arbiter").unsubscribe(a)},[y,E]);n(function(){w.current&&b("MessengerParticipants.re").removeCallback(w.current);var c=b("MessengerParticipants.re").getMultiEagerMap(r.participants,function(a){w.current=null,z(a)}),a=c[0];c=c[1];w.current=c;z(a);return function(){w.current&&b("MessengerParticipants.re").removeCallback(w.current)}},[r.participants]);x=b("MercuryThreadInfo").isMuted(r);var G=r.unread_count>0,H=new(g||(g=b("URI")))(window.location.href).getQueryData();H=b("MessengerURIUtils.re").getURIForThreadID(r.thread_id).setQueryData(H.qa!=null?{qa:H.qa}:void 0).toString();var I=m(function(a){b("isClickWithModifierKey")(a)||c(r)},[c,r]),J=m(function(a){G?b("MercuryThreadActions").getForFBID(v).markRead(r.thread_id):b("MercuryThreadActions").getForFBID(v).markUnread(r.thread_id)},[G,r.thread_id,v]);a=a?null:l.jsx(b("WorkGalahadChatChannelItemOverflowMenu.react"),{thread:r});var K=l.jsx(b("WorkGalahadChatChannelItemUnpinAction.react"),{thread:r,onUnpin:function(a){return i&&i(a)}}),L=t(r);L=L!==""?l.jsxs("div",{className:(h||(h=b("stylex")))(u.imageContainer),children:[l.jsx(b("TextWithEmoticons.react"),{size:24,text:L}),l.jsx(b("WorkGalahadChatPresenceBadge.react"),{isPresenceForWork:C,isDoNotDisturb:A,size:e?"small":"medium",xstyle:[u.badge,u.emojiBadge]})]}):l.jsxs("div",{className:(h||(h=b("stylex")))(u.imageContainer),children:[l.jsx(k,{participants:y,size:e?24:48,thread:r,viewer:v}),l.jsx(b("WorkGalahadChatPresenceBadge.react"),{isPresenceForWork:C,isDoNotDisturb:A,size:e?"small":"medium",xstyle:u.badge})]});C=l.jsx(b("MercuryThreadSnippet.react"),{participants:y,shouldRenderYou:!0,thread:r,viewer:v});A=l.jsx(b("MercuryThreadTitleSafe.react"),{showUnreadCount:!1,thread:r,useShortName:!1,viewer:v});return l.jsx(b("WorkGalahadChatChannelItem.react"),{href:H,image:L,isActive:d,isCompact:e,isMuted:x,isPinned:r.is_pinned,isTeamworkPrototype:b("gkx")("1289810"),isUnread:G,isEditingPinnedThreads:f,onPress:I,overflowMenu:a,unpinAction:K,snippet:C,timestamp:r.timestamp,title:A,toggleReadStatus:J})}e.exports=l.memo(a)},null);
__d("WorkGalahadThreadlist.react",["React","WorkGalahadChatChannelItemContainer.react"],function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.activeThreadID,d=a.handleSelect,e=a.isDenseMode,f=a.threads,h=a.viewer;return f.map(function(a){return g.jsx(b("WorkGalahadChatChannelItemContainer.react"),{isActive:c===a.thread_id,thread:a,viewer:h,isCompact:e,handleSelect:d},a.thread_id)})}e.exports=a},null);
__d("WorkGalahadThreadlistSearchEntry.react",["requireCond","CurrentUser","MessengerTextWithEntities.react","MessengerThreadImageReact.re","React","WIGProfilePhoto.react","cr:1354706","WorkGalahadUIChannelItem.react","react"],function(a,b,c,d,e,f){"use strict";var g,h=b("MessengerThreadImageReact.re").jsComponent,i=b("React");c=g||(g=b("react"));var j=c.useEffect,k=c.useRef;function a(a){var c=a.entry,d=a.handleSelect,e=a.selected;a=a.handlePressIn;var f=k(null),g=c.getAuxiliaryData(),l=g.participantsToRender;g=g.thread;j(function(){e&&f.current&&f.current.scrollIntoView(!1)},[e]);var m;g&&l?m=i.jsx(h,{isPresenceForWork:!1,isDoNotDisturb:!1,participants:l,size:32,thread:g,viewer:b("CurrentUser").getID()}):c.getPhoto()&&(m=i.jsx(b("WIGProfilePhoto.react"),{shape:"circle",size:32,source:{uri:c.getPhoto()}}));l=c.getSubtitle();g=b("cr:1354706")!=null&&c.getType()==="fb4c"?i.jsx(b("cr:1354706"),{badgeType:{type:"user_status",userID:c.getUniqueID()},title:c.getTitle()}):i.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.getTitle()});return i.jsx(b("WorkGalahadUIChannelItem.react"),{ref:f,isSemanticListItem:!1,headline:g,onPress:d,onPressIn:a,headlineLineLimit:1,meta:l&&l.length>0?l:void 0,metaLineLimit:1,selected:e,addOnPrimary:m})}e.exports=a},null);
__d("WorkGalahadThreadlistSearchMessagesItem.react",["ix","fbt","MessengerSearchActions","React","WIGIcon.react","WorkGalahadUIChannelItem.react","fbicon"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.queryString;a=a.selected;return i.jsx(b("WorkGalahadUIChannelItem.react"),{addOnPrimary:i.jsx(b("WIGIcon.react"),{icon:b("fbicon")._(g("491282"),16)}),headline:h._("Search Messages for \"{queryString}\"",[h._param("queryString",c)]),headlineLineLimit:1,onPress:function(){b("MessengerSearchActions").changeQueryAll(c),b("MessengerSearchActions").enterMessageSearch()},isSemanticListItem:!1,selected:a})}e.exports=a},null);
__d("WorkGalahadThreadlistTypeaheadInput.react",["ix","fbt","CometKeys","MessengerSurfaceQuickChat.re","React","WIGIcon.react","WIGRoundedTextInput.react","fbicon","stylex","useLayerKeyCommands"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,j=b("React");c=b("React");var k=c.useRef;function a(a){var c=a.activeDecendantID,d=a.focused,e=a.onBlur,f=a.onChangeValue,l=a.onFocus,m=a.onKeyDown,n=a.queryString,o=a.shouldRegisterShortcuts;a=a.typeaheadListID;var p=i(),q=h._("Search Workplace Chat"),r=k(null);b("useLayerKeyCommands")(o?[{command:{key:b("CometKeys").K,command:!0},description:h._("Focus chat search"),handler:function(){r.current&&r.current.focus()},triggerFromInputs:!0}]:[]);return j.jsx("div",{"aria-label":h._("Chat"),role:"search",className:"lenub8rc",children:j.jsx("div",{role:"combobox","aria-controls":a,"aria-expanded":d?"true":"false","aria-owns":a,"aria-haspopup":"listbox",className:p?"":"hal92y33",children:j.jsx(b("WIGRoundedTextInput.react"),{"aria-activedescendant":c,"aria-autocomplete":"list","aria-label":q,autoComplete:"off",icon:j.jsx(b("WIGIcon.react"),{icon:b("fbicon")._(g("491285"),16)}),label:h._("Search"),onBlur:e,onChange:function(a){f(a.target.value)},onFocus:l,onKeyDown:m,placeholder:q,ref:r,spellCheck:!1,type:"text",value:d||!p?n:""})})})}e.exports=a},null);
__d("WorkGalahadThreadlistTypeaheadSections",["fbt"],function(a,b,c,d,e,f,g){"use strict";a=["search","friend","fb4c","message","thread","page","non_friend","meeting_room_page","internal_bot_page"];c=(b={},b.search="",b.friend=g._("Contacts"),b.fb4c=g._("Coworkers"),b.message=g._("Messages"),b.thread=g._("Group Conversations"),b.page=g._("Businesses"),b.meeting_room_page=g._("Meeting Rooms"),b.internal_bot_page=g._("Bots"),b.non_friend=g._("More People"),b);e.exports={SECTION_ORDER:a,SECTION_TITLE_MAP:c}},null);
__d("useWorkGalahadThreadlistTypeaheadState",["MercuryConfig","MessengerSearchWebGraphQLFetcher","MessengerTypeaheadLocalCache","MessengerTypeaheadUtils","MessengerUniversalSearchFunnelLoggerConstants","React","requestAnimationFrame"],function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useEffect,i=c.useState,j=100,k=10,l=50,m={queryCompleteStatus:{userGroupQueryFinished:!1,pagesQueryFinished:!1},serverResults:[],localEntries:[]},n=["groups","pages","messages","users"];function a(a){var c=i(m),d=c[0],e=c[1],f=g(function(a){var c=!1,f=new(b("MessengerSearchWebGraphQLFetcher"))(function(){return a},b("MessengerUniversalSearchFunnelLoggerConstants").TYPE),g=function(a){var e={userLimit:k,messageLimit:3,groupLimit:b("MercuryConfig").MaxThreadResults,pageLimit:5,getQueryString:function(){return a},canViewerSendMoneyFilter:!1,localEntryIDs:d.localEntries.filter(function(a){return a.getType()!=="search"}).map(function(a){return a.getUniqueID()}),threadFBID:null,shouldQueryInternalBot:!0,shouldQueryVCEndpoint:!0};f.fetchEntries(a,n,e,h,i);return{cancel:function(){c=!0}}},h=function(a,d){b("requestAnimationFrame")(function(){if(c)return;e(function(b){return babelHelpers["extends"]({},b,{serverResults:b.serverResults.concat(a),queryCompleteStatus:{userGroupQueryFinished:!0,pagesQueryFinished:!0}})})})},i=function(a,d){b("requestAnimationFrame")(function(){if(c)return;e(function(a){return babelHelpers["extends"]({},a,{queryCompleteStatus:babelHelpers["extends"]({},a.queryCompleteStatus,(a={},a[d]=!0,a))})})})};return g(a)},[]);h(function(){var c=!1,d=null;a==null||a==""?b("MessengerTypeaheadLocalCache").onEntriesLoaded(function(a,d,f){b("requestAnimationFrame")(function(){if(c)return;var b=a.slice(0,l).concat(d);e(function(a){return babelHelpers["extends"]({},a,{localEntries:b,serverResults:[]})})})}):(e(function(a){return babelHelpers["extends"]({},a,{queryCompleteStatus:{userGroupQueryFinished:!1,pagesQueryFinished:!1},serverResults:[]})}),b("MessengerTypeaheadLocalCache").search(a,function(d,a){b("requestAnimationFrame")(function(){if(c)return;var f=b("MessengerTypeaheadUtils").sortEntries(d,a).slice(0,j);e(function(a){return babelHelpers["extends"]({},a,{localEntries:f})})})}),a.length>=2&&(d=f(a)));return function(){c=!0,d&&d.cancel()}},[f,a]);return d}e.exports=a},null);
__d("WorkGalahadThreadlistTypeahead.react",["fbt","Bootloader","CurrentUser","React","MercuryThreadIDMap","MercuryVanityIDMap.re","MercuryIDs","MessengerSearchActions","MessengerActions","MessengerView","MessengerState.re","MessengerTypeaheadUtils","MNPlatformTagsDataManager","WIGProgressIndicator.react","WIGText.react","WorkChatSearchFunnelLoggerConstants","WorkGalahadCancelButton.react","WorkGalahadQuickChatActions","WorkGalahadTabContext.react","WorkGalahadThreadlistSearchEntry.react","WorkGalahadThreadlistTypeaheadInput.react","WorkGalahadThreadlistSearchMessagesItem.react","MessengerSurfaceQuickChat.re","WorkGalahadThreadlistTypeaheadSections","Keys","WorkGalahadUIChannelScrollableArea.react","XCometWorkChatControllerRouteBuilder","gkx","guid","qex","stylex","testID","useCometRouterDispatcher","useWorkGalahadThreadlistTypeaheadState","setTimeout"],function(a,b,c,d,e,f,g){"use strict";var h;c=b("React");var i=c.useMemo,j=b("MercuryThreadIDMap").get(),k=b("React");d=b("React");var l=d.useEffect,m=d.useState,n=d.useCallback,o=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,p=b("WorkGalahadThreadlistTypeaheadSections").SECTION_ORDER,q=b("WorkGalahadThreadlistTypeaheadSections").SECTION_TITLE_MAP,r={container:{display:"mu99tzkh",flexDirection:"tv52aht6",flexShrink:"o0foh442"},containerWithResults:{height:"cfk3jyev"},progressIndicatorContainer:{display:"mu99tzkh",justifyContent:"lhmcu1i6",alignItems:"t36ehdhz",marginTop:"coddz0gm",marginEnd:"dftilaiu",marginBottom:"n2n96j1t",marginStart:"t4leol01"},search:{display:"mu99tzkh",flexDirection:"sulwup3a",marginBottom:"n2n96j1t",paddingEnd:"g1w82w5r",paddingStart:"bpabuz4s"},sectionHeader:{display:"mu99tzkh",alignItems:"t36ehdhz",backgroundColor:"ek0il437",paddingStart:"dxs9yoch",paddingTop:"s1elwqq6",paddingBottom:"pl80guhh"},noResults:{display:"mu99tzkh",alignItems:"t36ehdhz",justifyContent:"lhmcu1i6",paddingTop:"s1elwqq6",paddingBottom:"pl80guhh"},displayNone:{display:"kneyo41z"},visible:{display:"mu99tzkh",flexDirection:"tv52aht6",overflowY:"qbbcxcfp"},row:{display:"mu99tzkh",flexDirection:"sulwup3a",alignItems:"t36ehdhz",paddingTop:"h2wm4ntq",paddingEnd:"g1w82w5r",paddingBottom:"ncqxdsof",paddingStart:"bpabuz4s"},quickChatRow:{paddingTop:"s9o98cno",paddingBottom:"sgyxnsb9",paddingStart:"hmw2pi96",paddingEnd:"ffozemys"},quickChatSearch:{paddingBottom:"pl80guhh",paddingTop:"s1elwqq6",paddingStart:"bpabuz4s",paddingEnd:"g1w82w5r"}},s=8,t=100;function a(a){var c=a.isSearchFocused,d=a.isSearching,e=a.queryString,f=a.setIsSearchFocused,j=a.setQueryString,p=a.shouldRegisterShortcuts,q=a.useMessageSearch,s=a.workChatSearchFunnelState,t=o();a=m(0);var v=a[0],w=a[1];a=b("useWorkGalahadThreadlistTypeaheadState")(e);var y=a.queryCompleteStatus.userGroupQueryFinished||a.queryCompleteStatus.pagesQueryFinished;a=u(a,e);var z=b("useCometRouterDispatcher")(),A=x({queryString:e,finishedLoading:y,entries:a,setQueryString:j,useMessageSearch:q,isQuickChat:t,dispatcher:b("gkx")("1217157")?z:null,workChatSearchFunnelState:s});l(function(){v>A.length&&w(A.length-1)},[A,v]);l(function(){e.length===0&&w(0)},[e]);var B=n(function(){f(!1),j(""),b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)},[f,j]);a=n(function(a){if(a.keyCode===b("Keys").TAB)j(""),f(!1);else if(a.keyCode===b("Keys").RETURN){var c;a.preventDefault();(c=A[v])==null?void 0:c.handleSelect();j("")}else a.keyCode===b("Keys").DOWN?(a.preventDefault(),w(function(a){return a+1>=A.length?A.length-1:a+1})):a.keyCode===b("Keys").UP?(a.preventDefault(),w(function(a){return a-1<=0?0:a-1})):a.keyCode===b("Keys").ESC&&B();return},[j,f,A,v,B]);q=i(function(){return b("guid")()},[]);z=t||!Boolean(b("qex")._("1293601"));return k.jsxs("div",{className:(h||(h=b("stylex")))(r.container,c&&!d&&r.containerWithResults),children:[k.jsx("div",{className:(h(t?r.quickChatRow:r.row),!z&&r.displayNone),children:k.jsxs("div",{className:h(t?r.quickChatSearch:r.search,!z&&r.displayNone),children:[z&&k.jsx(b("WorkGalahadThreadlistTypeaheadInput.react"),{onChangeValue:function(a){j(a)},onKeyDown:a,onFocus:function(){f(!0),s!=null&&(s.setInstanceID(Math.floor(Math.random()*65536)),b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(a){a.logFunnelStart(b("WorkChatSearchFunnelLoggerConstants").SURFACES.WWW,b("WorkChatSearchFunnelLoggerConstants").NAME,s)},"WorkGalahadThreadlistTypeahead.react"))},onBlur:function(a){var c=e;t&&j("");f(!1);b("setTimeout")(function(){s!=null&&!s.getIsClicked()&&b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(a){a.logFunnelEnd(b("WorkChatSearchFunnelLoggerConstants").END_STATE.ABANDON,c)},"WorkGalahadThreadlistTypeahead.react"),s==null?void 0:s.setIsClicked(!1)},3e3)},focused:c,typeaheadListID:q,activeDecendantID:(z=A[v])==null?void 0:z.id,shouldRegisterShortcuts:p,queryString:e}),!t&&d&&k.jsx(b("WorkGalahadCancelButton.react"),{xstyle:{},onReset:B})]})}),k.jsx("div",{className:h(c&&!d?r.visible:r.displayNone),children:k.jsx(b("WorkGalahadTabContext.react").Provider,{value:{show_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:!0},children:k.jsxs(b("WorkGalahadUIChannelScrollableArea.react"),{children:[k.jsx("ul",{"aria-label":g._("Search Workchat"),id:q,role:"listbox",children:A.map(function(a,b){var c=a.elementCallback,d=a.headerCallback;a=a.id;b=v===b;return k.jsxs(k.Fragment,{children:[d&&d(),k.jsx("li",{id:a,role:"option","aria-selected":b,children:c(b)})]},a)})}),e.length>=2&&!y?k.jsx("div",{className:(h||(h=b("stylex")))(r.progressIndicatorContainer),children:k.jsx(b("WIGProgressIndicator.react"),{})}):null]})})})]})}function u(a,c){var d=c===""?a.localEntries:a.localEntries.slice(0,s),e=d.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b.getUniqueID()]=!0,a))},{});a=a.serverResults.filter(function(a){if(!a)return!1;var b=e[a.getUniqueID()];e[a.getUniqueID()]=!0;return!b});a=b("MessengerTypeaheadUtils").sortEntries(a,c);return d.concat(a).slice(0,t)}var v=function(a,c,d,e){var f=a.getUniqueID();f=b("MercuryIDs").isValidThreadID(f)?b("MercuryIDs").tokenize(f).value:f;var g=a.getAuxiliaryData().alias;if(g!=null&&g!==""){var h=b("MercuryIDs").getParticipantIDFromUserID(f);b("MercuryVanityIDMap.re").set(g,h)}b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread("source:messenger:web_search",f);a.getType()==="thread"||a.getAuxiliaryData().messageResultType==="groupConversation"?j.getClientIDFromServerID(f,function(a){d?b("WorkGalahadQuickChatActions").openThreadID(a):b("MessengerActions").selectThread(a,"thread")}):b("MessengerState.re").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(f),function(c){d?b("WorkGalahadQuickChatActions").openThreadID(c.thread_id):e&&!(a.getType()==="meeting_room_page")&&c.thread_fbid!=null?e.go(b("XCometWorkChatControllerRouteBuilder").buildURL({thread_key:c.thread_fbid}),{}):b("MessengerActions").selectThread(c.thread_id,a.getType())});c("")},w=function(a,c,d,e){e!=null&&(e.setIsClicked(!0),b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(e){e.logImpressionClicked(a,c.getUniqueID(),c.getTitle(),c.getType(),b("WorkChatSearchFunnelLoggerConstants").SOURCES.BACKEND,d)},"WorkGalahadThreadlistTypeahead.react"),b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(c){c.logFunnelEnd(b("WorkChatSearchFunnelLoggerConstants").END_STATE.CLICK,a)},"WorkGalahadThreadlistTypeahead.react"))};function x(a){var c=a.entries,d=a.finishedLoading,e=a.queryString,f=a.setQueryString,i=a.useMessageSearch,j=a.isQuickChat,l=a.dispatcher,m=a.workChatSearchFunnelState;a=p.reduce(function(a,b){var c;return babelHelpers["extends"]((c={},c[b]={entries:[]},c),a)},{});var n=c.reduce(function(a,b){a[b.getType()].entries.push(b);return a},a);a={headerCallback:null,elementCallback:function(a){return k.jsxs(k.Fragment,{children:[k.jsx(b("WorkGalahadThreadlistSearchMessagesItem.react"),{selected:a,queryString:e}),d&&c.length===0?k.jsx("div",{className:(h||(h=b("stylex")))(r.noResults),children:k.jsx(b("WIGText.react"),{type:"body3",color:"secondary",children:g._("No results")})}):null]})},id:"workchat-search-messages",handleSelect:function(){b("MessengerSearchActions").changeQueryAll(e),b("MessengerSearchActions").enterMessageSearch()}};var o=Object.keys(n).reduce(function(a,c){return[].concat(n[c].entries.map(function(a,d){var g=function(){w(e,a,d,m)},i=function(){v(a,f,j,l),w(e,a,d,m)},n=q[c];return{headerCallback:d===0?function(){return k.jsx("div",babelHelpers["extends"]({className:(h||(h=b("stylex")))(r.sectionHeader)},b("testID")("work-galahad-threadlist-typeahead-group-header"),{children:k.jsx(b("WIGText.react"),{type:"body3",color:"secondary",isSemanticHeading:!0,children:n})}))}:null,elementCallback:function(c){return k.jsx(b("WorkGalahadThreadlistSearchEntry.react"),{selected:c,entry:a,handleSelect:i,handlePressIn:g})},id:(j?"quickchat":"mainchat")+"-"+a.getUniqueID(),handleSelect:i}}),a)},[]);return[].concat(i&&e.length>0?[a]:[],o)}e.exports=k.memo(a)},null);
__d("WorkGalahadChatSearchMessagesThreadResultsContainer.react",["fbt","JSResource","MercuryFilters.bs","MessagingTag","MessengerActions","MessengerSurfaceQuickChat.re","MessengerThreadSearchActions","MessengerThreadSearchStore","React","WIGPressable.react","WIGText.react","WorkGalahadChannelItemChromeList.react","WorkGalahadNavList.react","WorkGalahadTabContext.react","WorkGalahadThreadlist.react","WorkGalahadThreadlistTypeahead.react","lazyLoadComponent","stylex"],function(a,b,c,d,e,f,g){"use strict";var h,i=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,j=b("React");c=b("React");var k=c.useContext,l=c.useEffect,m=c.useState,n=b("lazyLoadComponent")(b("JSResource")("WorkGalahadThreadlistEmpty.react").__setRef("WorkGalahadChatSearchMessagesThreadResultsContainer.react")),o={loadMore:{display:"mu99tzkh",justifyContent:"lhmcu1i6",alignItems:"t36ehdhz",width:"lenub8rc",paddingTop:"h2wm4ntq",paddingEnd:"g1w82w5r",paddingBottom:"ncqxdsof",paddingStart:"bpabuz4s"},noResults:{marginTop:"coddz0gm",display:"mu99tzkh",justifyContent:"lhmcu1i6",alignItems:"t36ehdhz",width:"lenub8rc"},list:{marginBottom:"jgcuv4po"}};function a(a){var c=a.activeThreadID,d=a.filter,e=a.folder,f=a.isDenseMode,p=a.queryString,q=a.searchInputPortalRef,r=a.setIsSearchFocused,s=a.setQueryString,t=a.viewer,u=a.useMessageSearch;a=a.shouldRegisterShortcuts;var v=k(b("WorkGalahadTabContext.react"));v=v.show_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;i();var w=m(function(){return{loading:!0,threads:[],threadsExhausted:!1}}),x=w[0],y=w[1];l(function(){var a=function(){var a=b("MessengerThreadSearchStore").getState();y({loading:a.loading,threads:a.threads||[],threadsExhausted:a.threadsExhausted});p===""&&a.query!=null&&s(a.query)},c=b("MessengerThreadSearchStore").addListener("change",function(){a()});a();return function(){return c.remove()}},[s]);w=!x.loading&&!!x.threads;var z=x.threads.length>0;return j.jsxs(j.Fragment,{children:[v&&j.jsx(b("WorkGalahadThreadlistTypeahead.react"),{queryString:p,setQueryString:s,viewer:t,isSearching:!0,searchInputPortalRef:q,isSearchFocused:!1,setIsSearchFocused:r,useMessageSearch:u,shouldRegisterShortcuts:a}),j.jsxs(b("WorkGalahadNavList.react"),{"aria-label":g._("Thread list result"),wrapXToNextLine:!0,wrapY:!1,xstyle:o.list,children:[z&&j.jsx(b("WorkGalahadThreadlist.react"),{activeThreadID:c,isDenseMode:f,threads:x.threads,viewer:t,handleSelect:function(a){b("MessengerActions").selectThread(a.thread_id,"thread")}}),x.threads.length===0&&w?j.jsx(n,{folder:e,filter:d}):null]}),x.loading&&j.jsx(b("WorkGalahadChannelItemChromeList.react"),{amount:3,type:"chats"}),z&&!x.loading&&x.threadsExhausted==null&&j.jsx(b("WIGPressable.react"),{display:"block",xstyle:o.loadMore,onPress:b("MessengerThreadSearchActions").loadMoreThreads,children:j.jsx(b("WIGText.react"),{color:"highlight",type:"body3",children:g._("Load more")})}),w&&!z&&j.jsx("div",{className:(h||(h=b("stylex")))(o.noResults),children:j.jsx(b("WIGText.react"),{color:"secondary",type:"body3",children:g._("No messages found")})})]})}e.exports=a},null);
__d("WorkGalahadPinnedThreadlist.react",["MercuryIDs","React","WorkGalahadChatChannelItemContainer.react","WorkGalahadChatPinnedThreadsInlineEditor.react","immutable","stylex"],function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.activeThreadID,d=a.isDenseMode,e=a.pinnedThreads,f=a.isEditingPinnedThreads,i=a.isTeamworkprototype,j=a.onReorderPinnedThreads,k=a.onUnpinThread,l=a.viewer,m=a.handleSelect;i=(a=i)!=null?a:!1;return g.jsxs(g.Fragment,{children:[f?g.jsx(h,{pinnedThreads:e,activeThreadID:c,viewer:l,isDenseMode:d,onReorderPinnedThreads:j,onUnpinThread:k,handleSelect:m}):e.map(function(a){return!a?null:g.jsx(b("WorkGalahadChatChannelItemContainer.react"),{isActive:c===a.thread_id,thread:a,viewer:l,isCompact:d,handleSelect:m},a.thread_id)}),!i&&g.jsx("div",{className:"jexw0e2w jfygwcsh dpt5d2td hc7zxdzg oypfxdan pbvk33mw"})]})}function h(a){var c=a.pinnedThreads,d=a.activeThreadID,e=a.viewer,f=a.isDenseMode,h=a.onReorderPinnedThreads,i=a.onUnpinThread,j=a.handleSelect;a=c.filter(Boolean).map(function(a){return[""+b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),g.jsx(b("WorkGalahadChatChannelItemContainer.react"),{isActive:d===a.thread_id,thread:a,viewer:e,isCompact:f,isEditingPinnedThreads:!0,onUnpinThread:i,handleSelect:j},a.thread_id)]});a=b("immutable").Map(a);c=b("immutable").List(c.map(function(a){return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)}));return g.jsx(b("WorkGalahadChatPinnedThreadsInlineEditor.react"),{ids:c,renderedItemsByID:a,itemSize:f?"small":"medium",onChange:h})}e.exports=a},null);
__d("WorkGalahadPinnedThreadlistHeader.react",["fbt","React","WorkGalahadNavHeaderPressableAction.react","WorkGalahadNavTextHeader.react","gkx","stylex"],function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i={teamworkThreadlistHeader:{marginTop:"eg4y5syv",marginBottom:"tgxds0u3"}};function a(a){var c=a.isQuickChat,d=a.isEditingPinnedThreads,e=a.isTeamworkprototype,f=a.onSavePinnedThreadsEdits,j=a.onEnableEditingPinnedThreads;e=(a=e)!=null?a:!1;return b("gkx")("932014")&&!c?h.jsx(b("WorkGalahadNavTextHeader.react"),{title:g._("Pinned"),xstyle:e&&i.teamworkThreadlistHeader,subtitle:d?g._("Drag to reorder"):void 0,action:h.jsx(b("WorkGalahadNavHeaderPressableAction.react"),{title:d?g._("Save"):g._("Edit"),onClick:function(){return d?f&&f():j&&j()}})}):null}e.exports=a},null);
__d("WorkGalahadPinnedThreadsActionTypes",["keyMirror"],function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_PINNED_THREADS_EDITS:null,ENABLE_EDITING_PINNED_THREADS:null,SET_PINNED_THREADS:null,REORDER_PINNED_THREADS:null,UNPIN_THREAD:null});e.exports=a},null);
__d("useWorkGalahadPinnedThreads",["CurrentUser","MercuryIDs","MercuryThreadActions","React","WorkGalahadPinnedThreadsActionTypes"],function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useEffect,i=c.useReducer,j=c.useRef,k=function(a,b){b=b!=null&&a.thread_id!=null?b[a.thread_id]:null;a=a.thread_pin_timestamp;if(a!=null)if(b!=null)return b>a?b:a;else return a;else if(b!=null)return b;else return 0};function l(a,c){a=a.slice();a.sort(function(a,b){return k(a,c)-k(b,c)});return a.map(function(a){return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)})}function m(a,c){var d=new Map();for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;d.set(b("MercuryIDs").getThreadFBIDFromThreadID(g.thread_id),g)}g=c.map(function(a){return d.get(a)});f=Date.now();e={};for(var a=g,c=Array.isArray(a),g=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(c){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;h!=null&&(f++,e[h.thread_id]=f)}return e}function n(a,c){switch(c.type){case b("WorkGalahadPinnedThreadsActionTypes").SAVE_PINNED_THREADS_EDITS:return babelHelpers["extends"]({},a,{isEditingPinnedThreads:!1});case b("WorkGalahadPinnedThreadsActionTypes").ENABLE_EDITING_PINNED_THREADS:var d=l(a.pinnedThreads,a.pinnedThreadsNewOrderTs);d=m(a.pinnedThreads,d);return babelHelpers["extends"]({},a,{isEditingPinnedThreads:!0,pinnedThreadsNewOrderTs:d});case b("WorkGalahadPinnedThreadsActionTypes").SET_PINNED_THREADS:if(c.pinnedThreads===a.pinnedThreads||c.pinnedThreads.length===0&&a.pinnedThreads.length===0)return a;d=c.pinnedThreads.slice();d.sort(function(b,c){return k(b,a.pinnedThreadsNewOrderTs)-k(c,a.pinnedThreadsNewOrderTs)});return babelHelpers["extends"]({},a,{pinnedThreads:d});case b("WorkGalahadPinnedThreadsActionTypes").REORDER_PINNED_THREADS:var e=m(a.pinnedThreads,c.newSortedIds);d=a.pinnedThreads.slice();d.sort(function(a,b){return k(a,e)-k(b,e)});return babelHelpers["extends"]({},a,{pinnedThreadsNewOrderTs:e,pinnedThreads:d});case b("WorkGalahadPinnedThreadsActionTypes").UNPIN_THREAD:return babelHelpers["extends"]({},a,{pinnedThreads:a.pinnedThreads.filter(function(a){return a.thread_id!==c.threadID})});default:throw new Error("Invalid WorkGalahadPinnedThreadsActionTypes")}}function o(a,c){switch(c.type){case b("WorkGalahadPinnedThreadsActionTypes").SAVE_PINNED_THREADS_EDITS:b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).bulkPinThreadsUpdate(a.pinnedThreads.map(function(a){return a.thread_id}),"INBOX_EDIT_ORDER_SCREEN");return;case b("WorkGalahadPinnedThreadsActionTypes").UNPIN_THREAD:b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unpin(c.threadID,"menu_item_in_thread_row");return;case b("WorkGalahadPinnedThreadsActionTypes").ENABLE_EDITING_PINNED_THREADS:case b("WorkGalahadPinnedThreadsActionTypes").SET_PINNED_THREADS:case b("WorkGalahadPinnedThreadsActionTypes").REORDER_PINNED_THREADS:return;default:throw new Error("Invalid WorkGalahadPinnedThreadsActionTypes")}}var p={pinnedThreads:[],pinnedThreadsNewOrderTs:void 0,isEditingPinnedThreads:!1};function a(){var a=i(n,p),b=a[0],c=a[1],d=j([]);a=g(function(a){c(a),d.current.push(a)},[]);h(function(){while(d.current.length){var a=d.current.shift();o(b,a)}},[b]);return[b,a]}e.exports=a},null);
__d("WorkGalahadThreadlistContainer.react",["fbt","JSResource","MercuryFilters.re","MercuryServerRequests","MessagingTag","MessengerActions","MessengerComposerActions","MessengerState.re","MessengerSurfaceQuickChat.re","MessengerThreadlistMessageRequestsRowReact.re","React","WIGOnVisible.react","WIGScrollableArea.react","WorkchatThreadListInviteRow.react","WorkGalahadChannelItemChromeList.react","WorkGalahadChannelKeyCommands","WorkGalahadChatsThreadlistHeader.react","WorkGalahadNavList.react","WorkGalahadNewMessageRow.react","WorkGalahadPinnedThreadlist.react","WorkGalahadPinnedThreadlistHeader.react","WorkGalahadPinnedThreadsActionTypes","WorkGalahadTabContext.react","WorkGalahadThreadlist.react","WorkGalahadThreadlistTypeahead.react","WorkGalahadUIChannelScrollableArea.react","immutable","lazyLoadComponent","stylex","useWorkGalahadPinnedThreads"],function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface,i=b("MessengerThreadlistMessageRequestsRowReact.re").make,j=b("React");c=b("React");var k=c.useCallback,l=c.useContext,m=c.useEffect,n=c.useMemo,o=c.useState,p=b("WorkGalahadChannelKeyCommands").useChannelKeyCommands,q=b("lazyLoadComponent")(b("JSResource")("WorkGalahadThreadlistEmpty.react").__setRef("WorkGalahadThreadlistContainer.react")),r={list:{marginBottom:"jgcuv4po"}};function s(a,c){c=u(c,b("MessagingTag").PENDING,b("MercuryFilters.re").unread);return((c=c==null?void 0:c.threadlist)!=null?c:[]).map(function(b){return a[b]})}function t(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})}function u(a,b,c){a=a[b];return a?a[c]:null}function v(a,b,c){a=u(a,b,c);return!!(a==null?void 0:a.reachedEnd)}function w(a,b,c,d){if(!c)return null;a=c.filter(function(a){return!((a=d[a])==null?void 0:a.is_pinned)});b=null;a.length>0?b=a[a.length-1]:c.length>0&&(b=c[c.length-1]);if(b==null)return null;a=d[b];return(c=a==null?void 0:a.timestamp)!=null?c:null}var x=0,y=10;function a(a){var c=a.activeThreadID,d=a.filter,e=a.folder,f=a.handleSelect,z=a.isComposing,A=a.isDenseMode,B=a.isSearchFocused,C=a.messengerState,D=a.pendingFolderUnseenCount,E=a.queryString,F=a.setIsSearchFocused,G=a.setQueryString,H=a.source,I=a.viewer,J=a.useMessageSearch,K=a.shouldRegisterShortcuts;a=a.workChatSearchFunnelState;var L=h(),M=l(b("WorkGalahadTabContext.react"));M=M.show_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var N=b("MessengerState.re").threads(C),O=b("MessengerState.re").threadlistOrderMap(C),P=o(!1),Q=P[0],aa=P[1];P=o(b("immutable").Map());var R=P[0],ba=P[1];P=b("useWorkGalahadPinnedThreads")();var S=P[0],T=P[1],U=v(O,e,d);P=u(O,e,d);var V=(P=P==null?void 0:P.threadlist)!=null?P:[],W=B;P=s(N,O);m(function(){(U||V.length>=10)&&aa(!1)},[U,V]);m(function(){var a=[].concat.apply([],V),c=b("MessengerState.re").getMultiThreadMeta(I,a,function(b){ba(function(c){return c.set(e,t(a,b))})}),d=b("MessengerState.re").getPinnedThreadlist(I),f=b("MessengerState.re").getMultiThreadMeta(I,d,function(a){T({type:b("WorkGalahadPinnedThreadsActionTypes").SET_PINNED_THREADS,pinnedThreads:t(d,a)})});return function(){c&&b("MessengerState.re").unsubscribeThread(I,c),f&&b("MessengerState.re").unsubscribeThread(I,f)}},[d,e,O,I,V,C,T]);m(function(){if(v(O,b("MessagingTag").PENDING,b("MercuryFilters.re").unread)||e!==b("MessagingTag").INBOX)return;b("MercuryServerRequests").getForFBID(I).fetchThreadlistInfo(0,y,b("MessagingTag").PENDING,b("MercuryFilters.re").unread,H,null)},[e,H,O,I]);C=function(){if(W||Q||U)return;var a=w(e,d,V,N);b("MercuryServerRequests").getForFBID(I).fetchThreadlistInfo(x,y,e,d===b("MercuryFilters.re").all?null:d,H,a)};var X=(R=R.get(e))!=null?R:[];R=k(function(){T({type:b("WorkGalahadPinnedThreadsActionTypes").SAVE_PINNED_THREADS_EDITS})},[T]);var ca=k(function(){T({type:b("WorkGalahadPinnedThreadsActionTypes").ENABLE_EDITING_PINNED_THREADS})},[T]),da=k(function(a){T({type:b("WorkGalahadPinnedThreadsActionTypes").REORDER_PINNED_THREADS,newSortedIds:a})},[T]),ea=k(function(a){T({type:b("WorkGalahadPinnedThreadsActionTypes").UNPIN_THREAD,threadID:a})},[T]),Y=X.filter(function(a){return a&&!a.is_pinned}),Z=S.pinnedThreads;d===b("MercuryFilters.re").unread&&(Y=Y.filter(function(a){return a.unread_count>0}),Z=Z.filter(function(a){return a.unread_count>0}));var $=n(function(){var a=Z.concat(X.filter(function(a){return a&&!a.is_pinned})),b=c!=null?a.findIndex(function(a){return a.thread_id===c}):-1;return K?{onNextItemSelect:function(){b===-1?f(a[0]):f(a[b+1])},onPrevItemSelect:function(){b===-1?f(a[a.length-1]):f(a[b-1])}}:null},[Z,X,c,K,f]);p($);$=L?b("WIGScrollableArea.react"):b("WorkGalahadUIChannelScrollableArea.react");return j.jsxs(j.Fragment,{children:[M&&j.jsx(b("WorkGalahadThreadlistTypeahead.react"),{queryString:E,setQueryString:G,viewer:I,isSearching:!1,isSearchFocused:B,setIsSearchFocused:F,useMessageSearch:J,shouldRegisterShortcuts:K,workChatSearchFunnelState:a}),M&&!B&&!L&&j.jsx(b("WorkGalahadChatsThreadlistHeader.react"),{folder:e,filter:d}),j.jsx(b("WorkchatThreadListInviteRow.react"),{}),!B&&!W&&e===b("MessagingTag").INBOX&&P.length>0?j.jsx(i,{pendingFolderUnseenCount:D,newMessageRequestThreads:P,viewer:I}):null,j.jsxs($,{children:[!W&&j.jsxs(b("WorkGalahadNavList.react"),{"aria-label":g._("Thread list"),wrapXToNextLine:!0,wrapY:!1,xstyle:r.list,header:e===b("MessagingTag").INBOX&&Z.length>0?j.jsx(b("WorkGalahadPinnedThreadlistHeader.react"),{isQuickChat:L,onEnableEditingPinnedThreads:ca,onSavePinnedThreadsEdits:R,isEditingPinnedThreads:S.isEditingPinnedThreads}):null,children:[z?j.jsx(b("WorkGalahadNewMessageRow.react"),{isActive:z,onClose:function(){b("MessengerComposerActions").exitComposeStateAbandonSearch();var a=X.find(function(a){return a.unread_count===0});b("MessengerActions").selectThread(a?a.thread_id:null,null)}}):null,e===b("MessagingTag").INBOX&&Z.length>0&&j.jsx(b("WorkGalahadPinnedThreadlist.react"),{pinnedThreads:Z,activeThreadID:c,viewer:I,isDenseMode:A,isEditingPinnedThreads:S.isEditingPinnedThreads,onReorderPinnedThreads:da,onUnpinThread:ea,handleSelect:f}),j.jsx(b("WorkGalahadThreadlist.react"),{activeThreadID:c,isDenseMode:A,threads:Y,viewer:I,handleSelect:f})]}),Y.length===0&&U?j.jsx(q,{folder:e,filter:d}):null,!U&&!W&&j.jsx(b("WIGOnVisible.react"),{onVisible:C,children:function(a){return j.jsxs(j.Fragment,{children:[j.jsx("div",{ref:a}),j.jsx(b("WorkGalahadChannelItemChromeList.react"),{amount:5,type:L?"quick-chat":"chats"})]})}})]})]})}e.exports=a},null);
__d("WorkGalahadChatTabContent.react",["CurrentUser","ErrorBoundary.react","MessengerState.re","React","WorkGalahadChatChannel.react"],function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx(b("ErrorBoundary.react"),{children:g.jsx(b("MessengerState.re").jsComponent,{fbid:b("CurrentUser").getID(),children:function(a){return g.jsx(b("WorkGalahadChatChannel.react"),{messengerState:a})}})})}e.exports=a},null);
__d("useWorkGalahadChatNavigationState",["MessengerURIStore","MessengerView","React"],function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useEffect,h=a.useState;c=function(){var a=h(i),c=a[0],d=a[1];g(function(){var a=b("MessengerURIStore").addListener("change",function(){return d(i())});return a.remove},[]);return c};var i=function(){var a,c=b("MessengerURIStore").getState();return{activeThreadID:(a=c.activeThreadID)!=null?a:void 0,detailView:(a=c.detailView)!=null?a:void 0,view:(a=c.masterView)!=null?a:b("MessengerView").MASTER.RECENT}};e.exports=c},null);