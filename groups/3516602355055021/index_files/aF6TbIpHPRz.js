if (self.CavalryLogger) { CavalryLogger.start_js(["bKzig"]); }

__d("WorkChatDeleteSuggestionsMutation.graphql",[],function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"WorkchatDeleteSuggestionsData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"workchat_delete_suggestions",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"WorkchatDeleteSuggestionsResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"WorkChatDeleteSuggestionsMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"WorkChatDeleteSuggestionsMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"WorkChatDeleteSuggestionsMutation",id:"2673262756052143",text:null,metadata:{}}}}();e.exports=a},null);
__d("AssistantSmartComposeTypeahead.react",["cx","AbstractMentionsTextEditor.react","DebouncedMentionsTextEditor.react","DraftEditor.react","DraftModifier","EditorState","MercuryIDs","React","RelayFBEnvironment","SimpleNUXMessage","SimpleNUXMessageTypes","SmartComposeTypeaheadHelper","UFI2SmartComposeTypeaheadNUX.react","gkx"],function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=5;var i={GHOST:{visibility:"hidden"}};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={typeahead:"",nuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").WORK_SMART_COMPOSE_NUX)&&b("gkx")("1233934")};d.$2=function(a){d.props.onChange(a);var b=a.getCurrentContent().getPlainText();d.$1.updateTypeSpeed();d.$1.setEnteredText(b);b=a.getSelection();d.$1.setCursorPosition(b.getStartOffset(),b.getEndOffset())};d.$3=function(a){!d.insertTypeahead(a)&&d.props.onTab&&d.props.onTab(a)};d.$4=function(a){!d.insertTypeahead(a)&&d.props.onRightArrow&&d.props.onRightArrow(a)};d.$5=function(){if(!d.state.nuxShown)return;b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").WORK_SMART_COMPOSE_NUX);d.setState({nuxShown:!1})};d.$6=function(a,b){d.setState({typeahead:""});return d.props.handleContentReturn!=null?d.props.handleContentReturn(a,b):"not-handled"};d.$1=new(b("SmartComposeTypeaheadHelper"))("workchat",b("RelayFBEnvironment"),b("MercuryIDs").isValidThreadID(d.props.threadID)?b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID):"");d.$1.onSuggestionChange(function(a){return d.setState({typeahead:a})});return d}var d=c.prototype;d.insertTypeahead=function(a){var c=this.state.typeahead;if(c=="")return!1;this.$1.logSuggestionInserted();a.preventDefault();a=this.props.editorState;var d=a.getCurrentContent().getPlainText();a=b("EditorState").push(a,b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),c),"insert-characters");a=b("EditorState").forceSelection(a,a.getCurrentContent().getSelectionAfter());this.props.onChange(a);this.$1.setEnteredText(d+c);this.$5();return!0};d.exitCurrentMode=function(){this.refs.foreground&&this.refs.foreground.exitCurrentMode()};d.focus=function(){this.refs.foreground&&this.refs.foreground.focus()};d.$7=function(){var a=this.props.editorState,c=a.getSelection(),d=a.getCurrentContent(),e=c.getStartOffset(),f=c.getEndOffset();f=e===f&&e===d.getPlainText().length;if(!f||this.state.typeahead=="")return null;e=a.getSelection().merge({anchorKey:d.getFirstBlock().getKey(),anchorOffset:0,focusOffset:d.getLastBlock().getText().length,focusKey:d.getLastBlock().getKey()});f=b("DraftModifier").applyInlineStyle(d,e,"GHOST");d=b("EditorState").createWithContent(b("DraftModifier").insertText(f,c,this.state.typeahead),a.getDecorator());return h.jsx(b("DebouncedMentionsTextEditor.react"),babelHelpers["extends"]({},this.props,{className:"_8voz",readOnly:!0,editorState:d,placeholder:"",customStyleMap:i}))};d.render=function(){var a=this;return h.jsxs("div",{className:"_899m",children:[this.$7(),h.jsx(b("DebouncedMentionsTextEditor.react"),babelHelpers["extends"]({},this.props,{ref:"foreground",className:"_898j",handleContentReturn:this.$6,onChange:this.$2,onTab:this.$3,onRightArrow:this.$4,placeholder:this.state.typeahead===""?this.props.placeholder:""})),h.jsx(b("UFI2SmartComposeTypeaheadNUX.react"),{contextRef:function(){return a.refs.foreground},shown:this.state.nuxShown&&this.state.typeahead!=="",onCloseButtonClick:this.$5})]})};return c}(h.Component);c.defaultProps=babelHelpers["extends"]({},b("DraftEditor.react").defaultProps,{autoHighlight:!0,autoUpdateHighlight:!0,maxResults:a,reverseOrder:!1,threadID:""});e.exports=c},null);
__d("messengerFPSCounter",["performance","requestAnimationFrame"],function(a,b,c,d,e,f){"use strict";var g;function a(a,c){if(!(g||(g=b("performance"))).now)return;var d=(g||(g=b("performance"))).now(),e=d,f=0,h=function h(){var i=(g||(g=b("performance"))).now();if(i>a+e)return;f++;i>=1e3+d&&(c(Math.round(f*1e3/(i-d))),f=0,d=i);b("requestAnimationFrame")(h)};b("requestAnimationFrame")(h)}e.exports=a},null);
__d("WorkChatDeleteSuggestionsMutation",["ClientIDs","CurrentUser","RelayFBEnvironment","RelayModern","WorkChatDeleteSuggestionsMutation.graphql"],function(a,b,c,d,e,f){"use strict";var g,h=b("ClientIDs").getNewClientID,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=g!==void 0?g:g=b("WorkChatDeleteSuggestionsMutation.graphql");function a(a,c,d){return i(b("RelayFBEnvironment"),{mutation:j,variables:{input:{client_mutation_id:h(),actor_id:b("CurrentUser").getID(),message_id:a}},onCompleted:c,onError:d})}e.exports={commit:a}},null);
__d("WorkChatSuggestionsButtonGroup.react",["ix","fbt","React","TetraIcon.react","WIGPressable.react","WorkChatSuggestionButton.react","fbicon","stylex"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){a.showCloseButton;var c=a.buttons,d=a.isFromViewer,e=a.isVisible,f=a.setIsVisible,j=a.deleteSuggestions;return e?i.jsxs("div",{className:d?"co320n8y kafp0xg0 mwyx9m70 pvvzqsns qctk5f2p gwd2ikpa i2yem8cm t7s017up cfwqufeb h4y7jwnr":"kh1bt4hq pvvzqsns qctk5f2p gwd2ikpa i2yem8cm t7s017up cfwqufeb h4y7jwnr",children:[c,i.jsx("div",{className:d?"c6vuo75f i2yem8cm t3k3x88u h5rkepxe cz2zqk6i pf8t2of3 rr7cureg noe3hari ale2funn feadfpdh":"c6vuo75f i2yem8cm t3k3x88u h5rkepxe cz2zqk6i pf8t2of3 rr7cureg noe3hari ale2funn",children:i.jsx(b("WIGPressable.react"),{"aria-label":h._("Close Suggestions"),display:"inline",onPress:function(){f(!1),j()},overlayDisabled:!0,children:i.jsx("div",{className:"s2sl511w i2yem8cm",children:i.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("478231"),12)})})})})]}):i.jsx("div",{})}e.exports=a},null);
__d("WorkChatSuggestions.react",["ix","fbt","CurrentUser","JSResource","MercuryMessageActions","MessengerState.re","OmniMSuggestions_OmniMActionType","React","WorkChatDeleteSuggestionsMutation","WorkChatSuggestionButton.react","WorkChatSuggestionsButtonGroup.react","WorkChatSuggestionsTypedLogger","clearTimeout","fbicon","keyMirror","setTimeout","useWIGLazyDialog"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("React");var j=c.useCallback,k=c.useEffect,l=c.useRef,m=c.useState,n=b("keyMirror")(b("OmniMSuggestions_OmniMActionType")),o=function(a){switch(a){case n.CREATE_REMINDER:return b("fbicon")._(g("478791"),12);case n.SAVE_CONTENT:return b("fbicon")._(g("495580"),12);default:return b("fbicon")._(g("1071937"),12)}},p=function(a){switch(a){case n.CREATE_REMINDER:return h._("Remind Me");case n.SAVE_CONTENT:return h._("Save Message");default:return h._("Unsupported suggestion")}};function q(a,c,d){new(b("WorkChatSuggestionsTypedLogger"))().setSuggestionType(d).setAppID(b("CurrentUser").getAppID()).setMessageID(c).setTime(Date.now()).setThreadID(a).log()}function a(a){var c=a.message,d=a.suggestions,e=a.isFromViewer,f=a.expirationTime;a=b("useWIGLazyDialog")(b("JSResource")("WorkChatSetReminderDialog.react").__setRef("WorkChatSuggestions.react"));var g=a[0],h=b("MessengerState.re").getServerMessageID(b("CurrentUser").getID(),c.message_id),r=j(function(a){b("WorkChatDeleteSuggestionsMutation").commit(a,function(){},function(){})},[]),s=l(null);k(function(){s.current=b("setTimeout")(function(){return b("WorkChatDeleteSuggestionsMutation").commit(h,function(){},function(){})},f);return function(){b("clearTimeout")(s.current)}},[f,h]);var t=j(function(a){switch(a){case n.CREATE_REMINDER:return function(){g({messageID:c.message_id,threadID:c.thread_id}),v(!1),r(h),b("clearTimeout")(s.current),q(c.thread_id,h,n.CREATE_REMINDER)};case n.SAVE_CONTENT:return function(){b("MercuryMessageActions").get().changeSaveStatus(c,!0),v(!1),r(h),b("clearTimeout")(s.current),q(c.thread_id,h,n.SAVE_CONTENT)};default:return function(){v(!1),r(h),b("clearTimeout")(s.current)}}},[r,c,h,g,s]);a=m(!0);var u=a[0],v=a[1];a=d.filter(function(a){return a!==n.SMART_REPLY}).map(function(a,c){return i.jsx(b("WorkChatSuggestionButton.react"),{icon:o(a),label:p(a),onPress:t(a)},c)});return a.length>0?i.jsx(b("WorkChatSuggestionsButtonGroup.react"),{buttons:a,isFromViewer:e,showCloseButton:!0,isVisible:u,setIsVisible:v,deleteSuggestions:function(){return r(h)}}):null}e.exports=a},null);