if (self.CavalryLogger) { CavalryLogger.start_js(["lTs+F"]); }

__d("createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery.graphql",[],function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"items",type:"[HedgeHighlightInput!]!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"hedge_highlight",storageKey:null,args:[{kind:"Variable",name:"items",variableName:"items"}],concreteType:"HedgePhrase",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"key",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start_offset",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery",argumentDefinitions:a,selections:b},params:{operationKind:"query",name:"createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery",id:"3559730680766589",text:null,metadata:{}}}}();e.exports=a},null);
__d("HedgeHighlightSpan.react",["FlexLayout.react","React","XUIContextualDialog.react","stylex"],function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useRef;function a(a){var c=a.children,d=a.contentState,e=a.entityKey;a.offsetKey;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","contentState","entityKey","offsetKey"]);var f=h(null);if(e==null)return null;d=d.getEntity(e);e=d.getData();d=e.hedgePhrase;return g.jsxs("span",babelHelpers["extends"]({},a,{className:"sy04djd2",children:[g.jsx("span",{ref:f,children:c}),g.jsx(b("XUIContextualDialog.react"),{alignment:"center",autoFocus:!1,contextRef:function(){return f.current},"data-testid":void 0,hoverContextRef:function(){return f.current},hoverHideDelay:250,hoverShowDelay:500,label:d.text,position:"above",children:g.jsx(b("FlexLayout.react"),{align:"center",className:"px367esf dtup7xkc qy8zhr6p e8umytep",children:d.type})})]}))}e.exports=a},null);
__d("ContentStateStore",["immutable"],function(a,b,c,d,e,f){"use strict";var g=b("immutable").OrderedMap;function a(){var a=new Map(),b=null;return{diff:function(c){var d=!1,e=new Map();c.getBlockMap().forEach(function(b){var c=b.getKey(),f=a.get(c);f==null||f.block!==b?(e.set(c,{accepted:!1,block:b}),d=!0):e.set(c,f)});a=e;if(d){var f={};a.forEach(function(a){if(!a.accepted){a=a.block;f[a.getKey()]=a}});var h=g(f);b={accept:function(){a.forEach(function(a){return a.accepted=!0})},getBlockMap:function(){return h}};return b}return null},getLastDiff:function(){return b},reset:function(){a.clear()},update:function(b){b.getBlockMap().forEach(function(b){var c=a.get(b.getKey());c!=null&&(c.block=b)})}}}e.exports=a},null);
__d("DraftEditorUtils",["CharacterMetadata","DraftModifier","EditorState","SelectionState"],function(a,b,c,d,e,f){"use strict";a={filterEntityRanges:function(a,c){var d=c.getBlockMap(),e=d.map(function(d){var e=!1,f=d.getCharacterList().map(function(f){var g=f.getEntity();if(g!=null){var h=c.getEntity(g);h=!a(c,h,g,d);if(h){e=!0;return b("CharacterMetadata").applyEntity(f,null)}}return f});return e?d.set("characterList",f):d});return c.merge({blockMap:d.merge(e)})},getEntityRange:function(a,b,c){var d=a.getCurrentContent(),e=[];d.getBlocksAsArray().forEach(function(a){a.findEntityRanges(function(a){if(b!=null&&a.getEntity()===b){a=d.getEntity(b);if(a.getType()===c)return!0}return!1},function(a,b){e.push({end:b,start:a})})});return e.length>0?e[0]:null},getSelectionEntity:function(a,b){var c,d=b.getStartOffset();b=b.getEndOffset();d===b&&d===0?b=1:d===b&&(d-=1);for(var e=d;e<b;e++){var f=a.getEntityAt(e);if(f==null)return null;if(e===d)c=f;else if(c!==f)return null}return c},removeEntityAtOffset:function(a,c,d,e){var f=a,g=f.getSelection(),h=f.getCurrentContent(),i=h.getBlockForKey(c),j=i.getEntityAt(d);if(j!=null){d=h.getEntity(j);if(e!=null&&d.getType()!==e)return a;var k=b("SelectionState").createEmpty(c);d=null;i.findEntityRanges(function(a){return a.getEntity()===j},function(a,b){d=k.merge({anchorOffset:a,focusOffset:b})});if(d!=null){e=b("DraftModifier").applyEntity(h,d,null);f=b("EditorState").push(f,e,"apply-entity");f=b("EditorState").acceptSelection(f,g)}}return f}};e.exports=a},null);
__d("createUFI2HedgeHighlightComposerPlugin",["ContentStateStore","DraftEditorUtils","DraftModifier","EditorState","HedgeHighlightSpan.react","React","RelayModern","SelectionState","createCancelableFunction","createUFI2ComposerPlugin","debounce","getEntityMatcher","injectSubscriptionsHandler.react","installUFI2ComposerInputDecorators","promiseDone","throttle","createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery.graphql"],function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("RelayModern").fetchQuery;b("RelayModern").graphql;var j=1e4,k=1e3,l=1,m=1e3,n=g!==void 0?g:g=b("createUFI2HedgeHighlightComposerPlugin_HedgeHighlightQuery.graphql"),o="HEDGE_HIGHLIGHT",p={component:b("HedgeHighlightSpan.react"),strategy:b("getEntityMatcher")(function(a){return a.getType()===o})};function a(a){return function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(c){var d;d=e.call(this,c)||this;d.wrappedRef=h.createRef();d.requestHedgeHighlightsThrottled=null;d.contentStateStore=b("ContentStateStore")();d.$2=function(c,e){var f=c.inputProps.composerState.inputState;if(f.__type!=="editor-state-based")return;f=d.contentStateStore.getLastDiff();if(f==null)return;var g=[];f.getBlockMap().forEach(function(a){var b=a.getKey();a=a.getText();a.length>=l&&a.length<=m&&g.push({key:b,text:a})});f.accept();g.length>0&&b("promiseDone")(i(a.environment,n,{items:g}).then(function(a){d.$4(c,e,a)}))};d.requestHedgeHighlightsThrottled=d.$1();return d}var f=d.prototype;f.$1=function(){var a=b("createCancelableFunction")(this.$2),c,d=b("debounce")(function(b,d){c!==b&&(c=b,a(b,d))},k),e=b("throttle").acrossTransitionsWithBlocking(function(b,d){c!==b&&(c=b,a(b,d))},j);function f(a,b){d(a,b),e(a,b)}f.cancel=a.cancel;return f};f.$3=function(a,b){this.requestHedgeHighlightsThrottled&&this.requestHedgeHighlightsThrottled(a,b)};f.$4=function(a,b,c){var d=c.hedge_highlight.map(function(a){return a.key}).filter(Boolean);c=c.hedge_highlight.map(function(a){return a.key==null||a.length==null||a.start_offset==null||a.text==null||a.type==null?null:{key:a.key,length:a.length,start_offset:a.start_offset,text:a.text,type:a.type}}).filter(Boolean);this.$5(a,d,c);this.$6(a,b,c)};f.$6=function(a,c,d){this.$7(a,function(a){var c=a;a=c.getCurrentContent();d.forEach(function(d){a=c.getCurrentContent();var e=d.key,f=a.getBlockForKey(e);if(f==null)return;var g=f.getText().substr(d.start_offset,d.length);if(g!==d.text)return;g=a.createEntity(o,"MUTABLE",{hedgePhrase:d});var h=g.getLastCreatedEntityKey(),i=d.start_offset+d.length;f.getLength()<i&&(i=f.getLength());e=b("SelectionState").createEmpty(e).merge({anchorOffset:d.start_offset,focusOffset:i,hasFocus:!1});d=b("DraftEditorUtils").getSelectionEntity(f,e);if(d!=null)return;i=b("DraftModifier").applyEntity(g,e,h);c=b("EditorState").push(c,i,"apply-entity")});return c})};f.$5=function(a,c,d){this.$7(a,function(a){var e=a.getCurrentContent();e=b("DraftEditorUtils").filterEntityRanges(function(e,f,g,h){if(f.getType()!==o||c!=null&&!c.includes(h.getKey()))return!0;if(d==null)return!1;e=b("DraftEditorUtils").getEntityRange(a,g,o);if(e!=null){f=d.find(function(a){a=a.key;return a===h.getKey()});if(f!=null&&(e.start===f.start_offset&&e.end===f.start_offset+f.length))return!0}return!1},e);return b("EditorState").push(a,e,"apply-entity")})};f.$7=function(a,c){var d=this;a.inputProps.onComposerStateChange(function(a){var e=a.inputState;if(e.__type!=="editor-state-based")return a;var f=e.editorState,g=f.getSelection();f=b("EditorState").set(f,{allowUndo:!1});f=c(f);f=b("EditorState").set(f,{allowUndo:!0});f=b("EditorState").acceptSelection(f,g);d.contentStateStore.update(f.getCurrentContent());return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:f})})})};f.componentDidUpdate=function(a,c){a=this.props.inputProps;c=a.composerState;a=c.inputState;if(a.__type==="editor-state-based"){c=a.editorState;var d=c.getCurrentContent();a=this.contentStateStore.diff(d);a!=null&&(this.$7(this.props,function(a){var c=a.getSelection();if(c.isCollapsed()){var e=a,f=c.getAnchorKey();c=c.getAnchorOffset();var g=d.getBlockForKey(f),h=c-2;h>=0&&(e=b("DraftEditorUtils").removeEntityAtOffset(e,f,h,o));h=c+1;h<=g.getLength()&&(e=b("DraftEditorUtils").removeEntityAtOffset(e,f,h,o));return e}return a}),this.$3(this.props,this.setState))}};f.render=function(){var a=this.props;a.subscriptionsHandler;a=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return h.jsx("div",{ref:this.wrappedRef,children:h.jsx(c,babelHelpers["extends"]({},a,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(this.props.inputProps.composerState,p)})}))})};return d}(h.Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a},null);