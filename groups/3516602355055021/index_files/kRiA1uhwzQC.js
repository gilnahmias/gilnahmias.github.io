if (self.CavalryLogger) { CavalryLogger.start_js(["vzC\/b"]); }

__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],function(a,b,c,d,e,f){"use strict";a=function(){a.gen=function(c){var d={params:{},auto_exposure:!1,in_experiment:!1};d=b("FBRTCExperimentsConfig")[c]||d;c=new a(c,d);return c};a.getIncomingCallExperiments=function(){return a.gen("rtweb_incoming_call_experiments")};a.getMediaQualityExperiments=function(){return a.gen("rtc_www_media_quality_h2_2018")};function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.$3=function(){this.$2.auto_exposure&&this.logExposure()};c.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};c.getParam=function(a,b){if(this.$2.in_experiment){this.$3();a=this.$2.params[a];if(a!==void 0)return String(a)}return b};c.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};c.getBool=function(a,b,c){c===void 0&&(c=!0);var d=this.$2.params;if(this.$2.in_experiment){c&&this.$3();if(d[a]!==void 0)return d[a]==="1"||d[a]===1||d[a]==="true"||d[a]===!0}return b};return a}();e.exports=a},null);
__d("FBRTCIceStatsParser",[],function(a,b,c,d,e,f){var g=null;a=function(){"use strict";function a(){}a.getInstance=function(){g||(g=new a());return g};var b=a.prototype;b.extractIceInfo=function(a){var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};b.$1=function(a){return a.indexOf("candidate:")>-1};b.$2=function(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};b.$3=function(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};return a}();e.exports=a},null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h},null);
__d("FBRTCMediaMetricTracker",["performanceNow"],function(a,b,c,d,e,f){"use strict";var g,h={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};a=function(){function a(){this.$1={},this.$2={},this.$3={}}var c=a.prototype;c.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};c.getJitterStreamReportKey=function(){return Object.keys(this.$1)};c.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};c.addJitterBufferDelay=function(a,b){b!==null&&b!==void 0&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};c.setVideoMetric=function(a,b,c){c!==null&&c!==void 0&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};c.$4=function(a,c){if(a!==null&&a!==void 0){a.current=c;a.updatedTime=(g||(g=b("performanceNow")))();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:(g||(g=b("performanceNow")))(),current:c,updatedTime:g()}};c.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};c.addMetricStat=function(a,b,c){c!==null&&c!==void 0&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};c.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};c.getJitterBufferStats=function(a){if(!this.$1[a])return h;var b=this.$1[a].length;if(b===0)return h;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};c.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};a.fromJsonString=function(b){var c=new a();try{b=JSON.parse(b),b=b}catch(a){return c}b.stats&&(c.$2=b.stats);b.jitterBufferDelays&&(c.$1=b.jitterBufferDelays);b.videoMetric&&(c.$3=b.videoMetric);return c};return a}();e.exports=a},null);
__d("FBRTCMediaMetricsConst",[],function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a},null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCExperiment","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","URI","UserAgentData","gkx","performanceNow"],function(a,b,c,d,e,f){var g,h,i=5*60*1e3,j={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},k={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},l={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},m={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},n=[(a=b("FBRTCMediaMetricsConst")).ACCELERATE_RATE,a.DISCARD_RATE,a.EXPAND_RATE,a.PREEMPTIVE_RATE];function o(a){var c=new(g||(g=b("URI")))(window.location).getPath().includes("/videocall/");if(a==="MW_PEER_ID"&&!c){a=b("FBRTCExperiment").gen("rtc_www_zenon_platform_support");c=a.getBool("use_zenon_platform",!1,!1);if(c)return"ZenonPlatform"}a=b("gkx")("1154135");return a?"ZenonScotch":"Old Codebase"}c=function(){"use strict";a.nullSummary=function(){return new a({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function a(c){this.peerID=String(c.peerID),this.callID=String(c.callID),this.$2=c.isCaller,this.$1=c.version||a.CURRENT_SUMMARY_VERSION,this.$3=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$15=new Date().valueOf(),this.$4=c.callTrigger||null,this.$6={},this.$8={},this.$9={},this.$14={},this.$34=null,this.$35=null,this.$36=null,this.$17=0,this.$18=0,this.$33=!1,this.$10={},this.$11={},this.$12={},this.$13={},this.$37=null,this.$5=o(this.peerID),this.$20=(h||(h=b("performanceNow")))(),this.$16=0,this.$7={},this.$19=this.$20,this.$21=0,this.$22={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$44()),this.$45(),this.$46(),this.$47(),this.$24=b("FBRTCIceStatsParser").getInstance(),this.$43=new(b("FBRTCMediaMetricTracker"))(),this.$23=b("FBRTCLogger").getInstance()}var c=a.prototype;c.toJsonString=function(){this.$18=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$29,conferenceName:this.$26,joinWithSID:this.$27,activeConn:this.$25,escP2PCallID:this.$28,serverInfoData:this.$30,localVideoDuration:this.$31,remoteVideoDuration:this.$32,startTime:this.$15,trigger:this.$4,signalingTime:this.$6,escStateTimes:this.$8,applicationEventTime:this.$9,videoEscTimes:this.$14,endCallReason:this.$34,endCallSubreason:this.$35,isRemoteEnded:this.$36,lastUpdatedTime:this.$17,lastSerializedTime:this.$18,unsetOnRetrieve:this.$33,openCount:this.$21,extraInfo:this.$22,gen0IceSentCount:this.$10,gen0IceReceivedCount:this.$11,iceSentCount:this.$12,iceReceivedCount:this.$13,connectionType:this.$37,mediaMetricStats:this.$43.toJsonString(),newSignalingTime:this.$7,accumulatedCallTime:this.$48(),deviceCharged:this.$39,videoReceivedCodec:this.$40,videoSentCodec:this.$41,audioSentCodec:this.$42,relayIP:this.$38,clientVersion:this.$5})};a.fromJsonString=function(c){try{c=JSON.parse(c)}catch(a){return null}if(c.version<a.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(c,"peerID")||!Object.prototype.hasOwnProperty.call(c,"callID")||!Object.prototype.hasOwnProperty.call(c,"isCaller")||!Object.prototype.hasOwnProperty.call(c,"startTime")||!Object.prototype.hasOwnProperty.call(c,"trigger")||!Object.prototype.hasOwnProperty.call(c,"signalingTime")||!Object.prototype.hasOwnProperty.call(c,"endCallReason")||!Object.prototype.hasOwnProperty.call(c,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(c,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(c,"lastSerializedTime"))return null;var d=new a({peerID:c.peerID,callID:c.callID,isCaller:c.isCaller});d.$1=c.version;d.$3=c.uploadLogLevel;d.$15=c.startTime;d.$4=c.trigger;d.$5=c.clientVersion;d.$6=c.signalingTime;d.$34=c.endCallReason;d.$35=c.endCallSubreason;d.$36=c.isRemoteEnded;d.$17=c.lastUpdatedTime;d.$18=c.lastSerializedTime;d.$27=c.joinWithSID;c.callType&&(d.$29=c.callType);c.conferenceName&&(d.$26=c.conferenceName);c.escP2PCallID&&(d.$28=c.escP2PCallID);c.activeConn&&(d.$25=c.activeConn);c.serverInfoData&&(d.$30=c.serverInfoData);c.localVideoDuration&&(d.$31=c.localVideoDuration);c.remoteVideoDuration&&(d.$32=c.remoteVideoDuration);c.unsetOnRetrieve&&(d.$33=c.unsetOnRetrieve);c.openCount&&(d.$21=c.openCount);c.extraInfo&&(d.$22=c.extraInfo);c.gen0IceSentCount&&(d.$10=c.gen0IceSentCount);c.gen0IceReceivedCount&&(d.$11=c.gen0IceReceivedCount);c.iceSentCount&&(d.$12=c.iceSentCount);c.iceReceivedCount&&(d.$13=c.iceReceivedCount);c.newSignalingTime&&(d.$7=c.newSignalingTime);c.accumulatedCallTime&&(d.$16=c.accumulatedCallTime);c.escStateTimes&&(d.$8=c.escStateTimes);c.applicationEventTime&&(d.$9=c.applicationEventTime);c.videoEscTimes&&(d.$14=c.videoEscTimes);c.mediaMetricStats&&(d.$43=b("FBRTCMediaMetricTracker").fromJsonString(c.mediaMetricStats));c.connectionType&&(d.$37=c.connectionType);c.deviceCharged&&(d.$39=c.deviceCharged);c.videoReceivedCodec!==null&&(d.$40=c.videoReceivedCodec);c.videoSentCodec!==null&&(d.$41=c.videoSentCodec);c.audioSentCodec!==null&&(d.$42=c.audioSentCodec);c.relayIP!==null&&c.relayIP!==void 0&&(d.$38=c.relayIP);return d};a.restoreOrInitialize=function(c,d,e,f,g,h){d=String(d);e=String(e);c=c.retrieveCallSummary(d,e);!c?(c=new a({peerID:d,callID:e,isCaller:f}),g?(c.onFullMessageReceived({msg:g}),c.onOfferAckSent(g)):c.onCallStarted(h||b("FBRTCLogger").Trigger.UNKNOWN),h!==b("FBRTCLogger").Trigger.REDIAL_BUTTON&&b("FBRTCLogger").getInstance().logError(d,e,"Missing call summary from storage")):c.$33&&(c.$34=null,c.$35=null,c.$36=null,delete c.$6[j.CALL_ENDED],delete c.$7[j.CALL_ENDED],c.$20=0,c.$33=null);return c};a.logSavedSummaries=function(a){var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};c.logThisSummary=function(a){var c=b("FBRTCLogger").getInstance();a.retrieveCallSummary(this.peerID,this.callID)!=null&&(c.logEndCallSummary(this),a.removeCallSummary(this.peerID,this.callID),c.logToConsole("Logged active summary"))};c.isNull=function(){var b=a.CANONICAL_NULL_SUMMARY;return this.peerID===b.peerID&&this.callID===b.callID&&this.isCaller()===b.isCaller()&&this.getCallTrigger()===b.getCallTrigger()};c.save=function(a){var c=(h||(h=b("performanceNow")))(),d=c-this.$19;if(d>i){this.$23.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$19=c};c.getVersion=function(){return this.$1};c.getLastUpdatedTime=function(){return this.$17};c.setLastUpdatedTime=function(a){this.$17=a};c.getExtraInfo=function(){return this.$22};c.getCallTrigger=function(){return this.$4};c.addExtraInfo=function(a,b){this.$22[a]=b,this.$47()};c.isCaller=function(){return this.$2};c.isNetworkReady=function(){if(this.$6[j.NETWORK_READY])return!0;else return!1};c.isAnswerReceived=function(){if(this.$6[j.RECV_ANSWER])return!0;else return!1};c.onCallStarted=function(a){this.$4=a,this.$49(j.CALL_STARTED),this.$47()};c.setCallTrigger=function(a){this.$4=a,this.$47()};c.onPopupOpened=function(){this.$50(k.POPUP_OPENED),this.$21++,this.$47()};c.onPressedAnswer=function(){this.$50(k.PRESSED_ANSWER),this.$47()};c.onMediaRequested=function(){this.$50(k.MEDIA_REQUESTED),this.$47()};c.onMediaSucceeded=function(){this.$50(k.MEDIA_SUCCEEDED),this.$47()};c.onFellbackToAudio=function(){this.$50(k.FELLBACK_TO_AUDIO),this.$47()};c.setConnectionType=function(a){this.$37=a,this.$47()};c.setUploadLogLevel=function(a){this.$3=a,this.$47()};c.getCallType=function(){return this.$29};c.setCallType=function(a){this.$29=a,this.addExtraInfo(b("FBRTCLogger").Key.CALL_TYPE,a),this.$47()};c.setVideoDurations=function(a,b){this.$31=a,this.$32=b,this.$47()};c.setScreenDuration=function(a){this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};c.setConferenceName=function(a){this.$26=a,this.$47()};c.setTotalVideoFilterDuration=function(a){this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_DURATION_WITH_FILTER,Math.ceil(a).toString())};c.setCoExperienceEffectDuration=function(a){this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_TOTAL_DURATION,Math.ceil(a).toString())};c.setEffectCount=function(a){this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_COUNT,a.toString())};c.setJoinWithSID=function(a){this.$27=a,this.$47()};c.setServerInfoData=function(a){this.$30=a,this.$47()};c.setActiveConnection=function(a){this.$25=a,this.$47()};c.setEscalationP2PCallID=function(a){this.$28=a,this.$47()};c.onOfferAckSent=function(a){this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};c.onMessageSent=function(a){var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$51(c,j.SENT_OFFER,j.SENT_RETRIED_OFFER);this.$52(a,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$51(c,j.SENT_ANSWER,j.SENT_RETRIED_ANSWER);this.$52(a,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.OK:this.$49(j.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$49(j.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$51(c,j.SENT_OFFER_ACK,j.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$51(c,j.SENT_ANSWER_ACK,j.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$52(a,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$53(m.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$53(m.SENT_ESC_RESPONSE):this.$53(m.SENT_ESC_REQUEST);break;default:}this.$47()};c.$52=function(a,b,c){var d,e=null;a=this.$24.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$54(b,e),this.$54(c,e)};c.$54=function(a,b){!a[b]?a[b]=1:a[b]+=1};c.$55=function(a){this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};c.onFullMessageReceived=function(a){var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$55(a);this.$51(d,j.RECV_OFFER,j.RECV_RETRIED_OFFER);this.$52(c,this.$11,this.$13);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$55(a);this.$51(d,j.RECV_ANSWER,j.RECV_RETRIED_ANSWER);this.$52(c,this.$11,this.$13);break;case b("FBRTCConstants").PayloadType.OK:this.$49(j.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$49(j.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$51(d,j.RECV_OFFER_ACK,j.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$51(d,j.RECV_ANSWER_ACK,j.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$52(c,this.$11,this.$13);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$53(m.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$53(m.RECV_ESC_ACCEPT):this.$53(m.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$53(m.RECV_ESC_REQUEST):this.$53(m.RECV_ESC_TIMEOUT);break;default:}this.$47()};c.onMsgAckReceived=function(a,b){a=a.msg.flag===1;b?this.$51(a,j.RECV_OFFER_ACK,j.RECV_RETRIED_OFFER_ACK):this.$51(a,j.RECV_ANSWER_ACK,j.RECV_RETRIED_ANSWER_ACK)};c.onNetworkReady=function(){this.$49(j.NETWORK_READY),this.$47()};c.onCallConnected=function(){this.$49(j.CALL_CONNECTED),this.$47()};c.onCallEnded=function(a,b,c,d){this.$33=c,this.$34=a,this.$35=d,this.$36=b,this.$49(j.CALL_ENDED),this.$47()};c.setOfferSentTime=function(){this.$49(j.SENT_OFFER)};c.setOfferAckReceivedTime=function(){this.$49(j.RECV_OFFER_ACK)};c.setAnswerSentTime=function(){this.$49(j.SENT_ANSWER)};c.setAnswerReceivedTime=function(){this.$49(j.RECV_ANSWER)};c.setJoinRequestSent=function(){this.$49(j.SENT_JOIN_REQUEST),this.$47()};c.setJoinResponseReceived=function(){this.$49(j.RECV_JOIN_RESPONSE),this.$47()};c.setJoinResponseProcessed=function(){this.$49(j.PROC_JOIN_RESPONSE),this.$47()};c.setRingRequestReceived=function(){this.$49(j.RECV_RING_REQUEST),this.$47()};c.setRingResponseSent=function(){this.$49(j.SENT_RING_RESPONSE),this.$47()};c.setEscalationAvailable=function(){this.$56(l.ESCALATION_IS_AVAILABLE)};c.setEscalationInitiated=function(){this.$56(l.USER_INITIATED_REQUEST)};c.setReceivedEscalationRequest=function(){this.$56(l.RECEIVED_INCOMING_REQUEST)};c.setInvalidP2PEscalationState=function(){this.$56(l.REJECTED_INVALID_P2P_STATE)};c.setEscalationConnectingToMultiway=function(){this.$56(l.CONNECTING_TO_MULTIWAY)};c.setEscalationConnectedToMultiway=function(){this.$56(l.CONNECTED_TO_MULTIWAY)};c.setEscalationPeerConnectingToMultiway=function(){this.$56(l.PEER_CONNECTING_TO_MULTIWAY)};c.setEscalationPeerConnectedToMultiway=function(){this.$56(l.PEER_CONNECTED_TO_MULTIWAY)};c.setReadyToEscalate=function(){this.$56(l.READY_TO_ESCALATE)};c.setEscalationPeerFailedToConnectToMultiway=function(){this.$56(l.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};c.setEscalationTimedOut=function(){this.$56(l.TIMED_OUT)};c.setVidEscalationInitClick=function(){this.$53(m.ESCALATION_INITIATION_BUTTON_CLICKED)};c.setVidEscalationAcceptedClick=function(){this.$53(m.ESCALATION_APPROVED_BUTTON_CLICKED)};c.setVidEscalationDeclinedClick=function(){this.$53(m.ESCALATION_DECLINED_BUTTON_CLICKED)};c.setVidEscalationMediaRequested=function(){this.$53(m.USERMEDIA_REQUEST)};c.setVidEscalationMediaSuccess=function(){this.$53(m.USERMEDIA_SUCCESS)};c.setVidEscalationMediaFailed=function(){this.$53(m.USERMEDIA_FAILURE)};c.setVideoCapabilities=function(a){this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_CAPABILITIES,a)};c.setMediaInputs=function(a){this.addExtraInfo(b("FBRTCLogger").Key.MEDIA_INPUTS,a)};c.getVideoReceivedCodec=function(){return this.$40};c.setVideoReceivedCodec=function(a){this.$40=a};c.getVideoSentCodec=function(){return this.$41};c.setVideoSentCodec=function(a){this.$41=a};c.getAudioSentCodec=function(){return this.$42};c.setAudioSentCodec=function(a){this.$42=a};c.toString=function(){var a={};a.core_metrics=this.$57();a.time_series=null;return JSON.stringify(a)};c.$57=function(){var a={};a.ver=this.$1;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$29;a.active_conn=this.$25;a.app_event_times=this.$9;a.conf_name=this.$26;a.join_with_sid=this.$27;a.esc_p2p_call_id=this.$28;a.esc_state_times=this.$8;a.vid_esc_times=this.$14;a.serv_info=this.$30;a.conn=this.$58();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$21;a.signaling=this.$59();a.sender=this.$60();a.receiver=this.$61();a.end=this.$62();a.video=this.$63();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$64();a.device_charged=this.$39;a.client_version=this.$5;return a};c.$64=function(){return{NetworkReceive:{jb_nm:this.$65()}}};c.$65=function(){var a=this,b={},c=this.$43.getAudioStreamReportKeys().pop();n.forEach(function(d){var e=a.$43.getMetricStats(c,d);e&&(b[d]={m:e.min,M:e.max,avg:e.mean})});var d=this.$43.getJitterBufferStats(c);b.neteq={maxWait:d.max,meanWait:d.mean||0,mediaWait:d.median||0,minWait:d.min};return b};c.$58=function(){var a={dtls:1},b=this.$60();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);this.$38!==null&&(a.relay_ip=this.$38);return a};c.$59=function(){var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$15;a.time_from_start=this.$6;a.new_time_from_start=this.$7;var b=this.$66();b>0&&(a.duration=b);return a};c.$66=function(a){var b=this.$7[j.CALL_CONNECTED]||this.$7[j.NETWORK_READY];if(!b)return 0;a=this.$7[j.CALL_ENDED]||!(a==null?void 0:a.assumeOngoing)&&this.$16||this.$48();return Math.max(0,a-b)};c.$60=function(){var a=this,c={},d=this.$43.getAudioStreamReportKeys();d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(d!=null){c.bytes=d.current;var e=d.updatedTime-d.startedTime;if(e>0){c.ube_avg=(d.current-d.first)*8/e*1e3;return!0}}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(d){c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(d){c.psent=d.current;return!0}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT);if(d){c.avgrtt=d.mean;c.maxrtt=d.max;c.minrtt=d.min;return!0}return!1});this.$10&&(c.ice_g0=this.$10);this.$12&&(c.ice=this.$12);this.$42!=null&&this.$42!==""&&(c.codec={www:this.$42});return c};c.$61=function(){var a=this,c={},d=this.$43.getAudioStreamReportKeys();d.some(function(d){var e,f=a.$43.getMetricStats(d,(e=b("FBRTCMediaMetricsConst")).DECODING_PLC),g=a.$43.getMetricStats(d,e.DECODING_PLC_CNG),h=a.$43.getMetricStats(d,e.DECODING_CNG);d=a.$43.getMetricStats(d,e.DECODING_NORMAL);if(h!=null&&d!=null&&f!=null&&g!=null){c.dec_cng=h.current;c.dec_normal=d.current;c.dec_plc=f.current;c.dec_plc_cng=g.current;c.neteq_calls=c.dec_cng+c.dec_normal+c.dec_plc+c.dec_plc_cng;return!0}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(d){c.bytes=d.current;var e=d.updatedTime-d.startedTime;if(e>0){c.dbe_avg=(d.current-d.first)*8/e*1e3;return!0}}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(d){c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(d){c.precv=d.current;return!0}return!1});d.some(function(d){d=a.$43.getMetricStats(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(d){c.avgrtt=d.mean;c.maxrtt=d.max;c.minrtt=d.min;return!0}return!1});this.$11&&(c.ice_g0=this.$11);this.$13&&(c.ice=this.$13);return c};c.$62=function(){var a={};this.$34!=null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$34),this.$35!==null&&(a.end_call_subreason_string=this.$35),a.remote_ended=this.$36);this.$37&&(a.conn_type=this.$37);return a};c.$63=function(){var a={ename:this.$41,eqps:this.$67(),frames:this.$68(),psent:null,plost:null};return{sender:this.$69(a),receiver:this.$70(),ld:this.$31,rd:this.$32,bwe:this.$71()}};c.$67=function(){var a=this,c=null,d=this.$43.getVideoStreamReportKeys();d.some(function(d){d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").OUTBOUND_QP);if(d){c=d.current;return!0}return!1});return c};c.$68=function(){var a=this,c=null,d=this.$43.getVideoStreamReportKeys();d.some(function(d){d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(d){c=d.current;return!0}return!1});return c};c.$71=function(){var a=this,c={avg_enc_bitrate:this.$72(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},d=this.$43.getVideoStreamReportKeys();d.some(function(d){var e=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),f=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(e&&f&&d){c.avg_send_bw=e.mean;c.avg_trans_bitrate=f.mean;c.avg_retrans_bitrate=d.mean;return!0}return!1});return c};c.$72=function(){var a=this,c=this.$43.getVideoStreamReportKeys(),d=null;c.some(function(c){c=a.$43.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(c){var e=c.current-c.first;c=c.updatedTime-c.startedTime;if(c>0){d=e*8/c*1e3;return!0}}return!1});return d};c.$69=function(a){var c=this,d=this.$43.getVideoStreamReportKeys();d.some(function(d){var e=c.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT);d=c.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(e&&d){a.psent=e.current;a.plost=d.current;return!0}return!1});return a};c.$70=function(){var a=this,c={dec_bytes:null,dec_time:null,dname:this.$40,frd:null,precv:null,plost:null,qps:null},d=this.$43.getVideoStreamReportKeys();d.some(function(d){var e=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(e&&d){c.precv=e.current;c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(d){c.dec_bytes=d.current-d.first;c.dec_time=d.updatedTime-d.startedTime;return!0}return!1});d.some(function(d){var e=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_DECODED);d=a.$43.getVideoMetric(d,b("FBRTCMediaMetricsConst").INBOUND_QP);if(e&&d){c.frd=e.current;c.qps=d.current;return!0}return!1});return c};c.$73=function(){return new Date().valueOf()-this.$15};c.$48=function(){var a=(h||(h=b("performanceNow")))()-this.$20;return Math.floor(this.$16+a)};c.$49=function(a){if(this.$6[a])return;this.$6[a]=this.$73();this.$7[a]=this.$48()};c.$56=function(a){if(this.$8[a])return;this.$8[a]=this.$73()};c.$50=function(a){if(this.$9[a])return;this.$9[a]=this.$73()};c.$53=function(a){if(this.$14[a])return;this.$14[a]=this.$73()};c.setDeviceCharged=function(a){this.$39=a};c.$51=function(a,b,c){a?this.$49(c):this.$49(b)};c.$47=function(){this.$17=new Date().valueOf()};c.$44=function(){var a=b("UserAgentData").platformName,c=b("UserAgentData").browserName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile",c==="Chrome"&&(c="Mobile "+c));return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:c,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}};c.$45=function(){window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType)};c.$46=function(){navigator.hardwareConcurrency!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio)};c.getCallDuration=function(){var a=b("gkx")("707989");return this.$66({assumeOngoing:a})};c.getConnectedStartTime=function(){return this.$6[j.CALL_CONNECTED]?this.$6[j.CALL_CONNECTED]+this.$15:0};c.getCurrentTimeFromCallConnected=function(){var a=this.$7[j.CALL_CONNECTED];return this.$48()-a};c.getMediaMetricTracker=function(){return this.$43};c.getEndCallReason=function(){return this.$34!=null?b("FBRTCConstants").callEndReasonString(this.$34):"Unknown"};c.getRelayIP=function(){return this.$38};c.setRelayIP=function(a){this.$38=a};c.getClientVersion=function(){return this.$5};return a}();c.CANONICAL_NULL_SUMMARY=Object.freeze(c.nullSummary());c.OLDEST_SUPPORTED_SUMMARY_VERSION=19;c.CURRENT_SUMMARY_VERSION=24;c.REPORT_KEY="reportID";e.exports=c},null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","RTWebUserActionLogger","areEqual","setTimeout"],function(a,b,c,d,e,f){"use strict";var g,h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;a=function(){a.getInstance=function(){n||(n=new a());return n};function a(){this.$1=new(b("CacheStorage"))(h,i),this.$2=b("FBRTCLogger").getInstance()}var c=a.prototype;c.storeCallSummary=function(a,c,d){if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};c.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};c.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};c.removeCallSummaries=function(a){var b=this;this.$3(function(c){var d=a.length;for(var e=0;e<d;e++){var f=a[e].peerID,g=a[e].callID;c[f]&&c[f][g]&&(delete c[f][g],b.$6(c[f])&&delete c[f])}return c},this.$2.logError.bind(this.$2,null,null))};c.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],m);e&&b.push(e)}return b};c.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};c.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};c.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};c.getCallSummaries=function(){var a=this.$1.get(j)||{};return a};c.$3=function(a,c,d,e){d===void 0&&(d=l);(d===void 0||d===null)&&(d=l);var f=this.getCallSummaries(),h=this.getCallSummaries();f=a(f);if(f===null)return;var i=this.getCallSummaries();if((g||(g=b("areEqual")))(h,i))this.$1.set(j,f);else if(d>0){c("Retry lock");if(e){var m=this;b("setTimeout")(function(){m.$3(a,c,d-1,!0)},k)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};return a}();e.exports=a},null);
__d("MessengerContentSearchFunnelLoggerConstants",[],function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH:"search_from_integrated_message_search",SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads"});c=Object.freeze(babelHelpers["extends"]({},b,{END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button",END_BY_CHANGING_THREADS:"end_by_changing_threads"}));e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:c,ENTRY_SURFACES:b}},null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};return b}var d=c.prototype;d.getState=function(){return this.$MessengerAttributionTagsStore1};d.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=a.messagingTags;this.$MessengerAttributionTagsStore1.threadID=a.threadID;this.emitChange();break;case b("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()},null);
__d("MNPlatformAttributionTags",[],function(a,b,c,d,e,f){e.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGERDOTCOM:"messengerdotcom",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}},null);
__d("MessengerDiscoveryEntryPointsLoggingHelper",["MessengerDiscoveryEntryPoint"],function(a,b,c,d,e,f){"use strict";a={getEntryPointsLoggingTagStr:function(a){if(a.length==0||Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(a[0])==-1)throw new Error("Please use enums in MessengerDiscoveryEntryPoints class");return"entrypoint:"+a.join(":")}};e.exports=a},null);
__d("MNPlatformTagsDataManager",["MessengerActions","MessengerAttributionTagsStore","MessengerDiscoveryEntryPointsLoggingHelper","MNPlatformAttributionTags"],function(a,b,c,d,e,f){"use strict";e.exports={getTags:function(a){a===void 0&&(a=null);var c=null,d=null;switch(a){case"source:pages:message_shortlink":c=b("MNPlatformAttributionTags").M_DOT_ME;break;case"source:messenger:web":c=b("MNPlatformAttributionTags").MESSENGER_WEB;break;case"source:messenger:web_search":c=b("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;d=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:web_search"]);break;case"source:discovery:customer_chat_plugin":c=b("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;case"source:pages:page_plugin_message":c=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:pages_plugin"]);break;default:c="";break}a=[c];d!==null&&a.push(d);return a},updateThreadTabAfterSelectThread:function(a,c){a===void 0&&(a=null);c===void 0&&(c=null);a=this.getTags(a);b("MessengerActions").changeThreadTag(a,c)},hasThreadTags:function(a){var c=b("MessengerAttributionTagsStore").getState();return!!(c.messagingTags&&a&&c.threadID&&c.threadID.toString()===a)},getThreadTags:function(){var a=b("MessengerAttributionTagsStore").getState();return a.messagingTags}}},null);
__d("MessengerGraphQLTypeaheadAdapter",["fbt","MercuryIDs","SearchableEntry","WorkForeignEntityType"],function(a,b,c,d,e,f,g){"use strict";function h(a){return b("MercuryIDs").isValid(a)?a:b("MercuryIDs").getParticipantIDFromUserID(a)}function i(a){var b=a.scim_company_user&&a.scim_company_user.company_title;a=a.is_viewer_coworker?null:a.work_info&&a.work_info.work_community&&a.work_info.work_community.name;if(a&&b)return a+" \u2022 "+b;else if(a)return a;else if(b)return b;return null}function j(a,b){var c=null;a.members&&a.members.edges&&a.members.edges.length>0?c=a.members.edges.map(function(a){return a.node.name}).join(", "):a.is_work_user?c=i(a):b&&a.is_viewer_friend===!1&&(c=b);return c}var k={convertWorkChatProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e="non_friend";d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)==="NOT_FOREIGN";a.is_work_user&&d&&(e="fb4c");return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:c,photo:a.profile_picture&&a.profile_picture.uri,auxiliaryData:{isWorkUser:a.is_work_user,workForeignEntityInfo:a.work_foreign_entity_info},order:-a.viewer_affinity})},convertProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e="non_friend";d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)==="NOT_FOREIGN";a.is_work_user&&d?e="fb4c":(a.is_viewer_friend||a.messenger_contact.is_on_viewer_contact_list||d&&a.viewer_affinity>0)&&(e="friend");d=j(a,c);return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:d,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMemorializedUser:a.is_memorialized,isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,isVerified:a.is_verified,isActiveAccount:a.work_info&&a.work_info.is_active_account,workForeignEntityInfo:a.work_foreign_entity_info,alias:a.username},order:-a.viewer_affinity})},convertIGMessagingUserToEntry:function(a){return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:"friend",subtitle:"Instagram",photo:a.profile_picture&&a.profile_picture.uri,uri:null,auxiliaryData:{},order:0})},convertPageToEntry:function(a,c){if(!a||!a.id||!a.name)return null;return a.instant_game_info?this.convertGameToEntry(a,c):new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,canViewerMessage:a.can_viewer_message,isVerified:a.is_verified,canViewerAddToGroupChat:a.can_viewer_add_to_group_chat},order:0})},convertGameToEntry:function(a,c){return!a||!a.id||!a.name||!a.instant_game_info?null:new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:"game",photo:a.instant_game_info&&a.instant_game_info.icon_uri,uri:a.instant_game_info&&a.instant_game_info.game_uri,order:0})},convertMessageToEntry:function(a){var c,d;c=a==null?void 0:(c=a.message_thread)==null?void 0:c.thread;d=a==null?void 0:(d=a.matched_message)==null?void 0:d.message;var e=a==null?void 0:a.thread_id,f=a==null?void 0:a.matched_message;a=Number(a==null?void 0:(a=a.message_thread)==null?void 0:a.approx_count);if(c==null||d==null||e==null||f==null||a==null)return null;var i="message:"+e,j=d.snippet,l=g._("{number of messages} matched messages",[g._param("number of messages",a)]);l=a>1?l:j;j=d.timestamp;typeof j==="number"&&a===1?j*=1e3:j=void 0;a=a==1?(d=f)!=null?(d=d.search_result_context)!=null?d.match_ranges:d:d:null;f={matchRanges:a,timestamp:j,thread_id:e,messageResultType:"1on1Conversation"};d="";a=null;if(c.image!==void 0){c.thread_name&&(d=c.thread_name);c.image&&(a=c.image.uri);if(c.all_participants&&c.all_participants.nodes&&c.all_participants.count){if(d==""){j=c.all_participants.count;var m=c.all_participants.nodes.map(function(a){return a.messaging_actor.name}).filter(Boolean);d=k.getParticipantsText(!0,m,j)}m=c.all_participants.nodes.map(function(a){a=h(a.messaging_actor.id);return{id:a}});f=babelHelpers["extends"]({},f,{messageResultType:"groupConversation",participantsToRender:m,thread:{thread_id:e,image_src:a,participants:m.map(function(a){return a.id})}})}}else if(c.all_participants&&c.all_participants.nodes[0]&&c.all_participants.nodes[0].messaging_actor){j=c.all_participants.nodes[0].messaging_actor;j.name&&(d=j.name);j.profile_picture&&(a=j.profile_picture.uri);typeof j.is_memorialized==="boolean"&&(f.isMemorializedUser=j.is_memorialized);typeof j.is_messenger_user==="boolean"&&(f.isMessengerUser=j.is_messenger_user);typeof j.is_work_user==="boolean"&&(f.isWorkUser=j.is_work_user);typeof j.is_verified==="boolean"&&(j.__typename==="User"||j.__typename==="Page"?f.isVerified=j.is_verified:f.isVerified=!1);typeof j.username==="string"&&(f.alias=j.username);j.work_foreign_entity_info&&(f.workForeignEntityInfo=j.work_foreign_entity_info)}return new(b("SearchableEntry"))({uniqueID:i,title:d,subtitle:l,type:"message",photo:a,uri:null,order:0,auxiliaryData:f})},convertGroupToEntry:function(a,c){var d;if(!a||!a.thread_key||!a.is_group_thread)return null;var e=a.thread_key.thread_fbid;if(!e)return null;var f=a.image&&a.image.uri;d=a==null?void 0:(d=a.other_participants)==null?void 0:d.edges;if(d==null)return null;d=d.map(function(a){return a.node.messaging_actor.name});d=k.getParticipantsText(!1,d,a.other_participants.count);var g=a.name,i=null;!g?g=d:i=d;if(!g)return null;d={};d.thread={thread_id:e,other_user_fbid:null,image_src:f,participants:a.other_participants.edges.map(function(a){return h(a.node.messaging_actor.id)})};d.participantsToRender=a.other_participants.edges.map(function(a){return{id:h(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:f,title:g,subtitle:i,type:"thread",auxiliaryData:d})},convertMSQGroupToEntry:function(a,c,d){var e,f;if(!a||!a.thread_key)return null;e=a==null?void 0:(e=a.thread_key)==null?void 0:e.thread_fbid;if(!e)return null;var g=a.image&&a.image.uri;f=a==null?void 0:(f=a.all_participants)==null?void 0:f.edges;if(f==null)return null;f=f.filter(function(a){return a.node.id!==d});var i=f.map(function(a){return a.node.messaging_actor.name});i=k.getParticipantsText(!0,i,a.all_participants.count);a=a.thread_name;var j=null;!a?a=i:j=i;if(!a)return null;i={};i.thread={thread_id:e,other_user_fbid:null,image_src:g,participants:f.map(function(a){return h(a.node.messaging_actor.id)})};i.participantsToRender=f.map(function(a){return{id:h(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:g,title:a,subtitle:j,type:"thread",auxiliaryData:i})},getValidatedMatchesRanges:function(a,b){if(!Array.isArray(a))return[];a=[].concat(a).filter(function(a){var c=a.length;a=a.offset;if(typeof c!=="number"||typeof a!=="number")return;return c>0&&a>=0&&a+c<=b.length}).sort(function(a,b){return a.offset-b.offset});var c=[];a.forEach(function(a,b){if(b!=0){b=c[c.length-1];b=b.offset+b.length;if(a.offset<b)return}c.push(a)});return c},getParticipantsText:function(a,b,c,d){d===void 0&&(d=3);if(a===null||c==null)return b.join(", ");var e=1;a||(c+=e);var f=b.length<=d;a=a&&b.length===c;if(f&&a)return b.slice(0,-1).join(", ");f=b.slice(0,d);a=c-e-f.length;return a<1?f.join(", "):g._("{name of the first n participants} and {number of other participants} more",[g._param("name of the first n participants",f.join(", ")),g._param("number of other participants",a)])}};e.exports=k},null);
__d("MessengerSearchActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror","qex"],function(a,b,c,d,e,f){"use strict";var g,h=b("keyMirror")({ENTER_UNIVERSAL_SEARCH:null,ENTER_MESSAGE_SEARCH:null,ENTER_SEE_ALL_SEARCH:null,EXIT_MESSAGE_SEARCH:null,EXIT_SEE_ALL_SEARCH:null,LOAD_MORE_RESULTS:null}),i=b("qex")._("1097094")?b("MessengerView").MASTER.SEARCH_MESSAGES:b("MessengerView").MASTER.SEARCH,j={Types:h,changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQuerySeeAll:function(a,c){l(function(d){if(d.queryAll!==a)switch(c){case"message":return{query:a,masterView:i};case"friend":case"non_friend":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PEOPLE,seeAllType:c};case"page":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PAGES,seeAllType:c};case"thread":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_GROUPS,seeAllType:c}}return null})},changeQueryAll:function(a){l(function(b){return b.queryAll!==a?{query:a,masterView:i}:null})},searchForMessagesInAThread:function(a,b){var c={query:b,serverThreadID:a,activeThreadID:a,masterView:i};l(function(a){return c})},loadMoreResults:function(){b("MessengerDispatcher").dispatch({type:h.LOAD_MORE_RESULTS})},enterUniversalSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_UNIVERSAL_SEARCH}),l(function(a){return{masterView:b("MessengerView").MASTER.SEARCH}})},enterMessageSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_MESSAGE_SEARCH})},enterSeeAllSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_SEE_ALL_SEARCH})},exitMessageSearch:function(){j.changeQueryAll(""),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_MESSAGE_SEARCH})},exitSeeAllSearch:function(){j.changeQuerySeeAll(null,null),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_SEE_ALL_SEARCH})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j},null);
__d("MessengerSearchQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2268911786543136"};b.getQueryID=function(){return"604329370331165"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerSearchSeeAllQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2778926592129629"};b.getQueryID=function(){return"509156833039109"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerGroupSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2950938174931326"};b.getQueryID=function(){return"666334973823993"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerMessageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2706854202719826"};b.getQueryID=function(){return"332444434106998"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerPageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2230378867058421"};b.getQueryID=function(){return"419711615545533"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerProfileSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2530922320303835"};b.getQueryID=function(){return"1187203711467179"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2239687859487185"};b.getQueryID=function(){return"398906294161848"};return b}(b("WebGraphQLQueryBase"))},null);
__d("MessengerSearchWebGraphQLFetcherUtils",["CurrentUser","MessengerGroupSearchResultsQueryWebGraphQLQuery","MessengerMessageSearchResultsQueryWebGraphQLQuery","MessengerPageSearchResultsQueryWebGraphQLQuery","MessengerProfileSearchResultsQueryWebGraphQLQuery","MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery","gkx"],function(a,b,c,d,e,f){"use strict";a={formSearchRequests:function(a,c,d){var e={profiles:[],pages:[],rooms:[],messages:[]},f=b("CurrentUser").isWorkUser()&&b("gkx")("903262")?"workchat":"web_messenger_composer";a.forEach(function(a){switch(a){case"users":a=Math.floor(Math.random()*65536);e.profiles.push(new(b("MessengerProfileSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,can_viewer_send_money:d.canViewerSendMoneyFilter,session:a.toString(),exclude_ids:d.localEntryIDs,context:f}));break;case"groups":e.profiles.push(new(b("MessengerGroupSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.groupLimit,exclude_ids:d.localEntryIDs,context:f}));break;case"messages":e.messages.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.messageLimit,exclude_ids:[],context:f}));break;case"pages":e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!0,include_games:!0,internal_bot:!1,vc_endpoint:!1,context:f}));d.shouldQueryInternalBot===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!0,vc_endpoint:!1,context:f}));d.shouldQueryVCEndpoint===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!1,vc_endpoint:!0,context:f}));break;case"rooms":d.threadFBID!=null&&e.rooms.push(new(b("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,thread_fbid:d.threadFBID}))}});return e},formMSQMessageSearchRequest:function(a,c){var d=[];d.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:a,result_limit:c,exclude_ids:[],context:"web_messenger_composer"}));return d}};e.exports=a},null);
__d("MessengerUniversalSearchFunnelLoggerConstants",[],function(a,b,c,d,e,f){"use strict";a={END:"end",IMPRESSIONS:"impressions",QUERY_CHANGED:"query_changed",REENTERED:"reentered",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start"};b={FIRST:"first",SEE_ALL:"see_all"};c={USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",COWORKER:"coworker",MESSAGE:"message",OTHER:"other"};d={MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"};f=Object.freeze({INBOX:"inbox",SIDEBAR:"sidebar"});var g={NULL_STATE:"null_state",TYPEAHEAD:"typeahead"},h={LOCAL:"local",SERVER:"server",SERVER_XCONTROLLER:"server_xcontroller",LOCAL_AND_SERVER:"local_and_server",SERVER_USERS_GROUPS:"server_users_groups",SERVER_PAGES:"server_pages",SERVER_ROOMS:"server_rooms"},i={FAILED:"failed",FINISHED:"finished"},j={LOCAL:"local",SERVER:"server"},k={END_ACTION:"end_action"},l=Object.freeze({ABANDON:"abandon",RESULT_SELECTED:"result_selected",MESSAGE_SEARCH:"message_search",ENTER_INTEGRATED_MESSAGE_SEARCH:"enter_integrated_message_search",SEND:"send",CALL:"call"});e.exports={NAME:"MESSENGER_UNIVERSAL_SEARCH_FUNNEL",TYPE:"UNIVERSAL",END_ACTIONS:l,END_REASONS:k,ENTRY_SURFACES:f,EVENTS:a,INTERFACES:d,QUERY_PROGRESS:i,RESULT_PAGES:b,RESULT_SURFACES:g,RESULT_TYPES:c,SOURCES:h,UI_SECTIONS:j}},null);
__d("PromiseUtil",["Promise","nullthrows","promiseDone"],function(a,b,c,d,e,f){var g={allSettled:function(a){var c=b("Promise").all(a);return b("Promise").all(a.map(function(a){return b("Promise").resolve(a).then(void 0,function(a){return void 0})})).then(function(){return c})},allSettledInSeries:function(a){var c=[];return a.reduce(function(a,b){return a.then(b).then(function(){return void 0},function(a){c.push(a);return void 0})},b("Promise").resolve()).then(function(){if(c.length)throw c[0]})},exponentialBackoff:function(a,b,c){b===void 0&&(b=Math.sqrt(2));c===void 0&&(c=1);var d=c;c=function(){var a=d;d*=b;return a};return g.rateLimit(a,c)},forEach:function(a,c){return a.then(function(a){return b("Promise").resolve(c(a)).then(function(){return a})})},forEachError:function(a,c){return a.then(void 0,function(a){return b("Promise").resolve(c(a)).then(function(){throw a})})},iterateUntil:function(a,c){var d=function d(e){return c(e)?b("Promise").resolve(e):b("Promise").resolve(a(e)).then(d)};return d},pollUntilImpl:function(a,c){var d,e=new(b("Promise"))(function(b,e){var f=function(){try{var c=a();c&&b(c.value)}catch(a){e(a)}};d=setInterval(f,1e3*c)});return e["finally"](function(){return clearInterval(b("nullthrows")(d))})},pollUntil:function(a,b){b===void 0&&(b=1);return g.pollUntilImpl(function(){var b=a();return b?{value:b}:void 0},b)},rateLimit:function(a,b){var c=[],d=void 0,e=0;return function(){var f=b();for(var h=arguments.length,i=new Array(h),j=0;j<h;j++)i[j]=arguments[j];c=i;d||(d=g.wait(e+f-Date.now()/1e3).then(function(){e=Date.now()/1e3;d=void 0;return a.apply(void 0,c)}));return d}},rateLimitWithLastResult:function(a,c){var d=!1,e=void 0;return function(){d||(b("promiseDone")(g.wait(c()),function(){return d=!1}),e=a.apply(void 0,arguments),d=!0);return e}},repeatUntil:function(a,c){var d=function d(){return b("Promise").resolve(a()).then(function(a){return c(a)?b("Promise").resolve(a):d()})};return d},repeatWhileErrorUntil:function(a,c,d){var e=function e(){return b("Promise").resolve(a()).then(function(a){c(a);return b("Promise").resolve(a)},function(a){return d(a)?e():b("Promise").reject(a)})};return e},series:function(a,c){c=c;return a.reduce(function(a,b){return a.then(b)},b("Promise").resolve(c))},wait:function(a){return 0<a?new(b("Promise"))(function(b,c){return setTimeout(b,1e3*a)}):b("Promise").resolve()},waitAtMost:function(a,b){return g.waitOrElse(a,b,function(){throw new Error("Promise timed out")})},waitOrElse:function(a,c,d){var e=!1;return b("Promise").race([a.then(function(a){e=!0;return a},function(a){e=!0;throw a}),g.wait(c).then(function(){return e?void 0:d()})])}};e.exports=g},null);
__d("MessengerSearchWebGraphQLFetcher",["Promise","requireCond","Bootloader","CurrentUser","MercuryConfig","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLTypeaheadAdapter","MessengerSearchQueryWebGraphQLQuery","MessengerSearchSeeAllQueryWebGraphQLQuery","MessengerSearchWebGraphQLFetcherUtils","MessengerSecondarySearchFunnelConstants","MessengerUniversalSearchFunnelLoggerConstants","PromiseUtil","WebGraphQL","cr:998965","compactArray","gkx"],function(a,b,c,d,e,f){var g=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,h=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,i=b("MercuryConfig").SearchMorePeople?b("MercuryConfig").SearchMorePeople:2,j=5,k=3;a=function(){"use strict";function a(a,b){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$7="",this.$1=0,this.$2=0,this.$5=0,this.$6=a,this.$7=b}var c=a.prototype;c.fetchEntries=function(a,c,d,e,f){var g=this;c=b("MessengerSearchWebGraphQLFetcherUtils").formSearchRequests(c,a,d);var h=c.pages,i=c.profiles,j=c.rooms,k=c.messages;if(h.length>0){this.$8("pages",a);this.$2=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){return g.$9(b,a,e)},function(b){return g.$10(b,a,f)})()}if(i.length>0){this.$8("users_groups",a);this.$1=0;c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){g.$11(b,a,e)},function(b){return g.$12(b,a,f)})()}if(j.length>0){this.$8("rooms",a);this.$5=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$13(b,a,e)},function(b){return g.$14(b,a,f)})()}c=b("gkx")("975043");if(k.length>0&&c){this.$8("messages",a);this.$3=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$15(b,a,e)},function(b){return g.$16(b,a,f)})()}};c.fetchMSQEntries=function(a,c,d,e,f,g,h){var i=this;if(c>0){this.$3=0;var j=b("MessengerSearchWebGraphQLFetcherUtils").formMSQMessageSearchRequest(a,c);this.$8("messages",a);c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){i.$15(b,a,g)},function(b){return i.$16(b,a,h)})()}this.$4=0;var k=[];k.push(new(b("MessengerSearchQueryWebGraphQLQuery"))({query:a,num_users:d,num_groups:e,num_pages:f}));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return i.$17(b,a,g)},function(b){return i.$18(b,a,h)})()};c.fetchMSSAQEntries=function(a,c,d,e,f,g){var h=this;g===void 0&&(g=[]);this.$4=0;var i=[];switch(c){case"friend":case"non_friend":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"USER",limit:d}]}));break;case"thread":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"GROUP",limit:d}]}));break;case"page":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"PAGE",limit:d}]}));break}c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return h.$17(b,a,e)},function(b){return h.$18(b,a,f)})()};c.$17=function(a,c,d){var e=this;if(this.$6()!==c)return;a=a[0];a=a==null?void 0:(a=a.messenger_search)==null?void 0:(a=a.result_modules)==null?void 0:(a=a.nodes)==null?void 0:(a=a[0])==null?void 0:(a=a.search_results)==null?void 0:a.edges;var f=[],g=0;a!=null&&a.forEach(function(a){if(a.node&&a.node.__typename){var c=a.node.__typename;if(c==="User"){var d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}else if(c==="InstagramMessagingUser")f.push(b("MessengerGraphQLTypeaheadAdapter").convertIGMessagingUserToEntry(a.node));else if(c==="NeoApprovedUser"){d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}else if(c==="MessengerViewerGroupThread"){d=b("CurrentUser").getID();d=b("MessengerGraphQLTypeaheadAdapter").convertMSQGroupToEntry(a.node,g,d);d&&f.push(d);g++}else if(c==="Page"){d=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));d&&f.push(d)}}});d(f,"singleServerQuery");this.$20("single_server_query",c,f)};c.fetchWorkChatSingleQueryEntries=function(a,c,d,e){var f=this;if(b("cr:998965")==null)return;var g=[];g.push(b("cr:998965").formSearchRequests(a,c));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$21(b,a,d)},function(b){return f.$22(b,a,e)})()};c.$21=function(a,c,d){var e=this,f;a=a[0];if(this.$6()!==c)return;f=a==null?void 0:(f=a.entities_named)==null?void 0:f.user_group_results;var g=[],h=!1;h=!0;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f.edges;f.map(function(a,c){var d=a.node;if(d!=null&&d.is_group_thread!=null){c=b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(d,c);c&&g.push(c)}else{c=b("MessengerGraphQLTypeaheadAdapter").convertWorkChatProfileToEntry(d,h?a.subtext:null);c&&g.push(c)}})}f=a==null?void 0:(f=a.entities_named)==null?void 0:f.bot_results;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f==null?void 0:f.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}a=a==null?void 0:(f=a.entities_named)==null?void 0:f.vc_results;if(a!=null&&(a==null?void 0:a.edges)!=null&&(a==null?void 0:a.edges.length)>0){f=a==null?void 0:a.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}d(g,"singleServerQuery");this.$20("wc_single_server_query",c,g)};c.$15=function(a,c,d){a=a[0];if(this.$6()!==c)return;a=a==null?void 0:(a=a.entities_named)==null?void 0:(a=a.search_results)==null?void 0:a.edges;var e=[];a!=null&&a.forEach(function(a){a=b("MessengerGraphQLTypeaheadAdapter").convertMessageToEntry(a.node);a&&e.push(a)});d(e,"messages");this.$20("messages",c,e)};c.$13=function(a,c,d){if(this.$6()!==c)return;a=(a=a[0])!=null?(a=a.message_thread)!=null?(a=a.messaging_audience_list)!=null?a.nodes:a:a:a;if(a){a=b("compactArray")(a.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a)}));d(a,"usersGroups");this.$20("rooms",c,a)}};c.$11=function(a,c,d){if(this.$6()!==c)return;var e=[],f=[],g=!1;g=!0;for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;j=(j=j)!=null?(j=j.entities_named)!=null?(j=j.search_results)!=null?j.edges:j:j:j;j&&j.length>0&&j[0].node&&(j[0].node.is_group_thread!=null?e=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}):j[0].node.is_messenger_user!=null&&(f=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,g===!0?a.subtext:null)}),f=this.$23(b("compactArray")(f))))}j=b("compactArray")(f.concat(e));d(j,"usersGroups");this.$20("users_groups",c,j)};c.$23=function(a){var b=[],c=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(!g)continue;g.getType()==="friend"&&b.length<j?b.push(g):g.getType()==="non_friend"&&d.length<i?d.push(g):g.getType()==="fb4c"&&c.length<8&&c.push(g)}return b.concat(c,d)};c.$9=function(a,c,d){var e=this;if(this.$6()!==c)return;var f=[];for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;i=(i=i)!=null?(i=i.entities_named)!=null?(i=i.search_results)!=null?i.edges:i:i:i;i=i?i.map(function(a){a=a.node;return b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a,e.$19(a))}):[];f=f.concat(b("compactArray")(i.slice(0,5)))}d(f,"pages");this.$20("pages",c,f)};c.$19=function(a){if(!a||!a.category_type)return"page";if(a.category_type==="WORKPLACE_BOT")return"internal_bot_page";else if(a.category_type==="MEETING_ROOM")return"meeting_room_page";return"page"};c.$12=function(a,b,c){if(b===this.$6()){if(this.$1<k){this.$1+=1;return!0}c(a,"usersGroups")}return!1};c.$10=function(a,b,c){if(b===this.$6()){if(this.$2<k){this.$2+=1;return!0}c(a,"pages")}return!1};c.$16=function(a,b,c){if(b===this.$6()){if(this.$3<k){this.$3+=1;return!0}c(a,"messages")}return!1};c.$14=function(a,b,c){if(b===this.$6()){if(this.$5<k){this.$5+=1;return!0}c(a,"rooms")}return!1};c.$18=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$22=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$24=function(a){var c="";switch(a){case"users_groups":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_USERS_GROUPS;break;case"pages":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_PAGES;break;case"rooms":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_ROOMS;break;default:c=""}return c};c.$8=function(a,c){var d=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){var b=d.$24(a);e.logSourceStarted(c,b)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var e=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_STARTED,query:c,source:e,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};c.$20=function(a,c,d){var e=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(g){var f=e.$24(a);g.logSourceEnded(c,f,d.length,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,e.$6()===c)},"MessengerSearchWebGraphQLFetcher"),b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(b){b.logImpressions(c,a,d)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var f=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,query:c,source:f,ids:d.map(function(a){return a.getUniqueID()}),status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};return a}();e.exports=a},null);
__d("MercuryAttachmentSnippetType",["keyMirror"],function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a},null);
__d("MercuryGiftSnippetRenderer",["fbt"],function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a valentine."):g._("{name} sent a valentine.",[g._param("name",b)])}};e.exports=a},null);
__d("P2PSnippetStringUtils",["fbt"],function(a,b,c,d,e,f,g){a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was canceled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,b,c,d,e,f){a=a||1;b=[b,c,d,e,f];switch(a){case 2:return this.getRequestDeclinedSnippet.apply(this,b);case 5:case 6:return this.getRequestCanceledSnippet.apply(this,b)}return this.getRequestSentSnippet.apply(this,b)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your {amount} payment to {receiver_name} was canceled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s {amount} payment was canceled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your {amount} payment.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s {amount} payment.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {receiver name} {amount}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent you {amount}.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {receiver name} {amount}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,b,c,d,e,f){b=[b,c,d,e,f];c=a||15;switch(c){case 5:return this.getTransferDeclinedSnippet.apply(this,b);case 3:case 10:case 11:case 12:case 16:return this.getTransferCanceledSnippet.apply(this,b)}return this.getTransferSentSnippet.apply(this,b)}};e.exports=a},null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants"],function(a,b,c,d,e,f,g){"use strict";a={getAttachmentSnippetType:function(a){if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}if(e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0]))return b("MessengerLightweightActionUtils").getLWASnippetText(e);return e&&e.length===1&&this._isGloballyRemovedMessageAttachment(e[0])?e[0].share.description:c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").MIXED:return c?g._("You sent some attachments."):g._("{sender name} sent some attachments.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_isGloballyRemovedMessageAttachment:function(a){return a.share&&a.share.style_list&&a.share.style_list.includes("globally_deleted_message_placeholder")},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type==="third_party_sticker"},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type==="video"},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,"business_message_items")},_hasSticker:function(a){return a.length===1&&a[0].attach_type==="sticker"},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_location")},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_live_location")},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,"montage_direct")},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion")},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion_request")},_hasSingleShareAttachmentOfStyle:function(a,b){return a.length===1&&a[0].attach_type==="share"&&a[0].share&&a[0].share.style_list.indexOf(b)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type==="share"},_hasError:function(a){return a.length===1&&a[0].attach_type==="error"},_hasGift:function(a){return a.length===1&&a[0].attach_type==="gift"},_hasFile:function(a){return a.length===1&&a[0].attach_type==="file"},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="photo"})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="animated_image"})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a},null);