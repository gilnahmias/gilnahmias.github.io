if (self.CavalryLogger) { CavalryLogger.start_js(["lq3RX"]); }

__d("PixelRatioConst",[],function(a,b,c,d,e,f){e.exports={cookieName:"dpr"}},null);
__d("WorkGalahadNavGroupMetaMenu_group.graphql",[],function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"WorkGalahadNavGroupMetaMenu_group",type:"Group",metadata:null,argumentDefinitions:[],selections:[a,{kind:"ScalarField",alias:null,name:"has_viewer_favorited",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_member",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"secondary_subscribe_status",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"work_groups_sync_metadata",storageKey:null,args:null,concreteType:"GroupsSyncMetadata",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_group",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a]}]}]}}();e.exports=a},null);
__d("WorkGalahadGroupNotificationSettingsDialogQuery$Parameters",[],function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{operationKind:"query",name:"WorkGalahadGroupNotificationSettingsDialogQuery",id:"3088856387805345",text:null,metadata:{relayPreloadable:!0}}};e.exports=a},null);
__d("XBrowserPushDisabledController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/disabled/",{})},null);
__d("XBrowserPushXOutController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/xout/",{})},null);
__d("XServiceWorkerSessionChangeController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/service_workers/session/persist/",{})},null);
__d("BrowserPushSessionChange.react",["fbt","ix","AsyncRequest","BanzaiLogger","Image.react","ImageBlock.react","LayerFadeOnHide","React","ReloadPage","XBrowserPushDisabledController","XBrowserPushXOutController","XServiceWorkerSessionChangeController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cxMargin","prop-types"],function(a,b,c,d,e,f,g,h){var i=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={dialogShown:!0,spin:!1},d.$1=function(a){if(a)return;d.setState({dialogShown:!1});d.$2("session_keep");a=b("XServiceWorkerSessionChangeController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setData({app_id:d.props.push.appID}).setAllowCrossPageTransition(!0).setHandler(function(a){d.props.onHide()}).send()},d.$3=function(){d.setState({spin:!0});d.$2("session_uninstall");d.$2("xout");var a=b("XBrowserPushXOutController").getURIBuilder().getURI(),c=function(){d.props.push.unregisterPushAndSW(b("XBrowserPushDisabledController"),b("AsyncRequest")).done(function(a){b("ReloadPage").now()})};new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(c).setAllowCrossPageTransition(!0).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){a={event:a,appid:this.props.push.appID,surface:"session_change"};b("BanzaiLogger").log("BrowserPushLoggerConfig",a)};d.componentDidMount=function(){this.$2("session_change_prompt")};d.render=function(){if(!this.state.dialogShown)return null;var a=h("92724");return i.jsxs(b("XUIDialog.react"),{shown:!0,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.$1,width:445,children:[i.jsx(b("XUIDialogTitle.react"),{children:g._("Desktop Notifications Are On")}),i.jsx(b("XUIDialogBody.react"),{children:this.state.spin?i.jsx(b("XUISpinner.react"),{size:"large"}):i.jsxs(b("ImageBlock.react"),{spacing:"medium",children:[i.jsx(b("Image.react"),{src:a,alt:g._("Desktop Notifications Are On")}),i.jsxs("div",{children:[i.jsx("div",{className:"_3-8h",children:i.jsx(b("XUIText.react"),{size:"header3",children:g._("When you get a new notification, you'll see it in the corner of your screen.")})}),i.jsx("div",{className:"_3-8h",children:i.jsx(b("XUIText.react"),{size:"meta1",children:g._("To be sure you get notifications, you'll now stay logged into Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")})})]})]})}),i.jsxs(b("XUIDialogFooter.react"),{children:[i.jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Undo"),onClick:this.$3}),i.jsx(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})]})]},"dialog")};return c}(i.Component);a.propTypes={onHide:b("prop-types").func.isRequired,push:b("prop-types").object.isRequired};e.exports=a},null);
__d("MockChromeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?j.jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=!this.props.image&&b("CurrentUser").isWorkUser(),d=this.props.image?this.props.image:this.props.defaultImage;return j.jsxs("section",{className:b("joinClasses")(this.props.className,"_257o"),children:[j.jsx("span",{className:"_61kd"}),j.jsx(b("Image.react"),{className:(c?"":"_ega")+(c?" _2rk4":""),draggable:!1,src:d}),j.jsxs("div",{className:"_egb",children:[j.jsx("h3",{children:b("BrowserPushStrings").title}),j.jsx("p",{children:a}),j.jsx("cite",{children:window.location.hostname})]})]})};return c}(j.Component);a.defaultProps={message:h._("You have new notifications."),defaultImage:b("CurrentUser").isWorkUser()?i("351290"):i("76304")};e.exports=a},null);
__d("MockEdgeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?j.jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=h._("Microsoft Edge");return j.jsxs("section",{className:b("joinClasses")(this.props.className,"_2eed"),children:[j.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_2eee")+(b("CurrentUser").isWorkUser()?" _3_qv":""),draggable:!1,src:this.props.image}),j.jsxs("div",{className:"_2eef",children:[j.jsx("h3",{className:"_2eeg",children:b("BrowserPushStrings").title}),j.jsx("p",{className:"_2eeh",children:a}),j.jsxs("div",{className:"_2eei",children:[c," \xb7 ",window.location.hostname]})]})]})};return c}(j.Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137")};e.exports=a},null);
__d("MockFirefoxBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?j.jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=this.props.isWindows;return j.jsx("section",{className:b("joinClasses")(this.props.className,"_g5o"),children:c?this.$1(a):this.$2(a)})};d.$2=function(a){return j.jsxs("div",{className:"_g5p",children:[j.jsx("div",{className:"_g5q",children:j.jsx(b("Image.react"),{draggable:!1,src:i("355144")})}),j.jsxs("div",{className:"_g5r",children:[j.jsx("h3",{children:b("BrowserPushStrings").title}),j.jsx("cite",{children:window.location.hostname}),j.jsx("p",{children:a})]}),j.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image})]})};d.$1=function(a){return j.jsxs("div",{className:"_g5w",children:[j.jsx("h3",{children:b("BrowserPushStrings").title}),j.jsxs("div",{className:"_g5x",children:[j.jsx("span",{className:"_g5z"}),j.jsx("span",{className:"_g7w"})]}),j.jsxs("div",{className:"_g5r",children:[j.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image}),j.jsxs("div",{className:"_g7x",children:[j.jsx("p",{children:a}),j.jsx("cite",{children:window.location.hostname})]})]})]})};return c}(j.Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137"),isWindows:!1};e.exports=a},null);
__d("MockBrowserNotification.react",["MockChromeBrowserNotification.react","MockEdgeBrowserNotification.react","MockFirefoxBrowserNotification.react","React","UserAgent"],function(a,b,c,d,e,f){"use strict";var g=b("React");e.exports=function(a){var c=b("UserAgent").isPlatform("Windows");if(b("UserAgent").isBrowser("Firefox"))return g.jsx(b("MockFirefoxBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}));else if(b("UserAgent").isBrowser("Edge"))return g.jsx(b("MockEdgeBrowserNotification.react"),babelHelpers["extends"]({},a));return g.jsx(b("MockChromeBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}))}},null);
__d("NotificationPermissionDummyRequest.react",["fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=[g._("Get Instant Updates From Your Friends")],c=[g._("Turn on browser notifications to stay up-to-date on Facebook.")],d=this.props.promptTitleIndex<a.length?this.props.promptTitleIndex:0,e=this.props.promptBodyIndex<c.length?this.props.promptBodyIndex:0;return h.jsxs(b("XUIDialog.react"),{isStrictlyControlled:!0,onHide:this.props.isBinary?function(){}:this.props.onIgnore,shown:!0,width:445,children:[h.jsx(b("XUIDialogTitle.react"),{showCloseButton:!this.props.isBinary,children:h.jsx("span",{children:a[d]})}),h.jsxs(b("XUIDialogBody.react"),{children:[h.jsx("br",{}),h.jsx("div",{children:c[e]}),h.jsx("br",{})]}),h.jsxs(b("XUIDialogFooter.react"),{children:[h.jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Not Now"),onClick:this.props.onNotNow,size:"large"}),h.jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Ok"),onClick:this.props.onAccept,use:"confirm",size:"large"})]})]})};return c}(h.Component);e.exports=a},null);
__d("NotificationPermissionNotice.react",["cx","fbt","Event","Keys","React","XUIAmbientNUX.react","prop-types"],function(a,b,c,d,e,f,g,h){var i=b("React"),j=[];a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;j.push(b("Event").listen(window,"mousedown",this.props.onHide));j.push(b("Event").listen(window,"keydown",function(c){c.keyCode===b("Keys").ESC&&a.props.onHide()}))};d.componentWillUnmount=function(){while(j.length>0){var a=j.pop();a.remove()}};d.renderLayers=function(){var a=this,c=this.props.shortText?h._("Click the lock to give {browser_name} permission to send you desktop notifications.",[h._param("browser_name",this.props.browserName)]):h._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[h._param("browser_name",this.props.browserName)]);return i.jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.noticeAnchor},shown:!0,position:"below",onCloseButtonClick:this.props.onHide,children:c},"nux")};d.render=function(){return i.jsxs("span",{children:[i.jsx("span",{ref:"noticeAnchor",className:"_1_i1"}),this.renderLayers()]})};return c}(i.Component);a.propTypes={onHide:b("prop-types").func.isRequired,shortText:b("prop-types").bool,browserName:b("prop-types").string.isRequired};e.exports=a},null);
__d("NotificationPermissionRequest.react",["cx","React","Spotlight.react","prop-types"],function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("Spotlight.react"),{shown:!0,onHide:this.props.onHide,children:h.jsx("div",{className:"_n3"})},"spotlight")};return c}(h.Component);a.propTypes={onHide:b("prop-types").func};e.exports=a},null);
__d("NotificationPermissionRequestWithPreview.react",["cx","fbt","ix","BrowserPushStrings","Image.react","ImageBlock.react","MockBrowserNotification.react","React","Spotlight.react","XUIAmbientNUX.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=function(a){var c;return j.jsxs(b("Spotlight.react"),{onHide:a.onHide,shown:a.shown,wash:"xui",children:[j.jsx("span",{ref:function(a){return c=a},className:"_m4w"}),j.jsx("div",{className:"_n3",children:j.jsxs(b("XUIAmbientNUX.react"),{contextRef:function(){return c},shown:a.shown,onCloseButtonClick:a.onHide,position:"below",children:[j.jsx("strong",{children:h._("Almost Done!")}),j.jsx("br",{}),h._("Now, click \"Allow\" to finish activating notifications.")]},"nux")})]})};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={acceptPromptShown:!1,dialogShown:!0,spinnerShown:!1},c.$2=function(a){c.setState({dialogShown:a})},c.$3=function(){c.setState({acceptPromptShown:!c.props.hideSecondStep&&!c.props.showSpinnerWhileRequesting,dialogShown:c.props.showSpinnerWhileRequesting,spinnerShown:!c.props.hideSecondStep&&c.props.showSpinnerWhileRequesting}),c.props.onAccept&&c.props.onAccept(c.$4)},c.$4=function(){c.$1&&c.setState({acceptPromptShown:!1,dialogShown:!1})},c.$5=function(){c.setState({acceptPromptShown:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this.props,c=a.notificationImage;a=a.notificationMessage;c=j.jsx(b("MockBrowserNotification.react"),{className:"_m4x",image:c,message:a});a=this.state.spinnerShown?j.jsx(b("XUIDialogBody.react"),{className:"_mjv",children:j.jsxs(b("ImageBlock.react"),{spacing:"large",children:[j.jsx(b("Image.react"),{draggable:!1,src:i("287648"),width:40,height:40,className:"_mjw"}),j.jsxs("div",{children:[j.jsx("strong",{children:h._("Almost Done!")}),j.jsx("p",{className:"_mjx",children:h._("Now, click \"Allow\" to finish activating notifications.")})]})]})}):j.jsxs(b("XUIDialogBody.react"),{className:"_mjy",children:[j.jsxs(b("ImageBlock.react"),{spacing:"large",children:[j.jsx(b("Image.react"),{draggable:!1,src:i("287648"),className:"_mjw"}),j.jsx("div",{children:this.props.isWebNotifications?b("BrowserPushStrings").explanation_web_notifications:b("BrowserPushStrings").explanation})]}),c]});c=this.state.spinnerShown?null:j.jsxs(b("XUIDialogFooter.react"),{children:[j.jsx(b("XUIDialogButton.react"),{action:"cancel",label:h._("Not Now"),onClick:this.props.onClose}),j.jsx(b("XUIDialogButton.react"),{action:"button",label:h._("Turn On"),onClick:this.$3,use:"special"})]});return j.jsxs("div",{className:"_m4y",children:[j.jsxs(b("XUIDialog.react"),{layerHideOnBlur:!1,onToggle:this.$2,shown:this.state.dialogShown,titleID:"notification-permission-title",width:445,children:[j.jsx(b("XUIDialogTitle.react"),{showCloseButton:!1,children:j.jsx("span",{id:"notification-permission-title",children:b("BrowserPushStrings").turn_on})}),a,c]}),j.jsx(k,{shown:this.state.acceptPromptShown,onHide:this.$5})]})};return c}(j.Component);e.exports=a},null);
__d("WaterfallMessageLifetimeTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAttemptID=function(a){this.$1.attempt_id=a;return this};c.setDestService=function(a){this.$1.dest_service=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setIsBatch=function(a){this.$1.is_batch=a;return this};c.setIsGroup=function(a){this.$1.is_group=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setOfflineThreadingID=function(a){this.$1.offline_threading_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPushNotifID=function(a){this.$1.push_notif_id=a;return this};c.setReceiptID=function(a){this.$1.receipt_id=a;return this};c.setSenderID=function(a){this.$1.sender_id=a;return this};c.setServiceName=function(a){this.$1.service_name=a;return this};c.setSrcService=function(a){this.$1.src_service=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeStamp=function(a){this.$1.time_stamp=a;return this};c.setTopic=function(a){this.$1.topic=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={attempt_id:!0,dest_service:!0,device_id:!0,event_type:!0,is_batch:!0,is_group:!0,message_id:!0,offline_threading_id:!0,page_id:!0,push_notif_id:!0,receipt_id:!0,sender_id:!0,service_name:!0,src_service:!0,thread_id:!0,time:!0,time_stamp:!0,topic:!0,weight:!0};e.exports=a},null);
__d("WorkQuickChatTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActionType=function(a){this.$1.action_type=a;return this};c.setLocation=function(a){this.$1.location=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action_type:!0,location:!0,message_id:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a},null);
__d("MercurySyncResnapshot",["Promise","Bootloader","MercurySingletonProvider"],function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.resnapshot=function(){var a=this;this.$1||(this.$1=new(b("Promise"))(function(c,d){b("Bootloader").loadModules(["MercurySyncDeltaHandler"],function(b){b.getForFBID(a.$2).emergencyDFF(function(b){c(b),a.$1=null},function(){d(),a.$1=null})},"MercurySyncResnapshot")}));return this.$1};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a},null);
__d("MessageWaterfallLogger",["MqttEnv","WaterfallMessageLifetimeTypedLogger"],function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;a={logNewMessageToWaterfall:function(a){var c=a.senderID,d=a.receiptID,e=a.messageID,f=a.offlineThreadingID,i=a.threadID,j=a.irisSeqId;a=a.isGroup;if(!g.genGk(h.mqtt_waterfall_log_client_sampling))return;new(b("WaterfallMessageLifetimeTypedLogger"))().setEventType("message_receive_ws").setSrcService("mqtt").setDestService("webclient").setSenderID(c).setReceiptID(d).setMessageID(e).setOfflineThreadingID(f).setThreadID(i).setIsGroup(a?1:0).addToExtraData("sync_seq_id",j).log()}};e.exports=a},null);
__d("MessengerMQTTPayloadPreprocessor",[],function(a,b,c,d,e,f){"use strict";a={process:function(a,b,c){var d=parseInt(c.irisSeqId.toString(),10);return{seqID:d,obj:{queue:a,iseq:d,delta:c,seqID:d,type:b}}}};e.exports=a},null);
__d("MessengerMQTTPresenceReporting",["BanzaiODS","FBMqttChannel","InstantGamesPresenceProperties","MercuryConfig","gkx"],function(a,b,c,d,e,f){"use strict";var g="mqtt_web.presence",h="/foreground_state",i="/set_client_settings",j="/send_endpoint_capabilities",k=16384,l=2097152,m=b("MercuryConfig").idle_limit||18e5;a=b("MercuryConfig").idle_poll_interval||3e5;c=60*1e3;var n=b("gkx")("1166607")?!1:document.hasFocus(),o,p=Date.now(),q=!1;d={init:function(){},reportForegroundState:function(a,c){(n!==a||c)&&(n=a,b("FBMqttChannel").setForegroundState(a),b("FBMqttChannel").publish(h,JSON.stringify({foreground:a})),b("BanzaiODS").bumpEntityKey(2966,g,a?"report.foregrounded":"report.backgrounded"))},reportChatVisibility:function(a){(o===void 0||o!=a)&&(o=a,b("FBMqttChannel").setChatVisibility(a),b("FBMqttChannel").publish(i,JSON.stringify({make_user_available_when_in_foreground:a})),b("BanzaiODS").bumpEntityKey(2966,g,a?"report.chat_visibility.on":"report.chat_visibility.off"))},reportWorkchatDesktopCapability:function(){var a=b("FBMqttChannel").getEndpointCapabilities();a|=k;b("FBMqttChannel").setEndpointCapabilities(a);b("FBMqttChannel").publish(j,JSON.stringify({endpoint_capabilities:a}))},reportInstantGamesPresence:function(a){var c=b("FBMqttChannel").getEndpointCapabilities();a?c|=l:c&=~l;b("FBMqttChannel").setEndpointCapabilities(c);b("FBMqttChannel").publish(j,JSON.stringify({endpoint_capabilities:c}))},onUserActivity:function(){p=Date.now(),e.exports.reportForegroundState(!0,!1)}};window.setInterval(function(){!document.hasFocus()&&Date.now()-p>m&&e.exports.reportForegroundState(!1,!0)},a);window.setInterval(function(){var a=b("InstantGamesPresenceProperties").isActiveGamePresence();q!==a&&(e.exports.reportInstantGamesPresence(a),q=a)},c);e.exports=d},null);
__d("MessengerMQTTPresenceActivity",["CurrentUser","Event","MessengerMQTTPresenceReporting","Run","UserActivity"],function(a,b,c,d,e,f){a={init:function(){b("Event").listen(window,"focus",function(){b("MessengerMQTTPresenceReporting").onUserActivity()}),b("Event").listen(window,"blur",function(){b("MessengerMQTTPresenceReporting").reportForegroundState(!1,!1)}),b("Run").onBeforeUnload(function(){b("MessengerMQTTPresenceReporting").reportForegroundState(!1,!0)},!1),b("UserActivity").subscribe(function(){b("MessengerMQTTPresenceReporting").onUserActivity()}),b("CurrentUser").isWorkUser()&&d(["WorkplaceChatHelper"],function(a){a.isDesktopChatApp()&&b("MessengerMQTTPresenceReporting").reportWorkchatDesktopCapability()})}};e.exports=a},null);
__d("MessengerMQTTTypingDataPreProcessor",[],function(a,b,c,d,e,f){"use strict";a={process:function(a,b){var c=b.thread;a=c==null?{from:b.sender_fbid,st:b.state,to:a,type:"typ"}:{from:b.sender_fbid,st:b.state,thread:c,thread_fbid:c,type:"ttyp"};return{obj:a}}};e.exports=a},null);
__d("SyncProtocolClient",["Int64","MercurySingletonProvider","MqttEnv","SyncProtocolConstants","exponentialBackoff"],function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env;a=function(){a.getForFBID=function(a){return h.getForFBID(a)};function a(a){var c=this;this.$1=a;this.$2=[];this.$5=g.getLoggerInstance();this.$10=new(b("exponentialBackoff"))(function(){return c.$11()},this)}var c=a.prototype;c.getPublishMessages=function(){return this.$12()};c.init=function(a,c,d,e){var f=this;if(!c&&!e){this.$5.bumpCounter("sp_init_invalid_parameter");return this}this.$9=a;this.$8=!0;this.$3=c?b("Int64").fromString(c):null;this.$6=d;this.$7=e;this.$4=null;this.$9.subscribe("/t_ms",function(a){return f.$13(a)});this.$9.subscribe("/thread_typing",function(a){f.$14(a)});this.$9.subscribe("/orca_typing_notifications",function(a){f.$14(a)});this.$9.subscribe("/notify_disconnect",function(a){return f.$15(a)});this.connectToIris();return this};c.connectToIris=function(a){a===void 0&&(a=null),a!==null&&(this.$3=b("Int64").fromString(a)),this.$8=!0,this.$9.registerExtraConnectPayloadProvider(this)};c.$12=function(){var a;if(this.$4){if(!this.$3){this.$5.bumpCounter("connect_payload_iris_no_seq_id");return[]}a=this.$16()}else a=this.$17();this.$5.debugTrace("Sending request with MQTT Connect",JSON.stringify({topic:a.topic,payload:a.payload}));return[a]};c.$11=function(){var a;if(this.$4){if(!this.$3){this.$5.bumpCounter("subscribe_to_iris_no_seq_id");return}a=this.$16()}else a=this.$17();this.$5.debugTrace("Sending request",JSON.stringify({topic:a.topic,payload:a.payload}));this.$9.publish(a.topic,a.payload,{qos:1,skipBuffer:!0})};c.$18=function(a){var b=null;try{b=JSON.parse(a)}catch(a){this.$5.logError(a,"Unable to process data")}return b};c.$14=function(a){var b=this.$18(a);if(b==null){this.$5.logWarn("_processTypingData","Unable to process typing data");return}this.$2.forEach(function(a){typeof a.onTypingReceived==="function"&&a.onTypingReceived(b)})};c.addDeltaStreamListener=function(a){this.$2.push(a)};c.$15=function(a){this.$5.logWarn("_handleNotifyDisconnect","Disconnecting reason: "+a),this.$5.bumpCounter("notify_disconnect_"+a),a===b("SyncProtocolConstants").IRIS_CURSOR_LIMIT&&this.$19(a)};c.$19=function(a){this.$5.bumpCounter(a+"_request"),this.$4=null,this.$8=!1,this.$9.unregisterExtraConnectPayloadProvider(this),this.$2.forEach(function(b){return b.onStreamDisconnect(a)})};c.$13=function(a){a=this.$18(a);if(a==null){this.$5.logWarn("_processDeltas","Unable to process delta");return}var b={syncToken:a.syncToken,entityId:a.queueEntityId,errorCode:a.errorCode,firstSeqId:a.firstDeltaSeqId,lastSeqId:a.lastIssuedSeqId};this.$5.debugTrace("Sync data received",JSON.stringify(b));b=this.$1;a.queueEntityId!=null&&a.queueEntityId!=b?this.$5.bumpCounter("delta_for_other_fbid"):a.syncToken?this.$20(a):a.queueEntityId==null?this.$5.bumpCounter("no_fbid"):a.errorCode?this.$21(a.errorCode):this.$22(a)};c.$21=function(a){this.$5.bumpCounter("iris_queue_error."+a),this.$5.logWarn("_handleIrisError","Recevied an error code from sync protocol "+a),a==="ERROR_QUEUE_TEMPORARY_NOT_AVAILABLE"?this.$10():this.$19(a)};c.$20=function(a){var c=this,d=b("Int64").fromString(a.firstDeltaSeqId.toString());(this.$3===null||this.$3!=null&&!this.$3.equals(d))&&this.$5.bumpCounter("initial_sequence_id_mismatch");this.$4=a.syncToken;this.$3=d;this.$5.debugTrace("Sync token received",JSON.stringify({token:this.$4}));this.$9.subscribeChannelEvents({onMQTTStateChanged:function(a){a==="Connected"&&c.$10.reset()}})};c.$22=function(a){var c=a.deltas,d=this.$3;if(c&&d){var e=b("Int64").fromString(a.firstDeltaSeqId.toString());a=b("Int64").fromString(a.lastIssuedSeqId.toString());e.equals(d.add(b("Int64").ONE))?this.$23(e,a,c):e.compare(d)<0?(this.$5.bumpCounter("delta_batch_in_middle"),a.compare(d)>0&&this.$23(d.add(b("Int64").ONE),a,c)):(this.$5.bumpCounter("missing_deltas_get_diffs"),this.$11())}else this.$5.bumpCounter("process_deltas_invalid_state")};c.$23=function(a,c,d){a=a;for(var e=0;e<d.length;e++){var f=d[e],g=f["class"]||"Missing",h={seqId:a.toString(),type:g,status:""},i=1;if(g!="Missing")try{i=this.$24(f,g,a,h)}catch(a){h.status="err:"+a.message}else h.status="no type",this.$5.bumpCounter("missing_delta_type");this.$5.debugTrace("onDeltaReceived",JSON.stringify(h));a=a.add(b("Int64").fromInt(i))}this.$3=c};c.$24=function(a,c,d,e){var f=1,g="";c==="NoOp"&&(f=a.numNoOps||f,g+="n:"+f);a.irisSeqId||(a.irisSeqId=d.toString(),g+="missing seq id");var h=b("Int64").fromString(a.irisSeqId.toString())||d;h.equals(d)?g+=" seqId match":(g+=" seqId mismatch",this.$5.bumpCounter("seq_id_running_id_mismatch"));var i={type:c,payload:a};this.$2.forEach(function(a){return a.onDeltaReceived(i)});e.status=g;return f};c.$17=function(){var a={sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,initial_titan_sequence_id:this.$3&&this.$3.toString(),device_params:this.$6,queue_position:this.$7};return{topic:"/messenger_sync_create_queue",payload:JSON.stringify(a),qos:1}};c.$16=function(){var a={sync_token:this.$4,sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,last_seq_id:this.$3&&this.$3.toString()};return{topic:"/messenger_sync_get_diffs",payload:JSON.stringify(a),qos:1}};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a},null);
__d("MessengerMQTTConnection",["requireCond","Arbiter","CurrentUser","FBMqttChannel","MercurySingletonProvider","MercurySyncResnapshot","MessageWaterfallLogger","MessengerMQTTConnectionEvents","MessengerMQTTPayloadPreprocessor","cr:1177633","MessengerMQTTTypingDataPreProcessor","MqttLogger","PresenceStatus","SyncProtocolClient","SyncProtocolConstants","gkx","promiseDone"],function(a,b,c,d,e,f){"use strict";var g=(a=b("MessengerMQTTConnectionEvents")).DELTA_EVENT,h=a.STREAM_CONNECT,i=a.STREAM_DISCONNECT,j=a.STREAM_CONNECTING,k=a.STATE_CONNECTING,l=a.STATE_DISCONNECTED,m=a.TYP;c=function(){a.getForFBID=function(a){return n.getForFBID(a)};a.get=function(){return n.get()};function a(a){this.$1=a,this.$2=b("MqttLogger").getInstance()}a.setUp=function(c){var e=c.fbid,f=c.irisSeqID;c.appID;c.endpoint;if(!e||!f)return;var g=b("MqttLogger").getInstance();if(!b("CurrentUser").isLoggedInNow()){g.debugTrace("run","User not logged in");g.bumpCounter("user_not_loggged_in");return}var h=a.getForFBID(e);a.addDeltaStream({fbid:e,irisSeqID:f});h.$3(b("FBMqttChannel").getConnectionState(),b("FBMqttChannel").getLongPollingStatus());b("FBMqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){h.$3(a,b("FBMqttChannel").getLongPollingStatus())},onJSError:function(a){g.bumpCounter("mqtt_js_error")}});b("cr:1177633")!=null&&b("cr:1177633").subscribe(b("PresenceStatus"));d(["MessengerMQTTPresenceActivity"],function(a){a.init()})};a.addDeltaStream=function(c){var d=c.fbid;c=c.irisSeqID;var e=a.getForFBID(d),f=null;b("gkx")("687751")&&(f={accept_pending_deltas:!0});b("SyncProtocolClient").getForFBID(d).init(b("FBMqttChannel"),c,f).addDeltaStreamListener(e)};var c=a.prototype;c.onDeltaReceived=function(a){var c=a.type;a=a.payload;try{c=="NewMessage"&&b("MessageWaterfallLogger").logNewMessageToWaterfall({senderID:a.messageMetadata.actorFbId,receiptID:this.$1,messageID:a.messageMetadata.messageId,offlineThreadingID:a.messageMetadata.offlineThreadingId,threadID:a.messageMetadata.threadKey.threadFbId!=null?a.messageMetadata.threadKey.threadFbId:"",irisSeqId:a.irisSeqId,isGroup:a.messageMetadata.threadKey.threadFbId!=null})}catch(a){this.$2.logError(a,"Unable to log to waterfall")}c=b("MessengerMQTTPayloadPreprocessor").process(this.$1,c,a);b("Arbiter").inform(g,c)};c.onStreamDisconnect=function(a){var c=this;if(a==="ERROR_QUEUE_LOST"||a==="ERROR_QUEUE_NOT_FOUND"||a==="ERROR_QUEUE_EXCEEDS_MAX_DELTAS"||a==="ERROR_QUEUE_UNDERFLOW"||a==="ERROR_QUEUE_OVERFLOW"){b("promiseDone")(b("MercurySyncResnapshot").getForFBID(this.$1).resnapshot().then(function(a){if(a)b("SyncProtocolClient").getForFBID(c.$1).connectToIris(a.toString());else throw new Error("No seqID returned from resnapshot")}),null,function(){b("Arbiter").inform(i,b("SyncProtocolConstants").SNAPSHOT_FAILURE)});return}a!==b("SyncProtocolConstants").IRIS_CURSOR_LIMIT&&this.$2.bumpCounter("unhandled_iris_error."+a);b("Arbiter").inform(i,a)};c.onTypingReceived=function(a){a=b("MessengerMQTTTypingDataPreProcessor").process(this.$1,a);b("Arbiter").inform(m,a)};c.$3=function(a,c){if(a=="Connected"||c=="LPActive"){b("Arbiter").inform(h);return}switch(a){case k:b("Arbiter").inform(j);break;case l:b("Arbiter").inform(i);break}};return a}();var n=new(b("MercurySingletonProvider"))(c);e.exports=c},null);
__d("MessengerMQTTPresence",["BanzaiODS","FBMqttChannel"],function(a,b,c,d,e,f){"use strict";var g="/orca_presence",h="mqtt_web.presence",i="/send_additional_contacts",j=!1;a={subscribe:function(a){if(j)return;j=!0;b("FBMqttChannel").subscribe(g,function(c){c=JSON.parse(c);c&&c.list&&(c.list_type&&c.list_type==="full"&&a.reset(),a.setMultiFromMQTT(c.list),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.event"),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.active_buddies",c.list.length))})},unsubscribe:function(){j=!1,b("FBMqttChannel").unsubscribeAll(g)},sendAdditionalBuddyRequest:function(a){b("FBMqttChannel").publish(i,JSON.stringify({additional_contacts:[a]}))}};e.exports=a},null);
__d("WebPixelRatioDetector",["Cookie","DOMEventListener","PixelRatioConst","Run"],function(a,b,c,d,e,f){"use strict";var g=b("PixelRatioConst").cookieName,h=!1,i=!1,j=!1;function k(){return window.devicePixelRatio||1}function l(){b("Cookie").set(g,String(k()))}function m(){b("Cookie").clear(g)}function n(){if(i)return;i=!0;j&&m();k()!==1?l():m()}a={startDetecting:function(a){a&&(j=!0);if(h)return;h=!0;"onpagehide"in window&&b("DOMEventListener").add(window,"pagehide",n);b("Run").onBeforeUnload(n,!1)}};e.exports=a},null);
__d("WorkGalahadGroupNotificationSettingsDialog.entrypoint",["JSResource","WorkGalahadGroupNotificationSettingsDialogQuery$Parameters"],function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){a=a.groupID;return{queries:{queryReference:{parameters:b("WorkGalahadGroupNotificationSettingsDialogQuery$Parameters"),variables:{groupID:a}}}}},root:b("JSResource")("WorkGalahadGroupNotificationSettingsDialog.react").__setRef("WorkGalahadGroupNotificationSettingsDialog.entrypoint")};e.exports=a},null);
__d("WorkGalahadNotificationSettingsMenuItem.react",["fbt","React","WIGDropdownMenuItem.react","WorkGalahadGroupNotificationSettingsDialog.entrypoint","useWIGEntryPointDialog"],function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.groupID;a=b("useWIGEntryPointDialog")(b("WorkGalahadGroupNotificationSettingsDialog.entrypoint"),{groupID:a});var c=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"notifications",label:g._("Edit Group Notifications"),onClick:function(){c({})}})}e.exports=a},null);
__d("WorkGalahadQuickChatMenuItem.react",["fbt","React","WIGDropdownMenuItem.react","WorkGalahadQuickChatActions","WorkQuickChatTypedLogger"],function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useCallback;function a(a){var c=a.threadID;a=i(function(){new(b("WorkQuickChatTypedLogger"))().setThreadID(c).setActionType("OPEN").setLocation("CHANNEL").log(),b("WorkGalahadQuickChatActions").openThreadID(c)},[c]);return h.jsx(b("WIGDropdownMenuItem.react"),{id:"quickchat",icons:"square_corner_bottom_right_box",label:g._("Open Chat Window"),desc:g._("Chat while you use Workplace"),onClick:a})}e.exports=a},null);
__d("XGroupsLeaveRequestDialogAsyncController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/groups/membership/leave/",{group_id:{type:"FBID",required:!0},prevent_readd:{type:"Bool",defaultValue:!1},confirmed:{type:"Bool",defaultValue:!1},ref:{type:"Enum",enumType:1},u_id:{type:"String"},item_id:{type:"String"},__asyncDialog:{type:"Int"}})},null);
__d("WorkGalahadNavGroupMetaMenu.react",["fbt","MercuryIDs","React","RelayHooks","WIGDropdownMenu.react","WIGDropdownMenuItem.react","WorkGalahadActions","WorkGalahadDropdownMenuHelper","WorkGalahadNotificationSettingsMenuItem.react","WorkGalahadQuickChatMenuItem.react","WorkSeeFirstGroupsUsageTypedLogger","XGroupsLeaveRequestDialogAsyncController","gkx","nullthrows","WorkGalahadNavGroupMetaMenu_group.graphql"],function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");b("RelayHooks").graphql;var j=b("RelayHooks").useFragment,k=b("WorkGalahadActions").pinGroup,l=b("WorkGalahadActions").removeSeeFirstGroups,m=b("WorkGalahadActions").unpinGroup;function a(a){var c,d=a.group;a=a.label;d=j(h!==void 0?h:h=b("WorkGalahadNavGroupMetaMenu_group.graphql"),d);c=(c=d.work_groups_sync_metadata)==null?void 0:(c=c.messenger_group)==null?void 0:c.id;var e=b("nullthrows")(d.id),f=d.is_viewer_member===!0,n=d.has_viewer_favorited===!0;d=b("gkx")("1299281")&&d.secondary_subscribe_status==="SEE_FIRST";var o=[],p=[];f&&p.push(i.jsx(b("WorkGalahadNotificationSettingsMenuItem.react"),{groupID:e},"notifications"),i.jsx(b("WIGDropdownMenuItem.react"),{id:"leave",label:g._("Leave Group"),ajaxify:b("XGroupsLeaveRequestDialogAsyncController").getURIBuilder().setFBID("group_id",e).getURI(),rel:"dialog-post"},"leave"));d?p.push(i.jsx(b("WIGDropdownMenuItem.react"),{id:"removeSeeFirst",label:g._("Deprioritize Group"),onClick:function(){new(b("WorkSeeFirstGroupsUsageTypedLogger"))().setEvent("REMOVE_GROUP").setLocation("LEFT_NAV").setGroupID(e).log(),l([e])}},"removeSeeFirst")):b("gkx")("997564")||(n?p.push(i.jsx(b("WIGDropdownMenuItem.react"),{id:"unpin",label:g._("Remove from Shortcuts"),onClick:function(){return m(e)}},"unpin")):f&&p.push(i.jsx(b("WIGDropdownMenuItem.react"),{id:"pin",label:g._("Add to Shortcuts"),onClick:function(){return k(e)}},"pin")));p.length!==0&&o.push(p);if(c!=null&&!b("gkx")("997564")){d=b("MercuryIDs").getThreadIDFromThreadFBID(c);o.unshift([i.jsx(b("WorkGalahadQuickChatMenuItem.react"),{threadID:d},"quickChat")])}return i.jsx(b("WIGDropdownMenu.react"),{items:b("WorkGalahadDropdownMenuHelper").createItemsFromSections(o),label:a})}e.exports=a},null);
__d("WorkGalahadNavPersonMetaMenu.react",["React","WIGDropdownMenu.react","WorkGalahadQuickChatMenuItem.react"],function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.label;a=a.threadID;return g.jsx(b("WIGDropdownMenu.react"),{items:[g.jsx(b("WorkGalahadQuickChatMenuItem.react"),{threadID:a},"quickChat")],label:c})}e.exports=a},null);
__d("WorkGalahadNotificationListItemChevronMenu.react",["React","WIGDropdownMenu.react","WorkGalahadNotificationListItemChevronHelper"],function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("WorkGalahadNotificationListItemChevronHelper").getDropdownItems;function a(a){var c=a.filteredNotificationOptions,d=a.label;a=a.onOptionClick;return g.jsx(b("WIGDropdownMenu.react"),{items:h(c,a),label:d})}e.exports=a},null);
__d("BrowserPushCommands",[],function(a,b,c,d,e,f){a="browser_push_ack";b="browser_push_redirect";c="browser_push_window_visible";d={ACK:a,REDIRECT:b,WINDOW_VISIBLE:c};e.exports=d},null);
__d("BrowserPushMessageRedirectUtil",["Bootloader"],function(a,b,c,d,e,f){a=function(a){var c="(messages)(.*?)(?:(tid=))([^&]*)";a=a.match(c);if(!a)return!0;var d=a.pop();b("Bootloader").loadModules(["FantaTabActions"],function(a){a.openTab(d)},"BrowserPushMessageRedirectUtil");return!1};e.exports=a},null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],function(a,b,c,d,e,f){var g,h;function i(a){if(a.data.command&&a.data.command===b("BrowserPushCommands").REDIRECT){if(window.onbeforeunload()===void 0)a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!0});else{a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!1});return}a=a.data.uri;if(/^([^.:/?#]+):/.test(a)&&!(g||(g=b("URISchemes"))).isAllowed(/^([^.:/?#]+):/.exec(a)[1])||!b("isFacebookURI")(new(h||(h=b("URI")))(a)))throw new Error("goURI: URI scheme rejected, URI: "+a);b("BrowserPushMessageRedirectUtil")(a)&&(window.location.href=a)}}a={registerRedirectHandler:function(){b("EventListener").listen(window,"message",function(a){a.origin===""&&i(a)}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",function(a){(navigator.serviceWorker&&navigator.serviceWorker.controller&&a.target&&a.target.controller&&a.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(a.origin))&&i(a)})}};e.exports=a},null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],function(a,b,c,d,e,f){function g(){new(b("ClientServiceWorkerMessage"))(b("BrowserPushCommands").WINDOW_VISIBLE,null).sendViaController()}a={listenForVisibility:function(){b("Visibility").isHidden()||g(),b("Visibility").addListener(b("Visibility").VISIBLE,g)}};e.exports=a},null);
__d("MPushPermissionUtil",["BanzaiLogger","gkx"],function(a,b,c,d,e,f){function a(a){var c=b("gkx")("910664");c&&b("BanzaiLogger").log("ChromePushPermissionEventsLoggerConfig",{event:a})}e.exports={logEvent:a}},null);
__d("PushRegistrationUtils",[],function(a,b,c,d,e,f){"use strict";var g={normalizeSubscriptionEndpoint:function(a){var b=a.endpoint;"subscriptionId"in a&&!new RegExp("/"+a.subscriptionId+"$").test(b)&&(b+="/"+a.subscriptionId);return b},setupPushRegistrationData:function(a,b){var c=g.normalizeSubscriptionEndpoint(a),d=null;a.toJSON?d=a.toJSON().keys:a.keys&&(d=a.keys);return{app_id:b,push_endpoint:c,subscription_keys:JSON.stringify(d)}}};e.exports=g},null);
__d("XAsyncPushMuteController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},mute_for:{type:"Enum",enumType:0}})},null);
__d("XAsyncPushMuteStateController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/state/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0}})},null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushPubKey","BrowserPushVisibilityChanger","MPushPermissionUtil","PushRegistrationUtils","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction","promiseDone"],function(a,b,c,d,e,f){var g=window.Notification,h=new Map();a=function(){"use strict";a.get=function(b,c){if(h.has(c))return h.get(c);b=new a(b,c);h.set(c,b);return b};function a(b,c){this.$3=b,this.appID=c,!a.$1&&!a.$2&&(a.$1=!1,a.$2=!1)}var c=a.prototype;c.getPushSubscription=function(){var c=this;return new(b("Promise"))(function(d,e){a.pushPermissionIsDenied()&&(b("MPushPermissionUtil").logEvent("permission_denied_or_blocked"),e(new Error("No permission or not supported"))),b("ServiceWorkerRegistration").getWorkerRegistration(c.$3).then(function(a){if(!a){d(null);return}a.pushManager.getSubscription().then(function(a){d(a)})["catch"](e)})["catch"](e)})};c.$4=function(a,c,d,e){a=a.getURIBuilder().getURI();c=new c(a);c.setData(b("PushRegistrationUtils").setupPushRegistrationData(d,this.appID));c.setMethod("post");c.setHandler&&c.setHandler(function(a){a.payload&&a.payload.session_change&&e()});c.send()};c.getMutedUntilInServer=function(a){var c=this;return new(b("Promise"))(function(d,e){c.getPushSubscription().then(function(f){if(f){f=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(f);f=b("XAsyncPushMuteStateController").getURIBuilder().setString("push_endpoint",f).setInt("appid",c.appID).getURI();f=new a(f);f.listen("done",function(a){d(a.payload.muteUntilTimestampSec)});f.send()}else e("cannot check mute status for unsubscribed endpoint")})["catch"](e)})};c.muteNotifications=function(a,c){var d=this;return new(b("Promise"))(function(e,f){d.getPushSubscription().then(function(g){if(g){g=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g);g=b("XAsyncPushMuteController").getURIBuilder().setEnum("mute_for",a).setString("push_endpoint",g).setInt("appid",d.appID).getURI();g=new c(g);g.setMethod("POST");g.listen("done",function(b){a!==0&&b.payload.muteUntilTimestampSec===0?f("operation failed in server"):e(b.payload.muteUntilTimestampSec)});g.send()}else f("no subscription found")})["catch"](f)})};c.getSubscription=function(){var a=this;return new(b("Promise"))(function(c,d){a.getPushSubscription().then(function(a){a?c(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)):c(null)})["catch"](d)})};c.maybeRegisterPushAgain=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){e.getPushSubscription().then(function(g){g?(e.$4(a,c,g,d),f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g))):f(null)})["catch"](function(){f(null)})})};c.$5=function(c,d,e){var f=this;return new(b("Promise"))(function(b,g){if(a.$2&&!e){g(new Error("sending disable info already"));return}a.$2=!0;var h=c.getURIBuilder().getURI();h=new d(h.toString());h.setData({appid:f.appID,from_browser_settings:e});h.setMethod("post");h.listen?(h.listen("finally",b),h.listen("fail",function(){a.$2=!1,g()})):h.setErrorHandler&&h.setHandler?(h.setErrorHandler(function(){a.$2=!1,g()}),h.setHandler(b)):b();h.send()})};c.isPushRegistered=function(c,d,e,f,g,h,i){var j=this;g===void 0&&(g=!1);h===void 0&&(h=b("emptyFunction"));i===void 0&&(i=!1);b("BrowserPushMessageHandler").registerRedirectHandler();return new(b("Promise"))(function(k,l){j.getPushSubscription().then(function(l){k(!!l||c&&!a.pushPermissionIsPending()),l?g?j.$4(d,f,l,h):b("BrowserPushVisibilityChanger").listenForVisibility():!l&&c&&(a.pushPermissionIsOn()?j.registerPush(d,f,h,i)["catch"](function(){}):j.$5(e,f,!1))})["catch"](function(){c&&j.$5(e,f,!1),i&&b("ServiceWorkerRegistration").unregisterControllingWorker(),l()})})};c.$6=function(){return new(b("Promise"))(function(a,b){g.requestPermission(a)})};c.registerPushAndWaitForEndpoint=function(a,c,d,e){var f=this;e===void 0&&(e=!1);return new(b("Promise"))(function(b,g){f.$7(a,c,d,!0,null,e).then(function(a){if(typeof a!=="string"){g(new Error("registerPushImpl did not return an endpoint"));return}b(a)})["catch"](g)})};c.registerPushOnKaiOS=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){d.waitForKaiOS().done(function(){d.registerPush(function(d){d=JSON.parse(d.get("push_endpoint"));e.$4(a,c,d,b("emptyFunction"));f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(d))})})})};c.registerPush=function(a,c,d,e,f){d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=b("emptyFunction"));return this.registerPushWithFinishedCallBack(a,c,d,f,e)};c.registerPushWithFinishedCallBack=function(a,c,d,e,f){var g=this;f===void 0&&(f=!1);return new(b("Promise"))(function(b,h){g.$7(a,c,d,!1,e,f).then(function(a){if(typeof a!=="boolean"){h(new Error("registerPushImpl did not return a boolean"));return}b(a)})["catch"](h)})};c.$7=function(c,d,e,f,g,h){var i=this;if(a.$1)return new(b("Promise"))(function(a,b){b(new Error("registering already"))});if(!self.PushManager)return b("Promise").reject(new Error("PushManager not found."));a.$1=!0;return new(b("Promise"))(function(j,k){var l=b("ServiceWorkerRegistration").registerWorkerIfUnregistered(i.$3),m=i.$6();b("Promise").all([l,m]).then(function(l){var m=l[0];if(!a.pushPermissionIsOn()){h&&m.unregister();throw new Error("Push permission was denied")}f||j(!0);l=b("BrowserPushPubKey").appServerKey;l=l!=null&&l!=""?{userVisibleOnly:!0,applicationServerKey:l}:{userVisibleOnly:!0};m.pushManager.subscribe(l).then(function(a){f&&j(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)),i.$4(c,d,a,e),g&&g(),b("BrowserPushVisibilityChanger").listenForVisibility()})["catch"](function(b){a.$1=!1,h&&m.unregister(),k(b)})})["catch"](function(b){a.$1=!1,k(b)})})};c.unregisterPushAndSWOnKaiOS=function(a,c,d,e){var f=this;return new(b("Promise"))(function(b,g){f.$5(a,c,e).then(function(){d.unregisterPush(),b()})["catch"](g)})};c.unregisterPushAndSW=function(a,c){var d=this;return new(b("Promise"))(function(e,f){d.$5(a,c,!0).then(function(){b("promiseDone")(b("ServiceWorkerRegistration").unregisterControllingWorker(),e)})["catch"](f)})};c.unregisterPushOnly=function(a,c){var d=this;return new(b("Promise"))(function(b,e){d.getPushSubscription().then(function(f){f?f.unsubscribe().then(d.$5(a,c,!0)).then(function(){b(!0)})["catch"](e):e()})["catch"](e)})};a.pushPermissionIsPending=function(){return window.Notification&&window.Notification.permission==="default"};a.pushPermissionIsOn=function(){return window.Notification&&window.Notification.permission==="granted"};a.pushPermissionIsDenied=function(){return window.Notification&&window.Notification.permission==="denied"};return a}();e.exports=a},null);
__d("XBrowserPushDummyPromptActionController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/dummyprompt/action/",{})},null);
__d("XBrowserWebNotificationsEnableController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/web_notifications/enable/",{})},null);
__d("XPushRegisterServiceWorkerController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("/push/register/service_worker/",{})},null);
__d("BrowserPushDirectPromptInstaller",["Promise","Arbiter","AsyncRequest","BanzaiLogger","Bootloader","BrowserPushSessionChange.react","CrossWindowEventEmitter","DOM","NotificationPermissionDummyRequest.react","NotificationPermissionNotice.react","NotificationPermissionRequest.react","NotificationPermissionRequestWithPreview.react","PushRegistration","QE2Logger","React","ReactDOM","XBrowserPushDisabledController","XBrowserPushDummyPromptActionController","XBrowserPushXOutController","XBrowserWebNotificationsEnableController","XPushRegisterServiceWorkerController","incognito","promiseDone"],function(a,b,c,d,e,f){"use strict";var g=b("React"),h=window.Notification,i=new(b("CrossWindowEventEmitter"))("BrowserPushInstall"),j={},k,l=!1;function m(a,c,d){d===void 0&&(d="prompt");a=babelHelpers["extends"]({event:a,appid:c,surface:d},j);b("BanzaiLogger").log("BrowserPushLoggerConfig",a)}function n(){j.xout_count===0&&k&&b("QE2Logger").logExposureForUser(k)}function o(a){var c=b("XBrowserPushXOutController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();m("xout",a)}function p(a){var c=b("XBrowserWebNotificationsEnableController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("Arbiter").inform("WebNotifications/enabled");i.emitRemote("complete");b("Bootloader").loadModules(["WebNotificationsPresenter"],function(b){b.init(a.toString())},"BrowserPushDirectPromptInstaller")}function q(a){l||(l=!0,b("ReactDOM").unmountComponentAtNode(a))}function r(a,c){var d=b("DOM").insertBefore(a,b("DOM").create("span"));d=d.pop();b("ReactDOM").render(g.jsx(b("BrowserPushSessionChange.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(a)},push:c}),d)}function s(a,c,d,e,f){var h=b("PushRegistration").get(a,c);m("turn_on",c);return h.registerPushWithFinishedCallBack(b("XPushRegisterServiceWorkerController"),b("AsyncRequest"),function(){r(d,h)},function(){b("Arbiter").inform("BrowserPushInstall/installed")},f).then(function(){q(d),m("install",c)})["catch"](function(a){q(d),b("PushRegistration").pushPermissionIsDenied()?(b("ReactDOM").render(g.jsx(b("NotificationPermissionNotice.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(d)},browserName:e}),d),m("deny",c)):m("install_ignore",c),o(c)})}a={setLogExtraData:function(a){j=a},setQEUniverseName:function(a){k=a},requestThenInstallWebNotifications:function(a,b,c,d,e,f){n(),this._showRequestPermissions({appID:a,baseElement:b,browserName:c,hasEnoughFriendsToRequestPush:d,sampleNotificationAvatarURI:f,sampleNotificationMessage:e,showSpinnerWhileRequesting:!0,isWebNotifications:!0,onAcceptCallback:this._getOnWebNotificationsDialogAccept({appID:a,callback:function(c){c==="granted"?(m("install",a),i.emitRemote("complete"),q(b),p(a)):(m("deny",a),o(a))}})})},requestThenInstallPush:function(a,c,d,e,f,g,h,i,j,k,l,m,o){var p=this,q=b("PushRegistration").get(a,c);e=q.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!g,function(){r(d,q)},i);b("Promise").all([e,b("incognito")()]).then(function(e){var g=e[0];e=e[1];if(g||e)return;n();b("PushRegistration").pushPermissionIsPending()?p._showRequestPermissions({appID:c,baseElement:d,hasEnoughFriendsToRequestPush:j,isWebNotifications:!1,onAcceptCallback:p._getOnPushNotificationsAccept({appID:c,baseElement:d,browserName:h,path:a,workerIsForPushOnly:i}),sampleNotificationAvatarURI:l,sampleNotificationMessage:k,showSpinnerWhileRequesting:m,wasXOuted:f,hideSecondStep:o}):!f&&b("PushRegistration").pushPermissionIsOn()&&s(a,c,d,h,i)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&n()})},installPush:function(a,c,d,e,f,h,i,j,k,l,o,p){var t=this;l===void 0&&(l="default");o===void 0&&(o=0);p===void 0&&(p=0);var u=typeof l==="string"&&l!=="default",v=b("PushRegistration").get(a,c);e=v.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!h,function(){r(d,v)},j);b("Promise").all([e,b("incognito")()]).then(function(e){var h=e[0];e=e[1];if(h||e)return;n();if(b("PushRegistration").pushPermissionIsPending()){if(!k||f)return;b("QE2Logger").logExposureForUser("chrome_push_custom_prompt_experiments");u?(b("ReactDOM").render(g.jsx(b("NotificationPermissionDummyRequest.react"),{promptTitleIndex:o,promptBodyIndex:p,onNotNow:function(){t._recordUserDummyPromptAction("dummy_prompt_not_now",c),q(d)},onAccept:function(){t._recordUserDummyPromptAction("dummy_prompt_accept",c),t._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:i,workerIsForPushOnly:j})},onIgnore:function(){t._recordUserDummyPromptAction("dummy_prompt_dismissed",c),q(d)},isBinary:l==="binary"}),d),m("dummy_prompt_request",c,"dummy_prompt")):t._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:i,workerIsForPushOnly:j})}else f||s(a,c,d,i,j)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&n()})},_recordUserDummyPromptAction:function(a,c){m(a,c,"dummy_prompt");c=b("XBrowserPushDummyPromptActionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({user_action:a}).setMethod("POST").send()},_renderDefaultPushRequest:function(a){var c=a.path,d=a.appID,e=a.baseElement,f=a.browserName;a=a.workerIsForPushOnly;b("ReactDOM").render(g.jsx(b("NotificationPermissionRequest.react"),{onHide:function(){q(e)}}),e);s(c,d,e,f,a)},_showRequestPermissions:function(a){var c=a.appID,d=a.baseElement,e=a.hasEnoughFriendsToRequestPush,f=a.isWebNotifications,h=a.onAcceptCallback,j=a.sampleNotificationAvatarURI,k=a.sampleNotificationMessage,l=a.showSpinnerWhileRequesting,n=a.wasXOuted;a=a.hideSecondStep;i.once("complete",function(a){q(d),m("twostep_suppressed",c)});if(!e||n)return;m("twostep_request",c);b("ReactDOM").render(g.jsx(b("NotificationPermissionRequestWithPreview.react"),{isWebNotifications:f,notificationImage:j||void 0,notificationMessage:k||void 0,onAccept:h,onClose:function(){m("twostep_notnow",c),i.emitRemote("complete"),o(c),q(d)},showSpinnerWhileRequesting:l,hideSecondStep:a}),d)},_getOnPushNotificationsAccept:function(a){var c=a.appID,d=a.baseElement,e=a.browserName,f=a.callback,g=a.path,h=a.workerIsForPushOnly;return function(){m("twostep_accept",c),i.emitRemote("complete"),b("promiseDone")(s(g,c,d,e,h).then(f,f))}},_getOnWebNotificationsDialogAccept:function(a){var b=this,c=a.appID,d=a.callback;return function(){m("twostep_accept",c),b._requestWebNotificationsFromBrowser(c,d)}},_requestWebNotificationsFromBrowser:function(a,b){m("turn_on",a),h.requestPermission(b)}};e.exports=a},null);
__d("WorkLoginStatePoller",["SystemEvents"],function(a,b,c,d,e,f){var g=!1;a={init:function(){if(g)return;g=!0;b("SystemEvents").subscribe(b("SystemEvents").USER,function(){window.location.reload()})}};e.exports=a},null);